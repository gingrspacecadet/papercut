if(!1===Object.hasOwn(MouseEvent.prototype,"pointerType")&&Object.defineProperty(MouseEvent.prototype,"pointerType",{get(){return this.sourceCapabilities.firesTouchEvents?"touch":"mouse"}}),Element.prototype.setPointerCapture){let t=Element.prototype.setPointerCapture;Element.prototype.setPointerCapture=function(e){if(t.call(this,e),!1!==this.hasPointerCapture(e)){{let t,i,s,n=!1,a=!1,r=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",i),this.removeEventListener("lostpointercapture",s)};this.addEventListener("pointerup",t=t=>{t.pointerId===e&&(n=!0,r())}),this.addEventListener("pointercancel",i=t=>{t.pointerId===e&&(a=!0,r())}),this.addEventListener("lostpointercapture",s=t=>{if(t.pointerId===e&&(r(),!1===n&&!1===a)){let i=new PointerEvent("pointercancel",{pointerId:e,isPrimary:t.isPrimary});this.dispatchEvent(i)}})}{let t,i,s=`* {cursor: ${getComputedStyle(this).cursor} !important; user-select: none !important; -webkit-user-select: none !important;}`,n=[];for(let t=this.parentNode||this.host;t&&t!==document;t=t.parentNode||t.host)if(t.nodeType===document.DOCUMENT_FRAGMENT_NODE){let e=document.createElementNS(t.host.namespaceURI,"style");e.textContent=s,t.append(e),n.push(e)}else if(t.nodeType===document.DOCUMENT_NODE){let e=document.createElement("style");e.textContent=s,t.head.append(e),n.push(e)}this.addEventListener("lostpointercapture",t=s=>{if(s.pointerId===e){this.removeEventListener("lostpointercapture",t),window.removeEventListener("pointerup",i,!0);for(let t of n)t.remove()}}),window.addEventListener("pointerup",i=s=>{if(s.pointerId===e){this.removeEventListener("lostpointercapture",t),window.removeEventListener("pointerup",i,!0);for(let t of n)t.remove()}},!0)}}}}Object.defineProperty(Animation.prototype,"finished",{get(){return new Promise((t=>{"finished"===this.playState?t():this.addEventListener("finish",(()=>t()),{once:!0})}))}}),window.requestIdleCallback||(window.requestIdleCallback=(t,e={})=>{let i=e.timeout||1,s=performance.now();return setTimeout((()=>{t({get didTimeout(){return!e.timeout&&performance.now()-s-1>i},timeRemaining:()=>Math.max(0,performance.now()-s+1)})}),1)}),Node.prototype.append||(Node.prototype.append=function(t){this.appendChild(t)}),Node.prototype.prepend||(Node.prototype.prepend=function(t){this.insertBefore(t,this.firstElementChild)}),Node.prototype.before||(Node.prototype.before=function(t){this.parentElement.insertBefore(t,this)}),Node.prototype.after||(Node.prototype.after=function(t){this.parentElement.insertBefore(t,this.nextElementSibling)}),Node.prototype.closest||(Node.prototype.closest=function(t){return this.parentNode?this.parentNode.closest(t):null}),Node.prototype.replaceWith||(Node.prototype.replaceWith=function(t){this.parentNode.replaceChild(t,this)});let t=(t,e=null)=>{let i=t.split(":"),s=null;if(1===i.length){let[t]=i;s=null===e?document.createElement(t):document.createElement(t,e)}else if(2===i.length){let[t,e]=i;"svg"===t&&(s=document.createElementNS("http://www.w3.org/2000/svg",e))}return s},e=(t,e)=>{let i=e.getBoundingClientRect();return t.clientX>=i.x&&t.clientX<=i.x+i.width&&t.clientY>=i.y&&t.clientY<=i.y+i.height},i=(t,e,s=!0)=>{let n=t.closest(e);return s&&!n&&t.getRootNode().host?i(t.getRootNode().host,e):n},s=t=>{let e=t=>t&&t!==document.body?(t=>{let e=getComputedStyle(t,null);return/(auto|scroll)/.test(e.getPropertyValue("overflow")+e.getPropertyValue("overflow-y")+e.getPropertyValue("overflow-x"))})(t)&&"x-texteditor"!==t.localName?t:e(t.parentElement||t.parentNode.host):document.body;return e(t.parentElement||t.parentNode.host)},n=t=>{let e=null,i=[],s=t;for(;s&&""!==s.href.baseVal;){null===e&&(e=t.ownerSVGElement);let n=e.querySelector(s.href.baseVal);if(!n||"linearGradient"!==n.localName&&"radialGradient"!==n.localName||n===t||!1!==i.includes(n))break;i.push(n),s=n}return i},a=HTMLDialogElement.prototype.showModal,r=HTMLDialogElement.prototype.close,o=[],l={get open(){return this.hasAttribute("open")},showModal(){return new Promise((async t=>{if(!0!==this.open&&!1!==this.isConnected){this.o&&await this.o.finished,this.p&&await this.p.finished,a.apply(this);{let t,e={html:document.documentElement.style.overflow,body:document.body.style.overflow};document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",o.push(this),this.addEventListener("close",t=i=>{i.target===this&&(this.removeEventListener("close",t),o=o.filter((t=>t!==this)),0===o.length&&(document.documentElement.style.overflow=e.html,document.body.style.overflow=e.body))})}{let t=this.querySelector("[autofocus]");t?t.focus():this.focus()}if(!1===this.hasAttribute("hidden")){let t=getComputedStyle(this),e=1e3*Number.parseFloat(t.getPropertyValue("transition-duration")||"0s"),i=t.getPropertyValue("transition-timing-function"),s=t.getPropertyValue("--transition-type")||"stretch";this.o=this.animate({transform:"grow"===s?["scale(0.9)","scale(1)"]:["scaleY(0)","scaleY(1)"],opacity:["0","1"]},{duration:e,easing:i})}{let t,e,i;this.addEventListener("keydown",t=t=>{"Escape"===t.code&&t.preventDefault()}),document.addEventListener("keydown",e=t=>{"Escape"===t.code&&t.target===document.body&&t.preventDefault()}),this.addEventListener("close",i=s=>{s.target===this&&(this.removeEventListener("close",i),this.removeEventListener("keydown",t),document.removeEventListener("keydown",e))})}{let t,i,s,n=!0;this.addEventListener("pointerdown",t=t=>{n=!1===e(t,this)}),this.addEventListener("click",i=t=>{t.target===this&&!0===t.isTrusted&&!1===t.defaultPrevented&&!0===n&&!1===e(t,this)&&!0===this.hasAttribute("open")&&(this.close(),this.dispatchEvent(new CustomEvent("userclose")))}),this.addEventListener("close",s=e=>{e.target===this&&(this.removeEventListener("pointerdown",t),this.removeEventListener("click",i),this.removeEventListener("close",s))})}this.o&&(await this.o.finished,this.o=null),t()}else t()}))},close(t){return new Promise((async e=>{if(this.o&&await this.o.finished,this.p&&await this.p.finished,!1===this.hasAttribute("hidden")){let t=getComputedStyle(this),e=1e3*Number.parseFloat(t.getPropertyValue("transition-duration")||"0s"),i=t.getPropertyValue("transition-timing-function")||"ease",s=t.getPropertyValue("--transition-type")||"stretch";this.p=this.animate({transform:"grow"===s?["scale(1)","scale(0.9)"]:["scaleY(1)","scaleY(0)"],opacity:["1","0"]},{duration:e,easing:i})}this.p&&(await this.p.finished,this.p=null),this.hasAttribute("open")&&r.apply(this,[t]),e()}))}};for(let[t,e]of Object.entries(Object.getOwnPropertyDescriptors(l)))Object.defineProperty(HTMLDialogElement.prototype,t,e);const{entries:h,setPrototypeOf:d,isFrozen:c,getPrototypeOf:u,getOwnPropertyDescriptor:p}=Object;let{freeze:m,seal:b,create:g}=Object,{apply:f,construct:x}="undefined"!=typeof Reflect&&Reflect;m||(m=function(t){return t}),b||(b=function(t){return t}),f||(f=function(t,e,i){return t.apply(e,i)}),x||(x=function(t,e){return new t(...e)});const w=D(Array.prototype.forEach),v=D(Array.prototype.lastIndexOf),y=D(Array.prototype.pop),k=D(Array.prototype.push),C=D(Array.prototype.splice),z=D(String.prototype.toLowerCase),E=D(String.prototype.toString),$=D(String.prototype.match),S=D(String.prototype.replace),M=D(String.prototype.indexOf),L=D(String.prototype.trim),A=D(Object.prototype.hasOwnProperty),P=D(RegExp.prototype.test),T=(R=TypeError,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return x(R,e)});var R;function D(t){return function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return f(t,e,s)}}function B(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z;d&&d(t,null);let s=e.length;for(;s--;){let n=e[s];if("string"==typeof n){const t=i(n);t!==n&&(c(e)||(e[s]=t),n=t)}t[n]=!0}return t}function O(t){for(let e=0;e<t.length;e++){A(t,e)||(t[e]=null)}return t}function N(t){const e=g(null);for(const[i,s]of h(t)){A(t,i)&&(Array.isArray(s)?e[i]=O(s):s&&"object"==typeof s&&s.constructor===Object?e[i]=N(s):e[i]=s)}return e}function H(t,e){for(;null!==t;){const i=p(t,e);if(i){if(i.get)return D(i.get);if("function"==typeof i.value)return D(i.value)}t=u(t)}return function(){return null}}const I=m(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),j=m(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),G=m(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),F=m(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),X=m(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),_=m(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Z=m(["#text"]),U=m(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Y=m(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),V=m(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),W=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),q=b(/\{\{[\w\W]*|[\w\W]*\}\}/gm),K=b(/<%[\w\W]*|[\w\W]*%>/gm),J=b(/\$\{[\w\W]*/gm),Q=b(/^data-[\-\w.\u00B7-\uFFFF]+$/),tt=b(/^aria-[\-\w]+$/),et=b(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),it=b(/^(?:\w+script|data):/i),st=b(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nt=b(/^html$/i),at=b(/^[a-z][.\w]*(-[.\w]+)+$/i);var rt=Object.freeze({__proto__:null,ARIA_ATTR:tt,ATTR_WHITESPACE:st,CUSTOM_ELEMENT:at,DATA_ATTR:Q,DOCTYPE_NAME:nt,ERB_EXPR:K,IS_ALLOWED_URI:et,IS_SCRIPT_OR_DATA:it,MUSTACHE_EXPR:q,TMPLIT_EXPR:J});const ot=1,lt=3,ht=7,dt=8,ct=9,ut=function(){return"undefined"==typeof window?null:window};var pt=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();const i=e=>t(e);if(i.version="3.2.4",i.removed=[],!e||!e.document||e.document.nodeType!==ct||!e.Element)return i.isSupported=!1,i;let{document:s}=e;const n=s,a=n.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:l,Element:d,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:b,trustedTypes:f}=e,x=d.prototype,R=H(x,"cloneNode"),D=H(x,"remove"),O=H(x,"nextSibling"),q=H(x,"childNodes"),K=H(x,"parentNode");if("function"==typeof o){const t=s.createElement("template");t.content&&t.content.ownerDocument&&(s=t.content.ownerDocument)}let J,Q="";const{implementation:tt,createNodeIterator:it,createDocumentFragment:st,getElementsByTagName:at}=s,{importNode:pt}=n;let mt={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};i.isSupported="function"==typeof h&&"function"==typeof K&&tt&&void 0!==tt.createHTMLDocument;const{MUSTACHE_EXPR:bt,ERB_EXPR:gt,TMPLIT_EXPR:ft,DATA_ATTR:xt,ARIA_ATTR:wt,IS_SCRIPT_OR_DATA:vt,ATTR_WHITESPACE:yt,CUSTOM_ELEMENT:kt}=rt;let{IS_ALLOWED_URI:Ct}=rt,zt=null;const Et=B({},[...I,...j,...G,...X,...Z]);let $t=null;const St=B({},[...U,...Y,...V,...W]);let Mt=Object.seal(g(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Lt=null,At=null,Pt=!0,Tt=!0,Rt=!1,Dt=!0,Bt=!1,Ot=!0,Nt=!1,Ht=!1,It=!1,jt=!1,Gt=!1,Ft=!1,Xt=!0,_t=!1,Zt=!0,Ut=!1,Yt={},Vt=null;const Wt=B({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qt=null;const Kt=B({},["audio","video","img","source","image","track"]);let Jt=null;const Qt=B({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),te="http://www.w3.org/1998/Math/MathML",ee="http://www.w3.org/2000/svg",ie="http://www.w3.org/1999/xhtml";let se=ie,ne=!1,ae=null;const re=B({},[te,ee,ie],E);let oe=B({},["mi","mo","mn","ms","mtext"]),le=B({},["annotation-xml"]);const he=B({},["title","style","font","a","script"]);let de=null;const ce=["application/xhtml+xml","text/html"];let ue=null,pe=null;const me=s.createElement("form"),be=function(t){return t instanceof RegExp||t instanceof Function},ge=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!pe||pe!==t){if(t&&"object"==typeof t||(t={}),t=N(t),de=-1===ce.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,ue="application/xhtml+xml"===de?E:z,zt=A(t,"ALLOWED_TAGS")?B({},t.ALLOWED_TAGS,ue):Et,$t=A(t,"ALLOWED_ATTR")?B({},t.ALLOWED_ATTR,ue):St,ae=A(t,"ALLOWED_NAMESPACES")?B({},t.ALLOWED_NAMESPACES,E):re,Jt=A(t,"ADD_URI_SAFE_ATTR")?B(N(Qt),t.ADD_URI_SAFE_ATTR,ue):Qt,qt=A(t,"ADD_DATA_URI_TAGS")?B(N(Kt),t.ADD_DATA_URI_TAGS,ue):Kt,Vt=A(t,"FORBID_CONTENTS")?B({},t.FORBID_CONTENTS,ue):Wt,Lt=A(t,"FORBID_TAGS")?B({},t.FORBID_TAGS,ue):{},At=A(t,"FORBID_ATTR")?B({},t.FORBID_ATTR,ue):{},Yt=!!A(t,"USE_PROFILES")&&t.USE_PROFILES,Pt=!1!==t.ALLOW_ARIA_ATTR,Tt=!1!==t.ALLOW_DATA_ATTR,Rt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Dt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Bt=t.SAFE_FOR_TEMPLATES||!1,Ot=!1!==t.SAFE_FOR_XML,Nt=t.WHOLE_DOCUMENT||!1,jt=t.RETURN_DOM||!1,Gt=t.RETURN_DOM_FRAGMENT||!1,Ft=t.RETURN_TRUSTED_TYPE||!1,It=t.FORCE_BODY||!1,Xt=!1!==t.SANITIZE_DOM,_t=t.SANITIZE_NAMED_PROPS||!1,Zt=!1!==t.KEEP_CONTENT,Ut=t.IN_PLACE||!1,Ct=t.ALLOWED_URI_REGEXP||et,se=t.NAMESPACE||ie,oe=t.MATHML_TEXT_INTEGRATION_POINTS||oe,le=t.HTML_INTEGRATION_POINTS||le,Mt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&be(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Mt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&be(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Mt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Mt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Bt&&(Tt=!1),Gt&&(jt=!0),Yt&&(zt=B({},Z),$t=[],!0===Yt.html&&(B(zt,I),B($t,U)),!0===Yt.svg&&(B(zt,j),B($t,Y),B($t,W)),!0===Yt.svgFilters&&(B(zt,G),B($t,Y),B($t,W)),!0===Yt.mathMl&&(B(zt,X),B($t,V),B($t,W))),t.ADD_TAGS&&(zt===Et&&(zt=N(zt)),B(zt,t.ADD_TAGS,ue)),t.ADD_ATTR&&($t===St&&($t=N($t)),B($t,t.ADD_ATTR,ue)),t.ADD_URI_SAFE_ATTR&&B(Jt,t.ADD_URI_SAFE_ATTR,ue),t.FORBID_CONTENTS&&(Vt===Wt&&(Vt=N(Vt)),B(Vt,t.FORBID_CONTENTS,ue)),Zt&&(zt["#text"]=!0),Nt&&B(zt,["html","head","body"]),zt.table&&(B(zt,["tbody"]),delete Lt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw T('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw T('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');J=t.TRUSTED_TYPES_POLICY,Q=J.createHTML("")}else void 0===J&&(J=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let i=null;const s="data-tt-policy-suffix";e&&e.hasAttribute(s)&&(i=e.getAttribute(s));const n="dompurify"+(i?"#"+i:"");try{return t.createPolicy(n,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+n+" could not be created."),null}}(f,a)),null!==J&&"string"==typeof Q&&(Q=J.createHTML(""));m&&m(t),pe=t}},fe=B({},[...j,...G,...F]),xe=B({},[...X,..._]),we=function(t){k(i.removed,{element:t});try{K(t).removeChild(t)}catch(e){D(t)}},ve=function(t,e){try{k(i.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){k(i.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(jt||Gt)try{we(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ye=function(t){let e=null,i=null;if(It)t="<remove></remove>"+t;else{const e=$(t,/^[\r\n\t ]+/);i=e&&e[0]}"application/xhtml+xml"===de&&se===ie&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const n=J?J.createHTML(t):t;if(se===ie)try{e=(new b).parseFromString(n,de)}catch(t){}if(!e||!e.documentElement){e=tt.createDocument(se,"template",null);try{e.documentElement.innerHTML=ne?Q:n}catch(t){}}const a=e.body||e.documentElement;return t&&i&&a.insertBefore(s.createTextNode(i),a.childNodes[0]||null),se===ie?at.call(e,Nt?"html":"body")[0]:Nt?e.documentElement:a},ke=function(t){return it.call(t.ownerDocument||t,t,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Ce=function(t){return t instanceof p&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof u)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},ze=function(t){return"function"==typeof l&&t instanceof l};function Ee(t,e,s){w(t,(t=>{t.call(i,e,s,pe)}))}const $e=function(t){let e=null;if(Ee(mt.beforeSanitizeElements,t,null),Ce(t))return we(t),!0;const s=ue(t.nodeName);if(Ee(mt.uponSanitizeElement,t,{tagName:s,allowedTags:zt}),t.hasChildNodes()&&!ze(t.firstElementChild)&&P(/<[/\w]/g,t.innerHTML)&&P(/<[/\w]/g,t.textContent))return we(t),!0;if(t.nodeType===ht)return we(t),!0;if(Ot&&t.nodeType===dt&&P(/<[/\w]/g,t.data))return we(t),!0;if(!zt[s]||Lt[s]){if(!Lt[s]&&Me(s)){if(Mt.tagNameCheck instanceof RegExp&&P(Mt.tagNameCheck,s))return!1;if(Mt.tagNameCheck instanceof Function&&Mt.tagNameCheck(s))return!1}if(Zt&&!Vt[s]){const e=K(t)||t.parentNode,i=q(t)||t.childNodes;if(i&&e){for(let s=i.length-1;s>=0;--s){const n=R(i[s],!0);n.k=(t.k||0)+1,e.insertBefore(n,O(t))}}}return we(t),!0}return t instanceof d&&!function(t){let e=K(t);e&&e.tagName||(e={namespaceURI:se,tagName:"template"});const i=z(t.tagName),s=z(e.tagName);return!!ae[t.namespaceURI]&&(t.namespaceURI===ee?e.namespaceURI===ie?"svg"===i:e.namespaceURI===te?"svg"===i&&("annotation-xml"===s||oe[s]):Boolean(fe[i]):t.namespaceURI===te?e.namespaceURI===ie?"math"===i:e.namespaceURI===ee?"math"===i&&le[s]:Boolean(xe[i]):t.namespaceURI===ie?!(e.namespaceURI===ee&&!le[s])&&!(e.namespaceURI===te&&!oe[s])&&!xe[i]&&(he[i]||!fe[i]):!("application/xhtml+xml"!==de||!ae[t.namespaceURI]))}(t)?(we(t),!0):"noscript"!==s&&"noembed"!==s&&"noframes"!==s||!P(/<\/no(script|embed|frames)/i,t.innerHTML)?(Bt&&t.nodeType===lt&&(e=t.textContent,w([bt,gt,ft],(t=>{e=S(e,t," ")})),t.textContent!==e&&(k(i.removed,{element:t.cloneNode()}),t.textContent=e)),Ee(mt.afterSanitizeElements,t,null),!1):(we(t),!0)},Se=function(t,e,i){if(Xt&&("id"===e||"name"===e)&&(i in s||i in me))return!1;if(Tt&&!At[e]&&P(xt,e));else if(Pt&&P(wt,e));else if(!$t[e]||At[e]){if(!(Me(t)&&(Mt.tagNameCheck instanceof RegExp&&P(Mt.tagNameCheck,t)||Mt.tagNameCheck instanceof Function&&Mt.tagNameCheck(t))&&(Mt.attributeNameCheck instanceof RegExp&&P(Mt.attributeNameCheck,e)||Mt.attributeNameCheck instanceof Function&&Mt.attributeNameCheck(e))||"is"===e&&Mt.allowCustomizedBuiltInElements&&(Mt.tagNameCheck instanceof RegExp&&P(Mt.tagNameCheck,i)||Mt.tagNameCheck instanceof Function&&Mt.tagNameCheck(i))))return!1}else if(Jt[e]);else if(P(Ct,S(i,yt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==M(i,"data:")||!qt[t]){if(Rt&&!P(vt,S(i,yt,"")));else if(i)return!1}else;return!0},Me=function(t){return"annotation-xml"!==t&&$(t,kt)},Le=function(t){Ee(mt.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||Ce(t))return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$t,forceKeepAttr:void 0};let n=e.length;for(;n--;){const a=e[n],{name:r,namespaceURI:o,value:l}=a,h=ue(r);let d="value"===r?l:L(l);if(s.attrName=h,s.attrValue=d,s.keepAttr=!0,s.forceKeepAttr=void 0,Ee(mt.uponSanitizeAttribute,t,s),d=s.attrValue,!_t||"id"!==h&&"name"!==h||(ve(r,t),d="user-content-"+d),Ot&&P(/((--!?|])>)|<\/(style|title)/i,d)){ve(r,t);continue}if(s.forceKeepAttr)continue;if(ve(r,t),!s.keepAttr)continue;if(!Dt&&P(/\/>/i,d)){ve(r,t);continue}Bt&&w([bt,gt,ft],(t=>{d=S(d,t," ")}));const c=ue(t.nodeName);if(Se(c,h,d)){if(J&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(o);else switch(f.getAttributeType(c,h)){case"TrustedHTML":d=J.createHTML(d);break;case"TrustedScriptURL":d=J.createScriptURL(d)}try{o?t.setAttributeNS(o,r,d):t.setAttribute(r,d),Ce(t)?we(t):y(i.removed)}catch(t){}}}Ee(mt.afterSanitizeAttributes,t,null)},Ae=function t(e){let i=null;const s=ke(e);for(Ee(mt.beforeSanitizeShadowDOM,e,null);i=s.nextNode();)Ee(mt.uponSanitizeShadowNode,i,null),$e(i),Le(i),i.content instanceof r&&t(i.content);Ee(mt.afterSanitizeShadowDOM,e,null)};return i.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=null,a=null,o=null,h=null;if(ne=!t,ne&&(t="\x3c!--\x3e"),"string"!=typeof t&&!ze(t)){if("function"!=typeof t.toString)throw T("toString is not a function");if("string"!=typeof(t=t.toString()))throw T("dirty is not a string, aborting")}if(!i.isSupported)return t;if(Ht||ge(e),i.removed=[],"string"==typeof t&&(Ut=!1),Ut){if(t.nodeName){const e=ue(t.nodeName);if(!zt[e]||Lt[e])throw T("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)s=ye("\x3c!----\x3e"),a=s.ownerDocument.importNode(t,!0),a.nodeType===ot&&"BODY"===a.nodeName||"HTML"===a.nodeName?s=a:s.appendChild(a);else{if(!jt&&!Bt&&!Nt&&-1===t.indexOf("<"))return J&&Ft?J.createHTML(t):t;if(s=ye(t),!s)return jt?null:Ft?Q:""}s&&It&&we(s.firstChild);const d=ke(Ut?t:s);for(;o=d.nextNode();)$e(o),Le(o),o.content instanceof r&&Ae(o.content);if(Ut)return t;if(jt){if(Gt)for(h=st.call(s.ownerDocument);s.firstChild;)h.appendChild(s.firstChild);else h=s;return($t.shadowroot||$t.shadowrootmode)&&(h=pt.call(n,h,!0)),h}let c=Nt?s.outerHTML:s.innerHTML;return Nt&&zt["!doctype"]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&P(nt,s.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+s.ownerDocument.doctype.name+">\n"+c),Bt&&w([bt,gt,ft],(t=>{c=S(c,t," ")})),J&&Ft?J.createHTML(c):c},i.setConfig=function(){ge(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Ht=!0},i.clearConfig=function(){pe=null,Ht=!1},i.isValidAttribute=function(t,e,i){pe||ge({});const s=ue(t),n=ue(e);return Se(s,n,i)},i.addHook=function(t,e){"function"==typeof e&&k(mt[t],e)},i.removeHook=function(t,e){if(void 0!==e){const i=v(mt[t],e);return-1===i?void 0:C(mt[t],i,1)[0]}return y(mt[t])},i.removeHooks=function(t){mt[t]=[]},i.removeAllHooks=function(){mt={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},i}();class mt{#t={};addEventListener(t,e){this.#t||(this.#t={});let i=this.#t[t];i||(this.#t[t]=i=[]),i.push(e),i.length>1e4&&console.warn(`Potential EventEmitter memory leak: ${i.length} listeners subscribed to event "${t}"`)}removeEventListener(t,e){if(!this.#t||!this.#t[t])return;let i=[];for(let s=0;s<this.#t[t].length;s+=1)this.#t[t][s]!==e&&i.push(this.#t[t][s]);this.#t[t]=i}dispatchEvent(t){if(!this.#t)return;let e=this.#t[t.type];if(!e)return;let i=null;for(let s=e.length-1;s>=0;s-=1){let n,a=e[s];try{n=a.call(window,t)}catch(t){null===i&&(i=t)}if(!1===n)break}if(i)throw i}}let bt=(t,e,i=!1)=>{if(t.length!==e.length)return!1;if(i)for(let i=0;i<t.length;i+=1){if(t[i]!==e[i])return!1}else{for(let i=0;i<t.length;i+=1)if(!e.includes(t[i]))return!1;for(let i=0;i<e.length;i+=1)if(!t.includes(e[i]))return!1}return!0};function gt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ft(t,e,i=[0,0,0]){const s=gt(t,e[0]),n=gt(t,e[1]),a=gt(t,e[2]);return i[0]=s,i[1]=n,i[2]=a,i}function xt(t){return"string"===wt(t)}function wt(t){return(Object.prototype.toString.call(t).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function vt(t,{precision:e=16,unit:i}){return yt(t)?"none":(t=+Ct(t,e))+(i??"")}function yt(t){return null===t}function kt(t){return yt(t)?0:t}function Ct(t,e){if(0===t)return 0;let i=~~t,s=0;i&&e&&(s=1+~~Math.log10(Math.abs(i)));const n=10**(e-s);return Math.floor(t*n+.5)/n}function zt(t,e,i){return isNaN(t)?e:isNaN(e)?t:t+(e-t)*i}function Et(t,e,i){return!t||!e||t===e||t[0]===e[0]&&t[1]===e[1]||isNaN(i)||null===i?i:zt(e[0],e[1],function(t,e,i){return(i-t)/(e-t)}(t[0],t[1],i))}function $t(t,e,i){return Math.max(Math.min(i,e),t)}function St(t,e){return Math.sign(t)===Math.sign(e)?t:-t}function Mt(t,e){return St(Math.abs(t)**e,t)}function Lt(t,e){return 0===e?0:t/e}function At(t,e){if(t instanceof e)return!0;const i=e.name;for(;t;){const e=Object.getPrototypeOf(t),s=e?.constructor?.name;if(s===i)return!0;if(!s||"Object"===s)return!1;t=e}return!1}class Pt{type;coordMeta;coordRange;range;constructor(t,e){if("object"==typeof t&&(this.coordMeta=t),e&&(this.coordMeta=e,this.coordRange=e.range??e.refRange),"string"==typeof t){let e=t.trim().match(/^(?<type><[a-z]+>)(\[(?<min>-?[.\d]+),\s*(?<max>-?[.\d]+)\])?$/);if(!e)throw new TypeError(`Cannot parse ${t} as a type definition.`);this.type=e.groups.type;let{min:i,max:s}=e.groups;(i||s)&&(this.range=[+i,+s])}}get computedRange(){return this.range?this.range:"<percentage>"===this.type?this.percentageRange():"<angle>"===this.type?[0,360]:null}get unit(){return"<percentage>"===this.type?"%":"<angle>"===this.type?"deg":""}resolve(t){if("<angle>"===this.type)return t;let e=this.computedRange,i=this.coordRange;return"<percentage>"===this.type&&(i??=this.percentageRange()),Et(e,i,t)}serialize(t,e){let i="<percentage>"===this.type?this.percentageRange(100):this.computedRange,s=this.unit;return vt(t=Et(this.coordRange,i,t),{unit:s,precision:e})}toString(){let t=this.type;if(this.range){let[e="",i=""]=this.range;t+=`[${e},${i}]`}return t}percentageRange(t=1){let e;return e=this.coordMeta&&this.coordMeta.range||this.coordRange&&this.coordRange[0]>=0?[0,1]:[-1,1],[e[0]*t,e[1]*t]}static get(t,...e){return At(t,this)?t:new this(t,...e)}}const Tt=Symbol("instance");class Rt{type;name;spaceCoords;coords;constructor(t,e=t.space){t[Tt]=this,this.type="function",this.name="color",Object.assign(this,t),this.space=e,"custom"!==this.type&&(this.spaceCoords=Object.values(e.coords),this.coords||(this.coords=this.spaceCoords.map((t=>{let e=["<number>","<percentage>"];return"angle"===t.type&&e.push("<angle>"),e}))),this.coords=this.coords.map(((t,e)=>{let i=this.spaceCoords[e];return"string"==typeof t&&(t=t.trim().split(/\s*\|\s*/)),t.map((t=>Pt.get(t,i)))})))}serializeCoords(t,e,i){return i=t.map(((t,e)=>Pt.get(i?.[e]??this.coords[e][0],this.spaceCoords[e]))),t.map(((t,s)=>i[s].serialize(t,e)))}coerceCoords(t,e){return Object.entries(this.space.coords).map((([i,s],n)=>{let a=t[n];if(yt(a)||isNaN(a))return a;let r=e[n],o=this.coords[n].find((t=>t.type==r));if(!o){let t=s.name||i;throw new TypeError(`${r??a?.raw??a} not allowed for ${t} in ${this.name}()`)}return a=o.resolve(a),o.range&&(e[n]=o.toString()),a}))}canSerialize(){return"function"===this.type||this.serialize}static get(t,...e){return!t||At(t,this)?t:t[Tt]?t[Tt]:new Rt(t,...e)}}const Dt=new class{add(t,e,i){if("string"==typeof arguments[0])(Array.isArray(t)?t:[t]).forEach((function(t){this[t]=this[t]||[],e&&this[t][i?"unshift":"push"](e)}),this);else for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1])}run(t,e){this[t]=this[t]||[],this[t].forEach((function(t){t.call(e&&e.context?e.context:e,e)}))}},Bt={D50:[.3457/.3585,1,.2958/.3585],D65:[.3127/.329,1,.3583/.329]};function Ot(t){return Array.isArray(t)?t:Bt[t]}function Nt(t,e,i,s={}){if(t=Ot(t),e=Ot(e),!t||!e)throw new TypeError(`Missing white point to convert ${t?"":"from"}${t||e?"":"/"}${e?"":"to"}`);if(t===e)return i;let n={W1:t,W2:e,XYZ:i,options:s};if(Dt.run("chromatic-adaptation-start",n),n.M||(n.W1===Bt.D65&&n.W2===Bt.D50?n.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:n.W1===Bt.D50&&n.W2===Bt.D65&&(n.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),Dt.run("chromatic-adaptation-end",n),n.M)return ft(n.XYZ,n.M);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}var Ht={gamut_mapping:"css",precision:5,deltaE:"76",verbose:"test"!==globalThis?.process?.env?.NODE_ENV?.toLowerCase(),warn:function(t){this.verbose&&globalThis?.console?.warn?.(t)}};function It(t,e){let i,s={str:String(t)?.trim(),options:e};if(Dt.run("parse-start",s),s.color)return s.color;s.parsed=function(t){if(!t)return;t=t.trim();let e=t.match(Gt.function);if(e){let t=[],i=[],s=!1,n=e[2].replace(Gt.singleArgument,((e,n)=>{let{value:a,meta:r}=function(t){let e={},i=t.match(Gt.unitValue)?.[0],s=e.raw=t;i?(e.type="%"===i?"<percentage>":"<angle>",e.unit=i,e.unitless=Number(s.slice(0,-i.length)),s=e.unitless*jt[i]):Gt.number.test(s)?(s=Number(s),e.type="<number>"):"none"===s?s=null:"NaN"===s||"calc(NaN)"===s?(s=NaN,e.type="<number>"):e.type="<ident>";return{value:s,meta:e}}(n);return e.startsWith("/")&&(s=!0),t.push(a),i.push(r),""}));return{name:e[1].toLowerCase(),args:t,argMeta:i,lastAlpha:s,commas:n.includes(","),rawName:e[1],rawArgs:e[2]}}}(s.str);let n=s.options?s.options.parseMeta??s.options.meta:null;if(s.parsed){let e,a,r=s.parsed.name,o=s.parsed.args,l=o.map(((t,e)=>s.parsed.argMeta[e]?.type));if("color"===r){let i=o.shift();l.shift();let n=i.startsWith("--")?i.substring(2):`--${i}`,h=[i,n];if(e=Xt.findFormat({name:r,id:h,type:"function"}),!e){let e,a=i in Xt.registry?i:n;if(a in Xt.registry){let s=Xt.registry[a].formats?.color?.id;if(s){e=`Did you mean ${t.replace("color("+i,"color("+s)}?`}}throw new TypeError(`Cannot parse ${s.str}. `+(e??"Missing a plugin?"))}a=e.space,e.id.startsWith("--")&&!i.startsWith("--")&&Ht.warn(`${a.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${e.id}) instead of color(${i}).`),i.startsWith("--")&&!e.id.startsWith("--")&&Ht.warn(`${a.name} is a standard space and supported in the CSS spec. Use color(${e.id}) instead of prefixed color(${i}).`)}else e=Xt.findFormat({name:r,type:"function"}),a=e.space;n&&Object.assign(n,{format:e,formatId:e.name,types:l,commas:s.parsed.commas});let h=1;(!0===e.alpha||s.parsed.lastAlpha)&&(h=s.parsed.args.pop(),n&&(n.alphaType=l.pop()));let d=e.coords.length;if(o.length!==d)throw new TypeError(`Expected ${d} coordinates for ${a.id} in ${s.str}), got ${o.length}`);o=e.coerceCoords(o,l),i={spaceId:a.id,coords:o,alpha:h}}else for(let t of Xt.all)for(let e in t.formats){let a=t.formats[e];if("custom"!==a.type)continue;if(a.test&&!a.test(s.str))continue;a=t.getFormat(a);let r=a.parse(s.str);if(r){n&&Object.assign(n,{format:a,formatId:e}),i=r;break}}if(!i)throw new TypeError(`Could not parse ${t} as a color. Missing a plugin?`);return i.alpha=yt(i.alpha)?i.alpha:void 0===i.alpha?1:$t(0,i.alpha,1),i}const jt={"%":.01,deg:1,grad:.9,rad:180/Math.PI,turn:360},Gt={function:/^([a-z]+)\(((?:calc\(NaN\)|.)+?)\)$/i,number:/^([-+]?(?:[0-9]*\.)?[0-9]+(e[-+]?[0-9]+)?)$/i,unitValue:RegExp(`(${Object.keys(jt).join("|")})$`),singleArgument:/\/?\s*(none|NaN|calc\(NaN\)|[-+\w.]+(?:%|deg|g?rad|turn)?)/g};function Ft(t,e){if(Array.isArray(t))return t.map((t=>Ft(t,e)));if(!t)throw new TypeError("Empty color reference");xt(t)&&(t=It(t,e));let i=t.space||t.spaceId;return"string"==typeof i&&(t.space=Xt.get(i)),void 0===t.alpha&&(t.alpha=1),t}class Xt{constructor(t){this.id=t.id,this.name=t.name,this.base=t.base?Xt.get(t.base):null,this.aliases=t.aliases,this.base&&(this.fromBase=t.fromBase,this.toBase=t.toBase);let e=t.coords??this.base.coords;for(let t in e)"name"in e[t]||(e[t].name=t);this.coords=e;let i=t.white??this.base.white??"D65";this.white=Ot(i),this.formats=t.formats??{};for(let t in this.formats){let e=this.formats[t];e.type||="function",e.name||=t}this.formats.color?.id||(this.formats.color={...this.formats.color??{},id:t.cssId||this.id}),t.gamutSpace?this.gamutSpace="self"===t.gamutSpace?this:Xt.get(t.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(t,e)=>!0),this.referred=t.referred,Object.defineProperty(this,"path",{value:_t(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),Dt.run("colorspace-init-end",this)}inGamut(t,{epsilon:e=75e-6}={}){if(!this.equals(this.gamutSpace))return t=this.to(this.gamutSpace,t),this.gamutSpace.inGamut(t,{epsilon:e});let i=Object.values(this.coords);return t.every(((t,s)=>{let n=i[s];if("angle"!==n.type&&n.range){if(yt(t))return!0;let[i,s]=n.range;return(void 0===i||t>=i-e)&&(void 0===s||t<=s+e)}return!0}))}get isUnbounded(){return Object.values(this.coords).every((t=>!("range"in t)))}get cssId(){return this.formats?.color?.id||this.id}get isPolar(){for(let t in this.coords)if("angle"===this.coords[t].type)return!0;return!1}getFormat(t){if(!t)return null;"default"===t?t=Object.values(this.formats)[0]:"string"==typeof t&&(t=this.formats[t]);let e=Rt.get(t,this);return e!==t&&t.name in this.formats&&(this.formats[t.name]=e),e}equals(t){return!!t&&(this===t||this.id===t||this.id===t.id)}to(t,e){if(1===arguments.length){const i=Ft(t);[t,e]=[i.space,i.coords]}if(t=Xt.get(t),this.equals(t))return e;e=e.map((t=>yt(t)?0:t));let i,s,n=this.path,a=t.path;for(let t=0;t<n.length&&n[t].equals(a[t]);t++)i=n[t],s=t;if(!i)throw new Error(`Cannot convert between color spaces ${this} and ${t}: no connection space was found`);for(let t=n.length-1;t>s;t--)e=n[t].toBase(e);for(let t=s+1;t<a.length;t++)e=a[t].fromBase(e);return e}from(t,e){if(1===arguments.length){const i=Ft(t);[t,e]=[i.space,i.coords]}return(t=Xt.get(t)).to(this,e)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let t=[];for(let e in this.coords){let i=this.coords[e],s=i.range||i.refRange;t.push(s?.min??0)}return t}static registry={};static get all(){return[...new Set(Object.values(Xt.registry))]}static register(t,e){if(1===arguments.length&&(t=(e=arguments[0]).id),e=this.get(e),this.registry[t]&&this.registry[t]!==e)throw new Error(`Duplicate color space registration: '${t}'`);if(this.registry[t]=e,1===arguments.length&&e.aliases)for(let t of e.aliases)this.register(t,e);return e}static get(t,...e){if(!t||At(t,this))return t;if("string"===wt(t)){let e=Xt.registry[t.toLowerCase()];if(!e)throw new TypeError(`No color space found with id = "${t}"`);return e}if(e.length)return Xt.get(...e);throw new TypeError(`${t} is not a valid color space`)}static findFormat(t,e=Xt.all){if(!t)return null;"string"==typeof t&&(t={name:t});for(let i of e)for(let[e,s]of Object.entries(i.formats)){s.name??=e,s.type??="function";let n=!(t.name&&s.name!==t.name||t.type&&s.type!==t.type);if(t.id){let e=s.ids||[s.id],i=Array.isArray(t.id)?t.id:[t.id];n&&=i.some((t=>e.includes(t)))}if(n){let t=Rt.get(s,i);return t!==s&&(i.formats[s.name]=t),t}}return null}static resolveCoord(t,e){let i,s,n=wt(t);if("string"===n?t.includes(".")?[i,s]=t.split("."):[i,s]=[,t]:Array.isArray(t)?[i,s]=t:(i=t.space,s=t.coordId),i=Xt.get(i),i||(i=e),!i)throw new TypeError(`Cannot resolve coordinate reference ${t}: No color space specified and relative references are not allowed here`);if(n=wt(s),"number"===n||"string"===n&&s>=0){let t=Object.entries(i.coords)[s];if(t)return{space:i,id:t[0],index:s,...t[1]}}i=Xt.get(i);let a=s.toLowerCase(),r=0;for(let t in i.coords){let e=i.coords[t];if(t.toLowerCase()===a||e.name?.toLowerCase()===a)return{space:i,id:t,index:r,...e};r++}throw new TypeError(`No "${s}" coordinate found in ${i.name}. Its coordinates are: ${Object.keys(i.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}}function _t(t){let e=[t];for(let i=t;i=i.base;)e.push(i);return e}var Zt=new Xt({id:"xyz-d65",name:"XYZ D65",coords:{x:{refRange:[0,1],name:"X"},y:{refRange:[0,1],name:"Y"},z:{refRange:[0,1],name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]}),Ut=new Xt({id:"xyz-d50",name:"XYZ D50",white:"D50",base:Zt,fromBase:t=>Nt(Zt.white,"D50",t),toBase:t=>Nt("D50",Zt.white,t)});const Yt=216/24389,Vt=24/116,Wt=24389/27;let qt=Bt.D50;var Kt=new Xt({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:qt,base:Ut,fromBase(t){let e=t.map(((t,e)=>t/qt[e])).map((t=>t>Yt?Math.cbrt(t):(Wt*t+16)/116));return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(t){let[e,i,s]=t,n=[];return n[1]=(e+16)/116,n[0]=i/500+n[1],n[2]=n[1]-s/200,[n[0]>Vt?Math.pow(n[0],3):(116*n[0]-16)/Wt,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/Wt,n[2]>Vt?Math.pow(n[2],3):(116*n[2]-16)/Wt].map(((t,e)=>t*qt[e]))},formats:{lab:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <percentage>"]}}});function Jt(t){return"number"!=typeof t?t:(t%360+360)%360}var Qt=new Xt({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Kt,fromBase(t){if(void 0===this.ε){let t=Object.values(this.base.coords)[1].refRange,e=t[1]-t[0];this.ε=e/1e5}let[e,i,s]=t,n=Math.abs(i)<this.ε&&Math.abs(s)<this.ε,a=n?null:Jt(180*Math.atan2(s,i)/Math.PI);return[e,n?0:Math.sqrt(i**2+s**2),a]},toBase(t){let[e,i,s]=t,n=null,a=null;return yt(s)||(i=i<0?0:i,n=i*Math.cos(s*Math.PI/180),a=i*Math.sin(s*Math.PI/180)),[e,n,a]},formats:{lch:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <angle>"]}}});const te=25**7,ee=Math.PI,ie=180/ee,se=ee/180;function ne(t){const e=t*t;return e*e*e*t}function ae(t,e,{kL:i=1,kC:s=1,kH:n=1}={}){[t,e]=Ft([t,e]);let[a,r,o]=Kt.from(t),l=Qt.from(Kt,[a,r,o])[1],[h,d,c]=Kt.from(e),u=Qt.from(Kt,[h,d,c])[1];l<0&&(l=0),u<0&&(u=0);let p=ne((l+u)/2),m=.5*(1-Math.sqrt(p/(p+te))),b=(1+m)*r,g=(1+m)*d,f=Math.sqrt(b**2+o**2),x=Math.sqrt(g**2+c**2),w=0===b&&0===o?0:Math.atan2(o,b),v=0===g&&0===c?0:Math.atan2(c,g);w<0&&(w+=2*ee),v<0&&(v+=2*ee),w*=ie,v*=ie;let y,k=h-a,C=x-f,z=v-w,E=w+v,$=Math.abs(z);f*x==0?y=0:$<=180?y=z:z>180?y=z-360:z<-180?y=z+360:Ht.warn("the unthinkable has happened");let S,M=2*Math.sqrt(x*f)*Math.sin(y*se/2),L=(a+h)/2,A=(f+x)/2,P=ne(A);S=f*x==0?E:$<=180?E/2:E<360?(E+360)/2:(E-360)/2;let T=(L-50)**2,R=1+.015*T/Math.sqrt(20+T),D=1+.045*A,B=1;B-=.17*Math.cos((S-30)*se),B+=.24*Math.cos(2*S*se),B+=.32*Math.cos((3*S+6)*se),B-=.2*Math.cos((4*S-63)*se);let O=1+.015*A*B,N=30*Math.exp(-1*((S-275)/25)**2),H=2*Math.sqrt(P/(P+te)),I=(k/(i*R))**2;return I+=(C/(s*D))**2,I+=(M/(n*O))**2,I+=-1*Math.sin(2*N*se)*H*(C/(s*D))*(M/(n*O)),Math.sqrt(I)}const re=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],oe=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],le=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],he=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]];var de=new Xt({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:Zt,fromBase(t){let e=ft(t,re);return e[0]=Math.cbrt(e[0]),e[1]=Math.cbrt(e[1]),e[2]=Math.cbrt(e[2]),ft(e,le,e)},toBase(t){let e=ft(t,he);return e[0]=e[0]**3,e[1]=e[1]**3,e[2]=e[2]**3,ft(e,oe,e)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <percentage>"]}}});function ce(t,e){[t,e]=Ft([t,e]);let[i,s,n]=de.from(t),[a,r,o]=de.from(e),l=i-a,h=s-r,d=n-o;return Math.sqrt(l**2+h**2+d**2)}function ue(t,e,{epsilon:i=75e-6}={}){t=Ft(t),e||(e=t.space),e=Xt.get(e);let s=t.coords;return e!==t.space&&(s=e.from(t)),e.inGamut(s,{epsilon:i})}function pe(t,e){t=Ft(t);let i,s=Xt.get(e,e?.space),n=e?.precision;return i=!s||t.space.equals(s)?t.coords.slice():s.from(t),void 0===n?i:i.map((t=>Ct(t,n)))}function me(t,e){if(t=Ft(t),"alpha"===e)return t.alpha??1;let{space:i,index:s}=Xt.resolveCoord(e,t.space);return pe(t,i)[s]}function be(t,e,i,s){return t=Ft(t),Array.isArray(e)&&([e,i,s]=[t.space,e,i]),e=Xt.get(e),t.coords=e===t.space?i.slice():e.to(t.space,i),void 0!==s&&(t.alpha=s),t}function ge(t,e,i){if(t=Ft(t),2===arguments.length&&"object"===wt(arguments[1])){let e=arguments[1];for(let i in e)ge(t,i,e[i])}else if("function"==typeof i&&(i=i(me(t,e))),"alpha"===e)t.alpha=i;else{let{space:s,index:n}=Xt.resolveCoord(e,t.space),a=pe(t,s);a[n]=i,be(t,s,a)}return t}function fe(t){return{space:t.space,coords:t.coords.slice(),alpha:t.alpha}}be.returns="color",ge.returns="color";const xe=Math.PI/180;var we=new Xt({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:Zt,fromBase:t=>t.map((t=>Math.max(203*t,0))),toBase:t=>t.map((t=>Math.max(t/203,0)))});const ve=1.15,ye=.66,ke=2610/16384,Ce=16384/2610,ze=.8359375,Ee=2413/128,$e=18.6875,Se=1.7*2523/32,Me=32/(1.7*2523),Le=-.56,Ae=16295499532821565e-27,Pe=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],Te=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],Re=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],De=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var Be=new Xt({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:we,fromBase(t){let[e,i,s]=t,n=ft([ve*e-(ve-1)*s,ye*i-(ye-1)*e,s],Pe).map((function(t){return((ze+Ee*(t/1e4)**ke)/(1+$e*(t/1e4)**ke))**Se})),[a,r,o]=ft(n,Re);return[(1+Le)*a/(1+Le*a)-Ae,r,o]},toBase(t){let[e,i,s]=t,n=ft([(e+Ae)/(1+Le-Le*(e+Ae)),i,s],De).map((function(t){return 1e4*((ze-t**Me)/($e*t**Me-Ee))**Ce})),[a,r,o]=ft(n,Te),l=(a+(ve-1)*o)/ve;return[l,(r+(ye-1)*l)/ye,o]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <percentage>"]}}}),Oe=new Xt({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:Be,fromBase:Qt.fromBase,toBase:Qt.toBase});const Ne=.8359375,He=2413/128,Ie=18.6875,je=2610/16384,Ge=2523/32,Fe=16384/2610,Xe=32/2523,_e=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],Ze=[[.5,.5,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],Ue=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],Ye=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]];var Ve=new Xt({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:we,fromBase:t=>function(t){let e=t.map((function(t){return((Ne+He*(t/1e4)**je)/(1+Ie*(t/1e4)**je))**Ge}));return ft(e,Ze)}(ft(t,_e)),toBase(t){let e=function(t){let e=ft(t,Ue),i=e.map((function(t){return 1e4*(Math.max(t**Xe-Ne,0)/(He-Ie*t**Xe))**Fe}));return i}(t);return ft(e,Ye)}});const We=Bt.D65,qe=1/.42,Ke=2*Math.PI,Je=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],Qe=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],ti=[[460,451,288],[460,-891,-261],[460,-220,-6300]],ei={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},ii={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},si=180/Math.PI,ni=Math.PI/180;function ai(t,e){return t.map((t=>{const i=Mt(e*Math.abs(t)*.01,.42);return 400*St(i,t)/(i+27.13)}))}function ri(t,e,i,s,n){const a={};a.discounting=n,a.refWhite=t,a.surround=s;const r=t.map((t=>100*t));a.la=e,a.yb=i;const o=r[1],l=ft(r,Je),h=(s=ei[a.surround])[0];a.c=s[1],a.nc=s[2];const d=(1/(5*a.la+1))**4;a.fl=d*a.la+.1*(1-d)*(1-d)*Math.cbrt(5*a.la),a.flRoot=a.fl**.25,a.n=a.yb/o,a.z=1.48+Math.sqrt(a.n),a.nbb=.725*a.n**-.2,a.ncb=a.nbb;const c=Math.max(Math.min(h*(1-1/3.6*Math.exp((-a.la-42)/92)),1),0);a.dRgb=l.map((t=>zt(1,o/t,c))),a.dRgbInv=a.dRgb.map((t=>1/t));const u=ai(l.map(((t,e)=>t*a.dRgb[e])),a.fl);return a.aW=a.nbb*(2*u[0]+u[1]+.05*u[2]),a}const oi=ri(We,64/Math.PI*.2,20,"average",!1);function li(t,e){if(!(void 0!==t.J^void 0!==t.Q))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(void 0!==t.C^void 0!==t.M^void 0!==t.s))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(void 0!==t.h^void 0!==t.H))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(0===t.J||0===t.Q)return[0,0,0];let i=0;i=void 0!==t.h?Jt(t.h)*ni:function(t){let e=(t%400+400)%400;const i=Math.floor(.01*e);e%=100;const[s,n]=ii.h.slice(i,i+2),[a,r]=ii.e.slice(i,i+2);return Jt((e*(r*s-a*n)-100*s*r)/(e*(r-a)-100*r))}(t.H)*ni;const s=Math.cos(i),n=Math.sin(i);let a=0;void 0!==t.J?a=.1*Mt(t.J,.5):void 0!==t.Q&&(a=.25*e.c*t.Q/((e.aW+4)*e.flRoot));let r=0;void 0!==t.C?r=t.C/a:void 0!==t.M?r=t.M/e.flRoot/a:void 0!==t.s&&(r=4e-4*t.s**2*(e.aW+4)/e.c);const o=Mt(r*Math.pow(1.64-Math.pow(.29,e.n),-.73),10/9),l=.25*(Math.cos(i+2)+3.8),h=e.aW*Mt(a,2/e.c/e.z),d=5e4/13*e.nc*e.ncb*l,c=h/e.nbb,u=23*(c+.305)*Lt(o,23*d+o*(11*s+108*n)),p=function(t,e){const i=100/e*2588.068098016295;return t.map((t=>{const e=Math.abs(t);return St(i*Mt(e/(400-e),qe),t)}))}(ft([c,u*s,u*n],ti).map((t=>1*t/1403)),e.fl);return ft(p.map(((t,i)=>t*e.dRgbInv[i])),Qe).map((t=>t/100))}function hi(t,e){const i=ai(ft(t.map((t=>100*t)),Je).map(((t,i)=>t*e.dRgb[i])),e.fl),s=i[0]+(-12*i[1]+i[2])/11,n=(i[0]+i[1]-2*i[2])/9,a=(Math.atan2(n,s)%Ke+Ke)%Ke,r=.25*(Math.cos(a+2)+3.8),o=Mt(5e4/13*e.nc*e.ncb*Lt(r*Math.sqrt(s**2+n**2),i[0]+i[1]+1.05*i[2]+.305),.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),l=Mt(e.nbb*(2*i[0]+i[1]+.05*i[2])/e.aW,.5*e.c*e.z),h=100*Mt(l,2),d=4/e.c*l*(e.aW+4)*e.flRoot,c=o*l,u=c*e.flRoot,p=Jt(a*si),m=function(t){let e=Jt(t);e<=ii.h[0]&&(e+=360);const i=function(t,e,i=0,s=t.length){for(;i<s;){const n=i+s>>1;t[n]<e?i=n+1:s=n}return i}(ii.h,e)-1,[s,n]=ii.h.slice(i,i+2),[a,r]=ii.e.slice(i,i+2),o=(e-s)/a;return ii.H[i]+100*o/(o+(n-e)/r)}(p);return{J:h,C:c,h:p,s:50*Mt(e.c*o/(e.aW+4),.5),Q:d,M:u,H:m}}new Xt({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Zt,fromBase(t){const e=hi(t,oi);return[e.J,e.M,e.h]},toBase:t=>li({J:t[0],M:t[1],h:t[2]},oi)});const di=216/24389,ci=24389/27;function ui(t){return t>8?Math.pow((t+16)/116,3):t/ci}function pi(t,e){const i=116*((s=t[1])>di?Math.cbrt(s):(ci*s+16)/116)-16;var s;if(0===i)return[0,0,0];const n=hi(t,mi);return[Jt(n.h),n.C,i]}const mi=ri(Bt.D65,200/Math.PI*ui(50),100*ui(50),"average",!1);var bi=new Xt({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:Zt,fromBase:t=>pi(t),toBase:t=>function(t,e){let[i,s,n]=t,a=[],r=0;if(0===n)return[0,0,0];let o=ui(n);r=n>0?.00379058511492914*n**2+.608983189401032*n+.9155088574762233:9514440756550361e-21*n**2+.08693057439788597*n-21.928975842194614;let l=0,h=Infinity;for(;l<=15;){a=li({J:r,C:s,h:i},e);const t=Math.abs(a[1]-o);if(t<h){if(t<=2e-12)return a;h=t}r-=(a[1]-o)*r/(2*a[1]),l+=1}return li({J:r,C:s,h:i},e)}(t,mi),formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const gi=Math.PI/180,fi=[1,.007,.0228];function xi(t){t[1]<0&&(t=bi.fromBase(bi.toBase(t)));const e=Math.log(Math.max(1+fi[2]*t[1]*mi.flRoot,1))/fi[2],i=t[0]*gi,s=e*Math.cos(i),n=e*Math.sin(i);return[t[2],s,n]}var wi={deltaE76:function(t,e){return function(t,e,i="lab"){let s=(i=Xt.get(i)).from(t),n=i.from(e);return Math.sqrt(s.reduce(((t,e,i)=>{let s=n[i];return yt(e)||yt(s)?t:t+(s-e)**2}),0))}(t,e,"lab")},deltaECMC:function(t,e,{l:i=2,c:s=1}={}){[t,e]=Ft([t,e]);let[n,a,r]=Kt.from(t),[,o,l]=Qt.from(Kt,[n,a,r]),[h,d,c]=Kt.from(e),u=Qt.from(Kt,[h,d,c])[1];o<0&&(o=0),u<0&&(u=0);let p=n-h,m=o-u,b=(a-d)**2+(r-c)**2-m**2,g=.511;n>=16&&(g=.040975*n/(1+.01765*n));let f,x=.0638*o/(1+.0131*o)+.638;yt(l)&&(l=0),f=l>=164&&l<=345?.56+Math.abs(.2*Math.cos((l+168)*xe)):.36+Math.abs(.4*Math.cos((l+35)*xe));let w=Math.pow(o,4),v=Math.sqrt(w/(w+1900)),y=(p/(i*g))**2;return y+=(m/(s*x))**2,y+=b/(x*(v*f+1-v))**2,Math.sqrt(y)},deltaE2000:ae,deltaEJz:function(t,e){[t,e]=Ft([t,e]);let[i,s,n]=Oe.from(t),[a,r,o]=Oe.from(e),l=i-a,h=s-r;yt(n)&&yt(o)?(n=0,o=0):yt(n)?n=o:yt(o)&&(o=n);let d=n-o,c=2*Math.sqrt(s*r)*Math.sin(d/2*(Math.PI/180));return Math.sqrt(l**2+h**2+c**2)},deltaEITP:function(t,e){[t,e]=Ft([t,e]);let[i,s,n]=Ve.from(t),[a,r,o]=Ve.from(e);return 720*Math.sqrt((i-a)**2+.25*(s-r)**2+(n-o)**2)},deltaEOK:ce,deltaEOK2:function(t,e){[t,e]=Ft([t,e]);let[i,s,n]=de.from(t),[a,r,o]=de.from(e),l=i-a,h=2*(s-r),d=2*(n-o);return Math.sqrt(l**2+h**2+d**2)},deltaEHCT:function(t,e){[t,e]=Ft([t,e]);let[i,s,n]=xi(bi.from(t)),[a,r,o]=xi(bi.from(e));return Math.sqrt((i-a)**2+(s-r)**2+(n-o)**2)}};const vi={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function yi(t,{method:e=Ht.gamut_mapping,space:i,deltaEMethod:s="",jnd:n=2,blackWhiteClamp:a={}}={}){if(t=Ft(t),xt(arguments[1])?i=arguments[1]:i||(i=t.space),ue(t,i=Xt.get(i),{epsilon:0}))return t;let r;if("css"===e)r=function(t,{space:e}={}){const i=.02,s=1e-4;t=Ft(t),e||(e=t.space);e=Xt.get(e);const n=Xt.get("oklch");if(e.isUnbounded)return Ci(t,e);const a=Ci(t,n);let r=a.coords[0];if(r>=1){const i=Ci(ki.WHITE,e);return i.alpha=t.alpha,Ci(i,e)}if(r<=0){const i=Ci(ki.BLACK,e);return i.alpha=t.alpha,Ci(i,e)}if(ue(a,e,{epsilon:0}))return Ci(a,e);function o(t){const i=Ci(t,e),s=Object.values(e.coords);return i.coords=i.coords.map(((t,e)=>{if("range"in s[e]){const[i,n]=s[e].range;return $t(i,t,n)}return t})),i}let l=0,h=a.coords[1],d=!0,c=fe(a),u=o(c),p=ce(u,c);if(p<i)return u;for(;h-l>s;){const t=(l+h)/2;if(c.coords[1]=t,d&&ue(c,e,{epsilon:0}))l=t;else if(u=o(c),p=ce(u,c),p<i){if(i-p<s)break;d=!1,l=t}else h=t}return u}(t,{space:i});else{if("clip"===e||ue(t,i))r=Ci(t,i);else{Object.prototype.hasOwnProperty.call(vi,e)&&({method:e,jnd:n,deltaEMethod:s,blackWhiteClamp:a}=vi[e]);let o=ae;if(""!==s)for(let t in wi)if("deltae"+s.toLowerCase()===t.toLowerCase()){o=wi[t];break}let l=yi(Ci(t,i),{method:"clip",space:i});if(o(t,l)>n){if(3===Object.keys(a).length){let e=Xt.resolveCoord(a.channel),i=me(Ci(t,e.space),e.id);if(yt(i)&&(i=0),i>=a.max)return Ci({space:"xyz-d65",coords:Bt.D65},t.space);if(i<=a.min)return Ci({space:"xyz-d65",coords:[0,0,0]},t.space)}let s=Xt.resolveCoord(e),l=s.space,h=s.id,d=Ci(t,l);d.coords.forEach(((t,e)=>{yt(t)&&(d.coords[e]=0)}));let c=(s.range||s.refRange)[0],u=function(t){const e=t?Math.floor(Math.log10(Math.abs(t))):0;return Math.max(parseFloat("1e"+(e-2)),1e-6)}(n),p=c,m=me(d,h);for(;m-p>u;){let t=fe(d);t=yi(t,{space:i,method:"clip"}),o(d,t)-n<u?p=me(d,h):m=me(d,h),ge(d,h,(p+m)/2)}r=Ci(d,i)}else r=l}if("clip"===e||!ue(r,i,{epsilon:0})){let t=Object.values(i.coords).map((t=>t.range||[]));r.coords=r.coords.map(((e,i)=>{let[s,n]=t[i];return void 0!==s&&(e=Math.max(s,e)),void 0!==n&&(e=Math.min(e,n)),e}))}}return i!==t.space&&(r=Ci(r,t.space)),t.coords=r.coords,t}yi.returns="color";const ki={WHITE:{space:de,coords:[1,0,0],alpha:1},BLACK:{space:de,coords:[0,0,0],alpha:1}};function Ci(t,e,{inGamut:i}={}){t=Ft(t);let s=(e=Xt.get(e)).from(t),n={space:e,coords:s,alpha:t.alpha};return i&&(n=yi(n,!0===i?void 0:i)),n}function zi(t,e={}){let i,{precision:s=Ht.precision,format:n,inGamut:a=!0,coords:r,alpha:o,commas:l}=e,h=n;(t=Ft(t)).parseMeta&&!n&&(t.parseMeta.format.canSerialize()&&(n=t.parseMeta.format,h=t.parseMeta.formatId),r??=t.parseMeta.types,o??=t.parseMeta.alphaType,l??=t.parseMeta.commas),h&&(n=t.space.getFormat(n)??Xt.findFormat(h)),n||(n=t.space.getFormat("default")??Xt.DEFAULT_FORMAT,h=n.name),n&&n.space&&n.space!==t.space&&(t=Ci(t,n.space));let d=t.coords.slice();if(a||=n.toGamut,a&&!ue(t)&&(d=yi(fe(t),!0===a?void 0:a).coords),"custom"===n.type){if(!n.serialize)throw new TypeError(`format ${h} can only be used to parse colors, not for serialization`);i=n.serialize(d,t.alpha,e)}else{let e=n.name||"color",a=n.serializeCoords(d,s,r);if("color"===e){let e=n.id||n.ids?.[0]||t.space.cssId||t.space.id;a.unshift(e)}let h=t.alpha;void 0!==o&&"object"!=typeof o&&(o="string"==typeof o?{type:o}:{include:o});let c=o?.type??"<number>",u=!0===o?.include||!0===n.alpha||!1!==o?.include&&!1!==n.alpha&&h<1,p="";if(l??=n.commas,u){if(null!==s){let t;"<percentage>"===c&&(t="%",h*=100),h=vt(h,{precision:s,unit:t})}p=`${l?",":" /"} ${h}`}i=`${e}(${a.join(l?", ":" ")}${p})`}return i}Ci.returns="color";let Ei=(t,e=0)=>{let i=Math.pow(10,e);return Math.round(t*i)/i},$i=(t,e=0)=>new DOMRect(Ei(t.x,e),Ei(t.y,e),Ei(t.width,e),Ei(t.height,e)),Si=(t,e,i=Number.POSITIVE_INFINITY,s=null)=>(null!==s&&(t=Ei(t,s)),t<e?t=e:t>i&&(t=i),t),Mi=(t,e)=>{let i=`${Math.floor(t)}`.length;if(e>i)return Number.parseFloat(t.toFixed(e-i));{let s=10**(i-e);return Math.round(t/s)*s}},Li=t=>{if(Number.isFinite(t)){let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i+=1;return i}return 0},Ai=(t,e)=>{let i=e.x-t.x;i*=i;let s=e.y-t.y;return s*=s,Math.sqrt(i+s)},Pi=(t,e)=>e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height,Ti=(t,e,i)=>{let[s,n]=[t.x,t.y],[a,r]=[e.x,e.y],o=Math.PI/180*i,l=Math.cos(o),h=Math.sin(o);return new DOMPoint(l*(s-a)-h*(n-r)+a,l*(n-r)+h*(s-a)+r)};class Ri extends Xt{constructor(t){t.coords||(t.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),t.base||(t.base=Zt),t.toXYZ_M&&t.fromXYZ_M&&(t.toBase??=e=>{let i=ft(e,t.toXYZ_M);return this.white!==this.base.white&&(i=Nt(this.white,this.base.white,i)),i},t.fromBase??=e=>ft(e=Nt(this.base.white,this.white,e),t.fromXYZ_M)),t.referred??="display",super(t)}}var Di=new Ri({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe® 98 RGB compatible",white:"D65",toXYZ_M:[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],fromXYZ_M:[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]]}),Bi=new Ri({id:"a98rgb",cssId:"a98-rgb",name:"Adobe® 98 RGB compatible",base:Di,toBase:t=>t.map((t=>Math.pow(Math.abs(t),563/256)*Math.sign(t))),fromBase:t=>t.map((t=>Math.pow(Math.abs(t),256/563)*Math.sign(t)))});const Oi=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var Ni=new Ri({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M:Oi}),Hi={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let Ii=Array(3).fill("<percentage> | <number>[0, 255]"),ji=Array(3).fill("<number>[0, 255]");var Gi=new Ri({id:"srgb",name:"sRGB",base:Ni,fromBase:t=>t.map((t=>{let e=t<0?-1:1,i=t*e;return i>.0031308?e*(1.055*i**(1/2.4)-.055):12.92*t})),toBase:t=>t.map((t=>{let e=t<0?-1:1,i=t*e;return i<=.04045?t/12.92:e*((i+.055)/1.055)**2.4})),formats:{rgb:{coords:Ii},rgb_number:{name:"rgb",commas:!0,coords:ji,alpha:!1},color:{},rgba:{coords:Ii,commas:!0,alpha:!0},rgba_number:{name:"rgba",commas:!0,coords:ji},hex:{type:"custom",toGamut:!0,test:t=>/^#(([a-f0-9]{2}){3,4}|[a-f0-9]{3,4})$/i.test(t),parse(t){t.length<=5&&(t=t.replace(/[a-f0-9]/gi,"$&$&"));let e=[];return t.replace(/[a-f0-9]{2}/gi,(t=>{e.push(parseInt(t,16)/255)})),{spaceId:"srgb",coords:e.slice(0,3),alpha:e.slice(3)[0]}},serialize:(t,e,{collapse:i=!0,alpha:s}={})=>{(!1!==s&&e<1||!0===s)&&t.push(e),t=t.map((t=>Math.round(255*t)));let n=i&&t.every((t=>t%17==0));return"#"+t.map((t=>n?(t/17).toString(16):t.toString(16).padStart(2,"0"))).join("")}},keyword:{type:"custom",test:t=>/^[a-z]+$/i.test(t),parse(t){let e={spaceId:"srgb",coords:null,alpha:1};if("transparent"===(t=t.toLowerCase())?(e.coords=Hi.black,e.alpha=0):e.coords=Hi[t],e.coords)return e}}}}),Fi=new Xt({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Gi,fromBase:t=>{let e=Math.max(...t),i=Math.min(...t),[s,n,a]=t,[r,o,l]=[null,0,(i+e)/2],h=e-i;if(0!==h){switch(o=0===l||1===l?0:(e-l)/Math.min(l,1-l),e){case s:r=(n-a)/h+(n<a?6:0);break;case n:r=(a-s)/h+2;break;case a:r=(s-n)/h+4}r*=60}return o<0&&(r+=180,o=Math.abs(o)),r>=360&&(r-=360),[r,100*o,100*l]},toBase:t=>{let[e,i,s]=t;function n(t){let n=(t+e/30)%12,a=i*Math.min(s,1-s);return s-a*Math.max(-1,Math.min(n-3,9-n,1))}return e%=360,e<0&&(e+=360),i/=100,s/=100,[n(0),n(8),n(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,alpha:!0}}});function Xi(t){let[e,i,s]=pe(t,Zt),n=e+15*i+3*s;return[4*e/n,9*i/n]}let _i=Bt.D65;const Zi=216/24389,Ui=24389/27,[Yi,Vi]=Xi({space:Zt,coords:_i});var Wi=new Xt({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:_i,base:Zt,fromBase(t){let e=[kt(t[0]),kt(t[1]),kt(t[2])],i=e[1],[s,n]=Xi({space:Zt,coords:e});if(!Number.isFinite(s)||!Number.isFinite(n))return[0,0,0];let a=i<=Zi?Ui*i:116*Math.cbrt(i)-16;return[a,13*a*(s-Yi),13*a*(n-Vi)]},toBase(t){let[e,i,s]=t;if(0===e||yt(e))return[0,0,0];i=kt(i),s=kt(s);let n=i/(13*e)+Yi,a=s/(13*e)+Vi,r=e<=8?e/Ui:Math.pow((e+16)/116,3);return[r*(9*n/(4*a)),r,r*((12-3*n-20*a)/(4*a))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <percentage>"]}}}),qi=new Xt({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Wi,fromBase:Qt.fromBase,toBase:Qt.toBase,formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const Ki=216/24389,Ji=24389/27,Qi=Oi[0][0],ts=Oi[0][1],es=Oi[0][2],is=Oi[1][0],ss=Oi[1][1],ns=Oi[1][2],as=Oi[2][0],rs=Oi[2][1],os=Oi[2][2];function ls(t,e,i){const s=e/(Math.sin(i)-t*Math.cos(i));return s<0?Infinity:s}function hs(t){const e=Math.pow(t+16,3)/1560896,i=e>Ki?e:t/Ji,s=i*(284517*Qi-94839*es),n=i*(838422*es+769860*ts+731718*Qi),a=i*(632260*es-126452*ts),r=i*(284517*is-94839*ns),o=i*(838422*ns+769860*ss+731718*is),l=i*(632260*ns-126452*ss),h=i*(284517*as-94839*os),d=i*(838422*os+769860*rs+731718*as),c=i*(632260*os-126452*rs);return{r0s:s/a,r0i:n*t/a,r1s:s/(a+126452),r1i:(n-769860)*t/(a+126452),g0s:r/l,g0i:o*t/l,g1s:r/(l+126452),g1i:(o-769860)*t/(l+126452),b0s:h/c,b0i:d*t/c,b1s:h/(c+126452),b1i:(d-769860)*t/(c+126452)}}function ds(t,e){const i=e/360*Math.PI*2,s=ls(t.r0s,t.r0i,i),n=ls(t.r1s,t.r1i,i),a=ls(t.g0s,t.g0i,i),r=ls(t.g1s,t.g1i,i),o=ls(t.b0s,t.b0i,i),l=ls(t.b1s,t.b1i,i);return Math.min(s,n,a,r,o,l)}var cs=new Xt({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:qi,gamutSpace:Gi,fromBase(t){let e,[i,s,n]=[kt(t[0]),kt(t[1]),kt(t[2])];if(i>99.9999999)e=0,i=100;else if(i<1e-8)e=0,i=0;else{e=s/ds(hs(i),n)*100}return[n,e,i]},toBase(t){let e,[i,s,n]=[kt(t[0]),kt(t[1]),kt(t[2])];if(n>99.9999999)n=100,e=0;else if(n<1e-8)n=0,e=0;else{e=ds(hs(n),i)/100*s}return[n,e,i]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),us=new Xt({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:Gi,fromBase(t){let e=Math.max(...t),i=Math.min(...t),[s,n,a]=t,[r,o,l]=[null,0,e],h=e-i;if(0!==h){switch(e){case s:r=(n-a)/h+(n<a?6:0);break;case n:r=(a-s)/h+2;break;case a:r=(s-n)/h+4}r*=60}return l&&(o=h/l),r>=360&&(r-=360),[r,100*o,100*l]},toBase(t){let[e,i,s]=t;function n(t){let n=(t+e/60)%6;return s-s*i*Math.max(0,Math.min(n,4-n,1))}return e%=360,e<0&&(e+=360),i/=100,s/=100,[n(5),n(3),n(1)]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),ps=new Xt({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:us,fromBase(t){let[e,i,s]=t;return[e,s*(100-i)/100,100-s]},toBase(t){let[e,i,s]=t;i/=100,s/=100;let n=i+s;if(n>=1){return[e,0,100*(i/n)]}let a=1-s;return[e,100*(0===a?0:1-i/a),100*a]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const ms=2*Math.PI,bs=[[4.076741636075958,-3.307711539258063,.2309699031821043],[-1.2684379732850315,2.609757349287688,-.341319376002657],[-.0041960761386756,-.7034186179359362,1.7076146940746117]],gs=[[[-1.8817031,-.80936501],[1.19086277,1.76576728,.59662641,.75515197,.56771245]],[[1.8144408,-1.19445267],[.73956515,-.45954404,.08285427,.12541073,-.14503204]],[[.13110758,1.81333971],[1.35733652,-.00915799,-1.1513021,-.50559606,.00692167]]],fs=Number.MAX_VALUE,xs=.206,ws=.03,vs=(1+xs)/1.03;function ys(t,e){let i=t.length;if(i!==e.length)throw new Error(`Vectors of size ${i} and ${e.length} are not aligned`);let s=0;return t.forEach(((t,i)=>{s+=t*e[i]})),s}function ks(t){return.5*(vs*t-xs+Math.sqrt((vs*t-xs)*(vs*t-xs)+.12*vs*t))}function Cs(t){return(t**2+xs*t)/(vs*(t+ws))}function zs(t){let[e,i]=t;return[i/e,i/(1-e)]}function Es(t,e){let i=ft(t,he);return i[0]=i[0]**3,i[1]=i[1]**3,i[2]=i[2]**3,ft(i,e,i)}function $s(t,e,i,s){let n=function(t,e,i,s){let n,a,r,o,l,h,d,c;ys(s[0][0],[t,e])>1?([n,a,r,o,l]=s[0][1],[h,d,c]=i[0]):ys(s[1][0],[t,e])>1?([n,a,r,o,l]=s[1][1],[h,d,c]=i[1]):([n,a,r,o,l]=s[2][1],[h,d,c]=i[2]);let u=n+a*t+r*e+o*t**2+l*t*e,p=ys(he[0].slice(1),[t,e]),m=ys(he[1].slice(1),[t,e]),b=ys(he[2].slice(1),[t,e]),g=1+u*p,f=1+u*m,x=1+u*b,w=h*g**3+d*f**3+c*x**3,v=h*(3*p*g**2)+d*(3*m*f**2)+c*(3*b*x**2);return u-=w*v/(v**2-.5*w*(h*(6*p**2*g)+d*(6*m**2*f)+c*(6*b**2*x))),u}(t,e,i,s),a=Es([1,n*t,n*e],i),r=Mt(1/Math.max(...a),1/3);return[r,r*n]}function Ss(t,e,i){let[s,n,a]=t,r=$s(n,a,e,i),o=function(t,e,i,s,n,a,r,o){let l;if(void 0===o&&(o=$s(t,e,a,r)),(i-n)*o[1]-(o[0]-n)*s<=0)l=o[1]*n/(s*o[0]+o[1]*(n-i));else{l=o[1]*(n-1)/(s*(o[0]-1)+o[1]*(n-i));let r=i-n,h=s,d=ys(he[0].slice(1),[t,e]),c=ys(he[1].slice(1),[t,e]),u=ys(he[2].slice(1),[t,e]),p=r+h*d,m=r+h*c,b=r+h*u,g=n*(1-l)+l*i,f=l*s,x=g+f*d,w=g+f*c,v=g+f*u,y=x**3,k=w**3,C=v**3,z=3*p*x**2,E=3*m*w**2,$=3*b*v**2,S=6*p**2*x,M=6*m**2*w,L=6*b**2*v,A=ys(a[0],[y,k,C])-1,P=ys(a[0],[z,E,$]),T=P/(P*P-.5*A*ys(a[0],[S,M,L])),R=-A*T,D=ys(a[1],[y,k,C])-1,B=ys(a[1],[z,E,$]),O=B/(B*B-.5*D*ys(a[1],[S,M,L])),N=-D*O,H=ys(a[2],[y,k,C])-1,I=ys(a[2],[z,E,$]),j=I/(I*I-.5*H*ys(a[2],[S,M,L])),G=-H*j;R=T>=0?R:fs,N=O>=0?N:fs,G=j>=0?G:fs,l+=Math.min(R,Math.min(N,G))}return l}(n,a,s,1,s,e,i,r),l=zs(r),h=o/Math.min(s*l[0],(1-s)*l[1]),d=function(t,e){return[.11516993+1/(7.4477897+4.1590124*e+t*(1.75198401*e-2.19557347+t*(-2.13704948-10.02301043*e+t*(5.38770819*e-4.24894561+4.69891013*t)))),.11239642+1/(1.6132032-.68124379*e+t*(.40370612+.90148123*e+t*(.6122399*e-.27087943+t*(.00299215-.45399568*e-.14661872*t))))]}(n,a),c=s*d[0],u=(1-s)*d[1],p=.9*h*Math.sqrt(Math.sqrt(1/(1/c**4+1/u**4)));return c=.4*s,u=.8*(1-s),[Math.sqrt(1/(1/c**2+1/u**2)),p,o]}var Ms=new Xt({id:"okhsl",name:"Okhsl",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,1],name:"Saturation"},l:{range:[0,1],name:"Lightness"}},base:de,gamutSpace:"self",fromBase:t=>function(t,e,i){let s=t[0],n=0,a=ks(s),r=Math.sqrt(t[1]**2+t[2]**2),o=.5+Math.atan2(-t[2],-t[1])/ms;if(0!==a&&1!==a&&0!==r){let a,o,l,h,d=t[1]/r,c=t[2]/r,[u,p,m]=Ss([s,d,c],e,i),b=.8;r<p?(o=b*u,l=1-o/p,h=r/(o+l*r),n=h*b):(a=p,o=.2*p**2*1.5625/u,l=1-o/(m-p),h=(r-a)/(o+l*(r-a)),n=b+.2*h)}const l=Math.abs(n)<1e-4;return l||0===a||Math.abs(1-a)<1e-7?(o=null,l||(n=0)):o=Jt(360*o),[o,n,a]}(t,bs,gs),toBase:t=>function(t,e,i){let[s,n,a]=t,r=Cs(a),o=null,l=null;if(s=Jt(s)/360,0!==r&&1!==r&&0!==n){let t,a,h,d,c=Math.cos(ms*s),u=Math.sin(ms*s),[p,m,b]=Ss([r,c,u],e,i),g=.8;n<g?(t=1.25*n,a=0,h=g*p,d=1-h/m):(t=5*(n-.8),a=m,h=.2*m**2*1.5625/p,d=1-h/(b-m));let f=a+t*h/(1-d*t);o=f*c,l=f*u}return[r,o,l]}(t,bs,gs),formats:{color:{id:"--okhsl",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});var Ls=new Xt({id:"okhsv",name:"Okhsv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,1],name:"Saturation"},v:{range:[0,1],name:"Value"}},base:de,gamutSpace:"self",fromBase:t=>function(t,e,i){let s=t[0],n=0,a=ks(s),r=Math.sqrt(t[1]**2+t[2]**2),o=.5+Math.atan2(-t[2],-t[1])/ms;if(0!==s&&1!==s&&0!==r){let o=t[1]/r,l=t[2]/r,h=$s(o,l,e,i),[d,c]=zs(h),u=.5,p=1-u/d,m=c/(r+s*c),b=m*s,g=m*r,f=Cs(b),x=g*f/b,[w,v,y]=Es([f,o*x,l*x],e),k=Mt(1/Math.max(Math.max(w,v),Math.max(y,0)),1/3);s/=k,r/=k,r=r*ks(s)/s,s=ks(s),a=s/b,n=(u+c)*g/(c*u+c*p*g)}return o=Math.abs(n)<1e-4||0===a?null:Jt(360*o),[o,n,a]}(t,bs,gs),toBase:t=>function(t,e,i){let[s,n,a]=t;s=Jt(s)/360;let r=Cs(a),o=null,l=null;if(0!==r&&0!==n){let t=Math.cos(ms*s),h=Math.sin(ms*s),d=$s(t,h,e,i),[c,u]=zs(d),p=.5,m=1-p/c,b=1-n*p/(p+u-u*m*n),g=n*u*p/(p+u-u*m*n);r=a*b;let f=a*g,x=Cs(b),w=g*x/b,v=Cs(r);f=f*v/r,r=v;let[y,k,C]=Es([x,t*w,h*w],e),z=Mt(1/Math.max(Math.max(y,k),Math.max(C,0)),1/3);r*=z,f*=z,o=f*t,l=f*h}return[r,o,l]}(t,bs,gs),formats:{color:{id:"--okhsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),As=new Xt({id:"oklch",name:"OkLCh",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:de,fromBase:Qt.fromBase,toBase:Qt.toBase,formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>","<number> | <angle>"]}}});var Ps=new Ri({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M:[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]]}),Ts=new Ri({id:"p3",cssId:"display-p3",name:"P3",base:Ps,fromBase:Gi.fromBase,toBase:Gi.toBase});var Rs=new Ri({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:Ut,toXYZ_M:[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],fromXYZ_M:[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]]});const Ds=1/512;var Bs=new Ri({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:Rs,toBase:t=>t.map((t=>t<.03125?t/16:t**1.8)),fromBase:t=>t.map((t=>t>=Ds?t**(1/1.8):16*t))});var Os=new Ri({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],fromXYZ_M:[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]]});const Ns=1.09929682680944,Hs=.018053968510807;var Is=new Ri({id:"rec2020",name:"REC.2020",base:Os,toBase:t=>t.map((function(t){return t<4.5*Hs?t/4.5:Math.pow((t+Ns-1)/Ns,1/.45)})),fromBase:t=>t.map((function(t){return t>=Hs?Ns*Math.pow(t,.45)-(Ns-1):4.5*t}))});Xt.register(Bi),Xt.register(bi),Xt.register(Fi),Xt.register(cs),Xt.register(us),Xt.register(ps),Xt.register(Qt),Xt.register(Kt),Xt.register(Ls),Xt.register(Ms),Xt.register(de),Xt.register(As),Xt.register(Ts),Xt.register(Bs),Xt.register(Is),Xt.register(Gi),Xt.register(Ni),Xt.register(Ut),Xt.register(Zt),Xt.register(we);const js=[["primary",["primary",40],["primary",80]],["on-primary",["greyscale",100],["primary",20]],["primary-container",["primary",90],["primary",30]],["on-primary-container",["primary",10],["primary",90]],["primary-inverse",["primary",80],["primary",40]],["primary-fixed",["primary",90],["primary",90]],["primary-fixed-dim",["primary",80],["primary",80]],["on-primary-fixed",["primary",10],["primary",10]],["on-primary-fixed-variant",["primary",30],["primary",30]],["secondary",["secondary",40],["secondary",80]],["on-secondary",["greyscale",100],["secondary",20]],["secondary-container",["secondary",90],["secondary",30]],["on-secondary-container",["secondary",10],["secondary",90]],["secondary-fixed",["secondary",90],["secondary",90]],["secondary-fixed-dim",["secondary",80],["secondary",80]],["on-secondary-fixed",["secondary",10],["secondary",10]],["on-secondary-fixed-variant",["secondary",30],["secondary",30]],["tertiary",["tertiary",40],["tertiary",80]],["on-tertiary",["greyscale",100],["tertiary",20]],["tertiary-container",["tertiary",90],["tertiary",30]],["on-tertiary-container",["tertiary",10],["tertiary",90]],["tertiary-fixed",["tertiary",90],["tertiary",90]],["tertiary-fixed-dim",["tertiary",80],["tertiary",80]],["on-tertiary-fixed",["tertiary",10],["tertiary",10]],["on-tertiary-fixed-variant",["tertiary",30],["tertiary",30]],["error",["error",40],["error",80]],["on-error",["greyscale",100],["error",20]],["error-container",["error",90],["error",30]],["on-error-container",["error",10],["error",90]],["outline",["neutralVariant",50],["neutralVariant",60]],["outline-variant",["neutralVariant",80],["neutralVariant",30]],["background",["neutral",98],["neutral",6]],["on-background",["neutral",10],["neutral",90]],["surface",["neutral",98],["neutral",6]],["on-surface",["neutral",10],["neutral",90]],["surface-variant",["neutralVariant",90],["neutralVariant",30]],["on-surface-variant",["neutralVariant",30],["neutralVariant",80]],["surface-inverse",["neutral",20],["neutral",90]],["on-surface-inverse",["neutral",95],["neutral",20]],["surface-bright",["neutral",98],["neutral",24]],["surface-dim",["neutral",87],["neutral",6]],["surface-container",["neutral",94],["neutral",12]],["surface-container-low",["neutral",96],["neutral",10]],["surface-container-lowest",["greyscale",100],["neutral",4]],["surface-container-high",["neutral",92],["neutral",17]],["surface-container-highest",["neutral",90],["neutral",22]],["scrim",["greyscale",0],["greyscale",0]]];let Gs=(t,e="hex",i=3)=>{if(void 0===t.spaceId&&(t.spaceId=t.space.id),"hex"===e||"hex-alt"===e){let i=zi(Ci(t,"srgb"),{format:"hex"});return"hex-alt"===e?i.toUpperCase():i}if("hsl"===e||"hsl-alt"===e){let[s,n,a]=Ci(t,"hsl").coords,r=t.alpha;if((null===s||Number.isNaN(s))&&(s=0),s=Mi(s,i),n=Mi(n,i),a=Mi(a,i),"hsl"===e)return r=Mi(100*r,i),100===r?`hsl(${s}deg ${n}% ${a}%)`:`hsl(${s}deg ${n}% ${a}% / ${r}%)`;if("hsl-alt"===e)return r=Mi(r,i),1===r?`hsl(${s} ${n}% ${a}%)`:`hsl(${s} ${n}% ${a}% / ${r})`}else if("hwb"===e||"hwb-alt"===e){let[s,n,a]=Ci(t,"hwb").coords,r=t.alpha;if((null===s||Number.isNaN(s))&&(s=0),s=Mi(s,i),n=Mi(n,i),a=Mi(a,i),"hwb"===e)return r=Mi(100*r,i),100===r?`hwb(${s}deg ${n}% ${a}%)`:`hwb(${s}deg ${n}% ${a}% / ${r}%)`;if("hwb-alt"===e)return r=Mi(r,i),1===r?`hwb(${s} ${n}% ${a}%)`:`hwb(${s} ${n}% ${a}% / ${r})`}else if("rgb"===e||"rgb-alt"===e){let[s,n,a]=Ci(t,"srgb").coords,r=t.alpha;if("rgb"===e)return s=Mi(100*s,i),n=Mi(100*n,i),a=Mi(100*a,i),r=Mi(100*r,i),100===r?`rgb(${s}% ${n}% ${a}%)`:`rgb(${s}% ${n}% ${a}% / ${r}%)`;if("rgb-alt"===e)return s=Mi(255*s,i),n=Mi(255*n,i),a=Mi(255*a,i),r=Mi(r,i),1===r?`rgb(${s} ${n} ${a})`:`rgb(${s} ${n} ${a} / ${r})`}else if("color"===e||"color-alt"===e)if(["srgb","srgb-linear","a98rgb","prophoto","p3","rec2020","hsl","hwb"].includes(t.spaceId)){"hsl"!==t.spaceId&&"hwb"!==t.spaceId||void 0===(t=Ci(t,"srgb")).spaceId&&(t.spaceId=t.space.id);let[s,n,a]=t.coords,r=t.alpha,o=Xs(t.spaceId,"css");if("color"===e)return s=Mi(100*s,i),n=Mi(100*n,i),a=Mi(100*a,i),r=Mi(100*r,i),100===r?`color(${o} ${s}% ${n}% ${a}%)`:`color(${o} ${s}% ${n}% ${a}% / ${r}%)`;if("color-alt"===e)return s=Mi(s,i),n=Mi(n,i),a=Mi(a,i),r=Mi(r,i),1===r?`color(${o} ${s} ${n} ${a})`:`color(${o} ${s} ${n} ${a} / ${r})`}else{if(!["xyz","xyz-d50","xyz-d65"].includes(t.spaceId))throw new Error(`"Color in "${t.spaceId}" space can't be serialized to "${e}" format.`);{let[s,n,a]=t.coords,r=t.alpha,o=t.spaceId;if("color"===e)return s=Mi(100*s,i),n=Mi(100*n,i),a=Mi(100*a,i),r=Mi(100*r,i),"xyz"===o&&(o="xyz-d65"),100===r?`color(${o} ${s}% ${n}% ${a}%)`:`color(${o} ${s}% ${n}% ${a}% / ${r}%)`;if("color-alt"===e)return s=Mi(s,i),n=Mi(n,i),a=Mi(a,i),r=Mi(r,i),"xyz-d65"===o&&(o="xyz"),1===r?`color(${o} ${s} ${n} ${a})`:`color(${o} ${s} ${n} ${a} / ${r})`}}else if("oklch"===e||"oklch-alt"===e){let[s,n,a]=Ci(t,"oklch").coords,r=t.alpha;if("oklch"===e)return s=Mi(100*s,i),n=Mi(n/.4*100,i),a=Mi(a,i),r=Mi(100*r,i),100===r?`oklch(${s}% ${n}% ${a}deg)`:`oklch(${s}% ${n}% ${a}deg / ${r}%)`;if("oklch-alt"===e)return s=Mi(s,i),n=Mi(n,i),a=Mi(a,i),r=Mi(r,i),1===r?`oklch(${s} ${n} ${a})`:`oklch(${s} ${n} ${a} / ${r})`}else if("oklab"===e||"oklab-alt"===e){let[s,n,a]=Ci(t,"oklab").coords,r=t.alpha;if("oklab"===e)return s=Mi(100*s,i),n=Mi(n/.4*100,i),a=Mi(a/.4*100,i),r=Mi(100*r,i),100===r?`oklab(${s}% ${n}% ${a}%)`:`oklab(${s}% ${n}% ${a}% / ${r}%)`;if("oklab-alt"===e)return s=Mi(s,i),n=Mi(n,i),a=Mi(a,i),r=Mi(r,i),1===r?`oklab(${s} ${n} ${a})`:`oklab(${s} ${n} ${a} / ${r})`}else if("lch"===e||"lch-alt"===e){let[s,n,a]=Ci(t,"lch").coords,r=t.alpha;if("lch"===e)return s=Mi(s,i),n=Mi(n/150*100,i),a=Mi(a,i),r=Mi(100*r,i),100===r?`lch(${s}% ${n}% ${a}deg)`:`lch(${s}% ${n}% ${a}deg / ${r}%)`;if("lch-alt"===e)return s=Mi(s,i),n=Mi(n,i),a=Mi(a,i),r=Mi(r,i),1===r?`lch(${s} ${n} ${a})`:`lch(${s} ${n} ${a} / ${r})`}else{if("lab"!==e&&"lab-alt"!==e)throw new Error(`Unknown color format "${e}".`);{let[s,n,a]=Ci(t,"lab").coords,r=t.alpha;if("lab"===e)return s=Mi(s,i),n=Mi(n/125*100,i),a=Mi(a/125*100,i),r=Mi(100*r,i),100===r?`lab(${s}% ${n}% ${a}%)`:`lab(${s}% ${n}% ${a}% / ${r}%)`;if("lab-alt"===e)return s=Mi(s,i),n=Mi(n,i),a=Mi(a,i),r=Mi(r,i),1===r?`lab(${s} ${n} ${a})`:`lab(${s} ${n} ${a} / ${r})`}}},Fs=t=>{let e=null;return"srgb"===t||"srgb-linear"===t?e="srgb":"a98rgb"!==t&&"p3"!==t&&"rec2020"!==t&&"prophoto"!==t||(e=t),e},Xs=(t,e="css")=>("css"===e?"p3"===t?t="display-p3":"a98rgb"===t?t="a98-rgb":"prophoto"===t&&(t="prophoto-rgb"):"color.js"===e&&("display-p3"===t?t="p3":"a98-rgb"===t?t="a98rgb":"prophoto-rgb"===t&&(t="prophoto")),"xyz"===t&&(t="xyz-d65"),t),_s=t=>{try{It(t)}catch(t){return!1}return!0},Zs=document.createElement("template"),Us=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=i.join("");Zs.innerHTML=s;let n=document.importNode(Zs.content,!0);return 1===n.children.length?n.firstElementChild:n},Ys=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=i.join(""),n=new CSSStyleSheet;return n.replaceSync(s),n},Vs=(t,...e)=>{let i=[];for(let s=0;s<t.length;s+=1)i.push(t[s]),void 0!==e[s]&&i.push(e[s]);let s=`<svg id="x-stub" xmlns="http://www.w3.org/2000/svg">${i.join("")}</svg>`;Zs.innerHTML=s;let n=document.importNode(Zs.content,!0),a=n.querySelector("svg#x-stub");if(1===a.children.length)return a.firstElementChild;for(let t of[...a.childNodes])n.appendChild(t);return a.remove(),n},Ws={},qs=t=>new Promise((async e=>{if(Ws[t])Ws[t].icons?e(Ws[t].icons):Ws[t].callbacks.push(e);else{Ws[t]={callbacks:[e],icons:null};let i=null;try{i=await(await fetch(t)).text()}catch(t){i=null}if(i){Ws[t].icons=Vs`${i}`;for(let e of Ws[t].callbacks)e(Ws[t].icons)}else console.error(`Xel failed to fetch the icons: ${t}`)}}));class Ks{constructor(t){this.value=t}valueOf(){return this.value}}class Js extends Ks{constructor(t="???"){super(t)}toString(t){return`{${this.value}}`}}class Qs extends Ks{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),this.value.toString(10)}}}class tn extends Ks{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),new Date(this.value).toISOString()}}}function en(t,e,i){if(i===e)return!0;if(i instanceof Qs&&e instanceof Qs&&i.value===e.value)return!0;if(e instanceof Qs&&"string"==typeof i){if(i===t.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value))return!0}return!1}function sn(t,e,i){return e[i]?on(t,e[i].value):(t.reportError(new RangeError("No default")),new Js)}function nn(t,e){const i=[],s=Object.create(null);for(const n of e)"narg"===n.type?s[n.name]=an(t,n.value):i.push(an(t,n));return{positional:i,named:s}}function an(t,e){switch(e.type){case"str":return e.value;case"num":return new Qs(e.value,{minimumFractionDigits:e.precision});case"var":return function(t,{name:e}){let i;if(t.params){if(!Object.prototype.hasOwnProperty.call(t.params,e))return new Js(`$${e}`);i=t.params[e]}else{if(!t.args||!Object.prototype.hasOwnProperty.call(t.args,e))return t.reportError(new ReferenceError(`Unknown variable: $${e}`)),new Js(`$${e}`);i=t.args[e]}if(i instanceof Ks)return i;switch(typeof i){case"string":return i;case"number":return new Qs(i);case"object":if(i instanceof Date)return new tn(i.getTime());default:return t.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof i}`)),new Js(`$${e}`)}}(t,e);case"mesg":return function(t,{name:e,attr:i}){const s=t.bundle.$.get(e);if(!s)return t.reportError(new ReferenceError(`Unknown message: ${e}`)),new Js(e);if(i){const n=s.attributes[i];return n?on(t,n):(t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new Js(`${e}.${i}`))}if(s.value)return on(t,s.value);return t.reportError(new ReferenceError(`No value: ${e}`)),new Js(e)}(t,e);case"term":return function(t,{name:e,attr:i,args:s}){const n=`-${e}`,a=t.bundle.S.get(n);if(!a)return t.reportError(new ReferenceError(`Unknown term: ${n}`)),new Js(n);if(i){const e=a.attributes[i];if(e){t.params=nn(t,s).named;const i=on(t,e);return t.params=null,i}return t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new Js(`${n}.${i}`)}t.params=nn(t,s).named;const r=on(t,a.value);return t.params=null,r}(t,e);case"func":return function(t,{name:e,args:i}){let s=t.bundle.L[e];if(!s)return t.reportError(new ReferenceError(`Unknown function: ${e}()`)),new Js(`${e}()`);if("function"!=typeof s)return t.reportError(new TypeError(`Function ${e}() is not callable`)),new Js(`${e}()`);try{let e=nn(t,i);return s(e.positional,e.named)}catch(i){return t.reportError(i),new Js(`${e}()`)}}(t,e);case"select":return function(t,{selector:e,variants:i,star:s}){let n=an(t,e);if(n instanceof Js)return sn(t,i,s);for(const e of i){if(en(t,n,an(t,e.key)))return on(t,e.value)}return sn(t,i,s)}(t,e);default:return new Js}}function rn(t,e){if(t.dirty.has(e))return t.reportError(new RangeError("Cyclic reference")),new Js;t.dirty.add(e);const i=[],s=t.bundle.A&&e.length>1;for(const n of e)if("string"!=typeof n){if(t.placeables++,t.placeables>100)throw t.dirty.delete(e),new RangeError(`Too many placeables expanded: ${t.placeables}, max allowed is 100`);s&&i.push("⁨"),i.push(an(t,n).toString(t)),s&&i.push("⁩")}else i.push(t.bundle.P(n));return t.dirty.delete(e),i.join("")}function on(t,e){return"string"==typeof e?t.bundle.P(e):rn(t,e)}class ln{constructor(t,e,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=t,this.errors=e,this.args=i}reportError(t){if(!(this.errors&&t instanceof Error))throw t;this.errors.push(t)}memoizeIntlObject(t,e){let i=this.bundle.T.get(t);i||(i={},this.bundle.T.set(t,i));let s=JSON.stringify(e);return i[s]||(i[s]=new t(this.bundle.locales,e)),i[s]}}function hn(t,e){const i=Object.create(null);for(const[s,n]of Object.entries(t))e.includes(s)&&(i[s]=n.valueOf());return i}const dn=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function cn(t,e){let i=t[0];if(i instanceof Js)return new Js(`NUMBER(${i.valueOf()})`);if(i instanceof Qs)return new Qs(i.valueOf(),{...i.opts,...hn(e,dn)});if(i instanceof tn)return new Qs(i.valueOf(),{...hn(e,dn)});throw new TypeError("Invalid argument to NUMBER")}const un=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function pn(t,e){let i=t[0];if(i instanceof Js)return new Js(`DATETIME(${i.valueOf()})`);if(i instanceof tn)return new tn(i.valueOf(),{...i.opts,...hn(e,un)});if(i instanceof Qs)return new tn(i.valueOf(),{...hn(e,un)});throw new TypeError("Invalid argument to DATETIME")}const mn=new Map;class bn{constructor(t,{functions:e,useIsolating:i=!0,transform:s=t=>t}={}){this.S=new Map,this.$=new Map,this.locales=Array.isArray(t)?t:[t],this.L={NUMBER:cn,DATETIME:pn,...e},this.A=i,this.P=s,this.T=function(t){const e=Array.isArray(t)?t.join(" "):t;let i=mn.get(e);return void 0===i&&(i=new Map,mn.set(e,i)),i}(t)}hasMessage(t){return this.$.has(t)}getMessage(t){return this.$.get(t)}addResource(t,{allowOverrides:e=!1}={}){const i=[];for(let s=0;s<t.body.length;s++){let n=t.body[s];if(n.id.startsWith("-")){if(!1===e&&this.S.has(n.id)){i.push(new Error(`Attempt to override an existing term: "${n.id}"`));continue}this.S.set(n.id,n)}else{if(!1===e&&this.$.has(n.id)){i.push(new Error(`Attempt to override an existing message: "${n.id}"`));continue}this.$.set(n.id,n)}}return i}formatPattern(t,e=null,i=null){if("string"==typeof t)return this.P(t);let s=new ln(this,i,e);try{return rn(s,t).toString(s)}catch(t){if(s.errors&&t instanceof Error)return s.errors.push(t),(new Js).toString(s);throw t}}}const gn=/^(-?[a-zA-Z][\w-]*) *= */gm,fn=/\.([a-zA-Z][\w-]*) *= */y,xn=/\*?\[/y,wn=/(-?[0-9]+(?:\.([0-9]+))?)/y,vn=/([a-zA-Z][\w-]*)/y,yn=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,kn=/^[A-Z][A-Z0-9_-]*$/,Cn=/([^{}\n\r]+)/y,zn=/([^\\"\n\r]*)/y,En=/\\([\\"])/y,$n=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,Sn=/^\n+/,Mn=/ +$/,Ln=/ *\r?\n/g,An=/( *)$/,Pn=/{\s*/y,Tn=/\s*}/y,Rn=/\[\s*/y,Dn=/\s*] */y,Bn=/\s*\(\s*/y,On=/\s*->\s*/y,Nn=/\s*:\s*/y,Hn=/\s*,?\s*/y,In=/\s+/y;class jn{constructor(t){this.body=[],gn.lastIndex=0;let e=0;for(;;){let i=gn.exec(t);if(null===i)break;e=gn.lastIndex;try{this.body.push(o(i[1]))}catch(t){if(t instanceof SyntaxError)continue;throw t}}function i(i){return i.lastIndex=e,i.test(t)}function s(i,s){if(t[e]===i)return e++,!0;if(s)throw new s(`Expected ${i}`);return!1}function n(t,s){if(i(t))return e=t.lastIndex,!0;if(s)throw new s(`Expected ${t.toString()}`);return!1}function a(i){i.lastIndex=e;let s=i.exec(t);if(null===s)throw new SyntaxError(`Expected ${i.toString()}`);return e=i.lastIndex,s}function r(t){return a(t)[1]}function o(t){let e=l(),s=function(){let t=Object.create(null);for(;i(fn);){let e=r(fn),i=l();if(null===i)throw new SyntaxError("Expected attribute value");t[e]=i}return t}();if(null===e&&0===Object.keys(s).length)throw new SyntaxError("Expected message value or attributes");return{id:t,value:e,attributes:s}}function l(){let s;if(i(Cn)&&(s=r(Cn)),"{"===t[e]||"}"===t[e])return h(s?[s]:[],Infinity);let n=f();return n?s?h([s,n],n.length):(n.value=x(n.value,Sn),h([n],n.length)):s?x(s,Mn):null}function h(s=[],n){for(;;){if(i(Cn)){s.push(r(Cn));continue}if("{"===t[e]){s.push(d());continue}if("}"===t[e])throw new SyntaxError("Unbalanced closing brace");let a=f();if(!a)break;s.push(a),n=Math.min(n,a.length)}let a=s.length-1,o=s[a];"string"==typeof o&&(s[a]=x(o,Mn));let l=[];for(let t of s)t instanceof Gn&&(t=t.value.slice(0,t.value.length-n)),t&&l.push(t);return l}function d(){n(Pn,SyntaxError);let t=c();if(n(Tn))return t;if(n(On)){let e=function(){let t,e=[],n=0;for(;i(xn);){s("*")&&(t=n);let i=p(),a=l();if(null===a)throw new SyntaxError("Expected variant value");e[n++]={key:i,value:a}}if(0===n)return null;if(void 0===t)throw new SyntaxError("Expected default variant");return{variants:e,star:t}}();return n(Tn,SyntaxError),{type:"select",selector:t,...e}}throw new SyntaxError("Unclosed placeable")}function c(){if("{"===t[e])return d();if(i(yn)){let[,i,s,r=null]=a(yn);if("$"===i)return{type:"var",name:s};if(n(Bn)){let a=function(){let i=[];for(;;){switch(t[e]){case")":return e++,i;case void 0:throw new SyntaxError("Unclosed argument list")}i.push(u()),n(Hn)}}();if("-"===i)return{type:"term",name:s,attr:r,args:a};if(kn.test(s))return{type:"func",name:s,args:a};throw new SyntaxError("Function names must be all upper-case")}return"-"===i?{type:"term",name:s,attr:r,args:[]}:{type:"mesg",name:s,attr:r}}return m()}function u(){let t=c();return"mesg"!==t.type?t:n(Nn)?{type:"narg",name:t.name,value:m()}:t}function p(){let t;return n(Rn,SyntaxError),t=i(wn)?b():{type:"str",value:r(vn)},n(Dn,SyntaxError),t}function m(){if(i(wn))return b();if('"'===t[e])return function(){s('"',SyntaxError);let i="";for(;;){if(i+=r(zn),"\\"!==t[e]){if(s('"'))return{type:"str",value:i};throw new SyntaxError("Unclosed string literal")}i+=g()}}();throw new SyntaxError("Invalid expression")}function b(){let[,t,e=""]=a(wn),i=e.length;return{type:"num",value:parseFloat(t),precision:i}}function g(){if(i(En))return r(En);if(i($n)){let[,t,e]=a($n),i=parseInt(t||e,16);return i<=55295||57344<=i?String.fromCodePoint(i):"�"}throw new SyntaxError("Unknown escape sequence")}function f(){let i=e;switch(n(In),t[e]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return w(t.slice(i,e))}return" "===t[e-1]&&w(t.slice(i,e))}function x(t,e){return t.replace(e,"")}function w(t){let e=t.replace(Ln,"\n"),i=An.exec(t)[1].length;return new Gn(e,i)}}}class Gn{constructor(t,e){this.value=t,this.length=e}}let Fn,Xn,_n=()=>(void 0===Xn&&(Xn=navigator.userAgent.indexOf("Firefox/")>-1?"gecko":navigator.userAgent.indexOf("Chrome")>-1?"chromium":navigator.userAgent.indexOf("Safari/")>-1?"webkit":"other"),Xn),Zn=t=>new Promise((e=>{setTimeout((()=>e()),t)})),Un=()=>Date.now(),Yn=(t,e=500,i=null)=>{let s=null,n=null,a=null,r=0,o=()=>{r=new Date,n=null,a=t.apply(i,s)};return(...l)=>{let h=new Date,d=e-(h-r);return s=l,d<=0?(clearTimeout(n),n=null,r=h,a=t.apply(i,s)):n||(n=setTimeout(o,d)),a}};var Vn=new class extends mt{get theme(){return this.#e}set theme(t){let e=document.head.querySelector(':scope > meta[name="xel-theme"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-theme"),document.head.append(e)),e.setAttribute("content",t)}get icons(){return[...this.#i]}set icons(t){let e=document.head.querySelector(':scope > meta[name="xel-icons"]');e||(e=document.head.querySelector(':scope > meta[name="xel-iconsets"]'),e&&console.warn('<meta name="xel-iconsets"> has been deprecated. Please use <meta name="xel-icons"> instead.'),e||(e=document.createElement("meta"),e.setAttribute("name","xel-icons"),document.head.append(e))),e.setAttribute("content",t.join(", "))}get locales(){return[...this.#s]}set locales(t){let e=document.head.querySelector(':scope > meta[name="xel-locales"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-locales"),document.head.append(e)),e.setAttribute("content",t.join(", "))}get locale(){return this.#n[0]||"en"}get accentColor(){return this.#a}set accentColor(t){let e=document.head.querySelector(':scope > meta[name="xel-accent-color"]');e||(e=document.createElement("meta"),e.setAttribute("name","xel-accent-color"),document.head.append(e)),e.setAttribute("content",t)}get configStorage(){return this.#r}set configStorage(t){this.#r=t}get whenThemeReady(){return new Promise((t=>{null===this.#o?t():this.#o.push(t)}))}get whenIconsReady(){return new Promise((t=>{null===this.#l?t():this.#l.push(t)}))}get whenLocalesReady(){return new Promise((t=>{null===this.#h?t():this.#h.push(t)}))}get themeStyleSheet(){return this.#d}get presetAccentColors(){let t={};for(let e of this.#d.cssRules)if(1===e.type&&":root"===e.selectorText){let i=e.style.getPropertyValue("--preset-accent-colors");if(""!==i){let e=i.split(",").map((t=>t.trim()));for(let i of e){let e=i.substring(0,i.indexOf(" ")),s=i.substring(i.indexOf(" ")+1).trim();t[e]=s}break}}return t}get autocapitalize(){return this.#c}queryIcon(t){t=!1===t.startsWith("#")?"#"+t:t;let e=null;for(let i of this.#u){let s=i.querySelector(t);if(s){e=s;break}}return e}queryMessage(t,e={}){t=t.startsWith("#")?t.substring(1):t;let[i,s]=t.split("."),n=this.#p.getMessage(i),a=null,r=!1,o="text";if(void 0===e.os&&(e.os=(void 0===Fn&&(Fn=!0===navigator.platform.startsWith("Mac")?"macos":-1!==["iPhone","iPad","iPod"].indexOf(navigator.platform)?"ios":-1!==["Win32","Win64","Windows","WinCE"].indexOf(navigator.platform)?"windows":/CrOS/.test(navigator.userAgent)?"chromeos":/Android/.test(navigator.userAgent)?"android":/Linux/.test(navigator.platform)?"linux":null),Fn)),void 0===s&&(s=null),n)if(null===s){if(n.value){if(Array.isArray(n.value))for(let t of n.value)"select"===t.type&&void 0===e[t.selector.name]&&(e[t.selector.name]="unknown");a=this.#p.formatPattern(n.value,e)}}else n.attributes?.[s]&&(a=this.#p.formatPattern(n.attributes[s],e));return null===a?(a=null===s?i:`${i}.${s}`,r=!0):/<|&#?\w+;/.test(a)&&(o="html",a=pt.sanitize(a,{USE_PROFILES:{html:!0}})),{id:i,attribute:s,format:o,content:a,fallback:r}}getConfig(t,e=null){let i=this.#r.getItem(t);return null===i?e:JSON.parse(i)}setConfig(t,e){let i=this.#r.getItem(t);null===e?this.#r.removeItem(t):this.#r.setItem(t,JSON.stringify(e)),i!==this.#r.getItem(t)&&this.dispatchEvent(new CustomEvent("configchange",{detail:{key:t,value:e,origin:"self"}}))}clearConfig(){if(this.#r.length>0){let t=[];for(let e=0;e<this.#r.length;e+=1){let i=this.#r.key(e);t.push(i)}this.#r.clear();for(let e of t)this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:null,origin:"self"}}))}}#e=null;#a=null;#i=[];#s=[];#n=[];#c="none";#d=new CSSStyleSheet;#u=[];#p=null;#r=localStorage;#o=[];#l=[];#h=[];constructor(){super(),document.adoptedStyleSheets=[this.#d];let{theme:t,accentColor:e,icons:i,locales:s}=this.#m();this.#e=t,this.#a=e,this.#i=i,this.#s=s,this.#n=this.#s.map((t=>{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))})),null!==this.#e&&this.#b(this.#e),this.#i.length>0&&this.#g(this.#i),this.#s.length>0&&this.#f(this.#s);new MutationObserver((()=>this.#x())).observe(document.head,{attributes:!0,subtree:!0});window.addEventListener("storage",(t=>this.#w(t)))}#x(){let t=this.#e,e=this.#a,i=this.#i,s=this.#s,{theme:n,accentColor:a,icons:r,locales:o}=this.#m();this.#e=n,this.#a=a,this.#i=r,this.#s=o,this.#n=this.#s.map((t=>{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))})),this.#e!==t&&this.#b(this.#e).then((()=>{this.dispatchEvent(new CustomEvent("themechange"))})),this.#a!==e&&(this.#v(),this.dispatchEvent(new CustomEvent("accentcolorchange"))),!1===bt(this.#i,i,!0)&&this.#g(this.#i).then((()=>{this.dispatchEvent(new CustomEvent("iconschange")),this.dispatchEvent(new CustomEvent("iconsetschange"))})),!1===bt(this.#s,s,!0)&&this.#f(this.#s).then((()=>{this.dispatchEvent(new CustomEvent("localeschange"))}))}#w(t){if(t.storageArea===this.#r){let e=t.key,i=null===t.newValue?null:JSON.parse(t.newValue);this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:i,origin:"other"}}))}}#y(t){return new Promise((async e=>{let i=await fetch(t),s=await i.text();for(let[e,i]of this.#k(s)){if(e.startsWith(".")&&!t.startsWith(".")&&!t.startsWith("blob:")&&!t.startsWith("data:")){e=new URL(e,"https://xel-toolkit.org"+t).pathname}let n=await this.#y(e);s=s.replace(i,n)}e(s)}))}#b(t){return new Promise((async e=>{null===this.#o&&(this.#o=[]);let i=await this.#y(t);if(this.#d.replaceSync(i),this.#C(),this.#v(),null!==this.#o){for(let t of this.#o)t();this.#o=null}e()}))}#g(t){return new Promise((async e=>{null===this.#l&&(this.#l=[]),this.#u=[];for(let e of t){let t=await qs(e);this.#u.push(t)}for(let t of this.#l)t();this.#l=null,e()}))}#f(t){return new Promise((async e=>{null===this.#h&&(this.#h=[]);let i=t.map((t=>{if(t.startsWith("blob:")){return t.substring(t.lastIndexOf("#")+1)}{let e=t.substring(t.lastIndexOf("/")+1);return e.substring(0,e.indexOf("."))}}));0===i.length&&i.push("en");let s=new bn([i[0]],{useIsolating:!1,functions:{RELDATETIME:(t=[])=>{let e;if(t[0]instanceof Qs)e=new Date(t[0].value);else{if("string"!=typeof t[0])throw new TypeError("Invalid argument to RELDATETIME");e=new Date(Number.parseInt(t[0]))}return((t,e=new Date,i=["en"])=>{let s,n=3600,a=86400,r=604800,o=t.getTime(),l=e.getTime(),h=new Intl.RelativeTimeFormat(i,{numeric:"always"}),d=Math.round((l-o)/1e3);if(d<0?(s=1,d=-d):s=-1,d<60)return h.format(d*s,"seconds");if(d<n)return h.format(Math.round(d*s/60),"minutes");if(d<a)return h.format(Math.round(d*s/n),"hours");if(d<r)return h.format(Math.round(d*s/a),"days");if(d<4233600)return h.format(Math.round(d*s/r),"weeks");{let i=12*(t.getFullYear()-e.getFullYear());return i-=e.getMonth(),i+=t.getMonth(),Math.abs(i)>12?i<0?h.format(Math.ceil(i/12),"years"):h.format(Math.floor(i/12),"years"):h.format(i,"months")}})(e,new Date,i)}}});for(let e=t.length-1;e>=0;e-=1){let i=t[e],n=await(await fetch(i)).text(),a=new jn(n),r=s.addResource(a,{allowOverrides:!0});r.length&&console.info("Found localization syntax errors",r)}this.#p=s,this.#C();for(let t of this.#h)t();this.#h=null,e()}))}#C(){if(this.#p?.locales[0]?.startsWith("en")){let t=getComputedStyle(document.documentElement);this.#c=t.getPropertyValue("--autocapitalize").trim()||"none"}else this.#c="none"}async#v(){await this.whenThemeReady;let t=this.#a||this.presetAccentColors.blue,e=this.presetAccentColors[t]?this.presetAccentColors[t]:t,i="",s=[...this.#d.cssRules].filter((t=>1===t.type&&":root"===t.selectorText));for(let t of s){let e=t.style.getPropertyValue("--theme-id");""!==e&&(i=e)}if(s.at(-1).style.setProperty("--accent-color",i.includes("material")?"var(--material-primary-color)":e),i.includes("material")){let n=((t,e=!1,i=!1)=>{let s=Ci(It(t),"hct"),n={};for(let t of js){let[a,r]=e?t[2]:t[1],[o,l,h]=s.coords;i&&(a="greyscale"),"primary"===a?(l=Math.max(48,l),h=r):"secondary"===a?(l=16,h=r):"tertiary"===a?(o+=60,l=24,h=r):"neutral"===a?(l=4,h=r):"neutralVariant"===a?(l=8,h=r):"error"===a?(o=25,l=84,h=r):"greyscale"===a&&(o=0,l=0,h=r);let d=Ci({space:"hct",coords:[o,l,h]},"oklch");n[`--material-${t[0]}-color`]=zi(d,"oklch")}return n})(e,i.includes("-dark"),"gray"===t);for(let[t,e]of Object.entries(n))s.at(-1).style.setProperty(t,e)}{let t=document.head.querySelector('meta[name="theme-color"]'),e=getComputedStyle(document.documentElement).getPropertyValue("--titlebar-color").trim()||"auto";"auto"===e?t&&t.remove():(null===t&&(t=document.createElement("meta"),t.setAttribute("name","theme-color"),document.head.append(t)),t.setAttribute("content",e))}}#m(){let t=document.head.querySelector(':scope > meta[name="xel-theme"]'),e=document.head.querySelector(':scope > meta[name="xel-accent-color"]'),i=document.head.querySelector(':scope > meta[name="xel-icons"]'),s=document.head.querySelector(':scope > meta[name="xel-locales"]');i||(i=document.head.querySelector(':scope > meta[name="xel-iconsets"]'),i&&console.warn('<meta name="xel-iconsets"> has been deprecated in in Xel 0.27.0. Please use <meta name="xel-icons"> instead.'));let n=null,a=null,r=[],o=[];return t&&""!==t.content&&(n=t.content),e&&""!==e.content&&(a=_s(e.content)?e.content:"#000"),i&&(r=i.content.split(",").map((t=>t.trim())).filter((t=>""!==t))),s&&(o=s.content.split(",").map((t=>t.trim())).filter((t=>""!==t))),{theme:n,accentColor:a,icons:r,locales:o}}#k(t){let e=[],i=-1;for(;;){let s=t.indexOf("@import",i);if(!(s>-1))break;{let n=t.indexOf(";",s),a=0,r=t.indexOf(".css",s)+4,o=t.indexOf("'",s),l=t.indexOf('"',s);if(o>s&&o<n)a=o+1;else if(l>s&&l<n)a=l+1;else{let e=t.indexOf("url(",s);e>s&&e<n&&(a=e+4)}let h=t.substring(a,r);e.push([h,t.substring(s,n+1)]),i=r}}return e}get iconsets(){return console.warn('"Xel.iconsets" has been deprecated in Xel 0.27.0. Please use "Xel.icons" instead.'),this.icons}set iconsets(t){console.warn('"Xel.iconsets" has been deprecated in Xel 0.27.0. Please use "Xel.icons" instead.'),this.icons=t}get whenIconsetsReady(){return console.warn('"Xel.whenIconsetsReady" has been deprecated in Xel 0.27.0. Please use "Xel.whenIconsReady" instead.'),this.whenIconsReady}};class Wn extends HTMLElement{static#z=Us`<template><div id="main"><div id="arrow" part="arrow" tabindex="1"><svg id="arrow-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg></div><slot></slot></div></template>`;static#E=Ys`:host{display:block;width:100%;margin:10px 0;box-sizing:border-box}:host([disabled]){pointer-events:none;opacity:0.5}:host([animating]){overflow:hidden}#main{position:relative;width:100%;height:100%}#arrow{position:absolute;top:0;display:flex;align-items:center;justify-content:flex-start;pointer-events:none;transform:translateY(-50%);--path-data: M 26 20 L 26 80 L 74 50 Z;}:host([animating]) #arrow{outline:none!important}#arrow-svg{display:flex;width:16px;height:16px;transform:rotate(0deg);color:currentColor}#arrow-svg:focus{background:transparent;outline:none}:host([expanded]) #arrow-svg{transform:rotate(90deg)}#arrow-path{fill:currentColor}
`;get expanded(){return this.hasAttribute("expanded")}set expanded(t){t?this.setAttribute("expanded",""):this.removeAttribute("expanded")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#S=null;#M=null;#L=null;#A=[];#P=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Wn.#E],this.#$.append(document.importNode(Wn.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#T(t))),this["#arrow"].addEventListener("keydown",(t=>this.#R(t)))}async connectedCallback(){await Vn.whenThemeReady,this.#M=new ResizeObserver((()=>this.#D())),this.#L=new MutationObserver((t=>this.#B(t))),this.#L.observe(this,{childList:!0}),Vn.addEventListener("themechange",this.#P=()=>this.#O()),this.#O(),this.#N(),this.#B()}disconnectedCallback(){Vn.removeEventListener("themechange",this.#P),this.#S&&(this.#M.unobserve(this.#S),this.#S=null),this.#M.disconnect(),this.#L.disconnect()}expand(t=!0){return new Promise((async e=>{if(!1===this.expanded)if(!1===t)this.#H(),this.removeAttribute("animating"),this.expanded=!0;else if(!0===t){let t=this.getBoundingClientRect();this.#H(),this.removeAttribute("animating"),this.expanded=!0;let e=this.getBoundingClientRect();this.setAttribute("animating","");let i=[this.animate({height:[`${t.height}px`,`${e.height}px`]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"}),this["#arrow-svg"].animate({transform:["rotate(0deg)","rotate(90deg)"]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})];this.#A=i,await Promise.all(i.map((t=>t.finished))),this.#A===i&&(this.#A=[],this.removeAttribute("animating"))}e()}))}collapse(t=!0){return new Promise((async e=>{if(!0===this.expanded)if(!1===t)this.#H(),this.removeAttribute("animating"),this.expanded=!1;else if(!0===t){let t=this.getBoundingClientRect();this.#H(),this.removeAttribute("animating"),this.expanded=!1;let e=this.getBoundingClientRect();this.setAttribute("animating","");let i=[this.animate({height:[`${t.height}px`,`${e.height}px`]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"}),this["#arrow-svg"].animate({transform:["rotate(90deg)","rotate(0deg)"]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})];this.#A=i,await Promise.all(i.map((t=>t.finished))),this.#A===i&&(this.#A=[],this.removeAttribute("animating"))}e()}))}#H(){this.#A.length>0&&(this.#A.map((t=>t.finish())),this.#A=[])}#N(){let t=this.querySelector(":scope > header");t?this["#arrow"].style.top=t.getBoundingClientRect().height/2+"px":this["#arrow"].style.height=null}#O(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#B(){let t=this.querySelector(":scope > header");t!==this.#S&&(null===t?(this.#M.unobserve(this.#S),this.#S=null):(this.#S=t,this.#M.observe(this.#S)))}#D(){this.#N()}#R(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||this.querySelector("header").click()}#T(t){let e=this.querySelector("header"),i=t.target.closest("[tabindex]");e.contains(t.target)&&!1===this.contains(i)&&(this.expanded?(this.collapse(),this.dispatchEvent(new CustomEvent("collapse"))):(this.expand(),this.dispatchEvent(new CustomEvent("expand"))))}}customElements.define("x-accordion",Wn);class qn extends HTMLElement{static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:block flex;width:40px;height:40px;box-sizing:border-box;align-items:center;justify-content:center;overflow:hidden;border-width:1px;border-style:solid;user-select:none;-webkit-user-select:none}:host([hidden]){display:none}
`;get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[qn.#E],this.#$.append(document.importNode(qn.#z.content,!0))}}customElements.define("x-avatar",qn);class Kn extends HTMLElement{static#E=Ys`:host{display:block;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;touch-action:none;cursor:default;background:rgba(0, 0, 0, 0.5)}:host([hidden]){display:none}
`;get ownerElement(){return this.#I?this.#I:document.body.firstElementChild}set ownerElement(t){this.#I=t}#$=null;#I=null;#j=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Kn.#E],this.addEventListener("pointerdown",(t=>t.preventDefault()))}connectedCallback(){this.addEventListener("wheel",this.#j=t=>t.preventDefault())}disconnectedCallback(){this.removeEventListener("wheel",this.#j)}show(t=!0){this.title="",this.style.top="0px",this.style.left="0px",this.ownerElement.before(this),this.hidden=!1;let e=this.getBoundingClientRect(),i=0,s=0;0===e.top&&0===e.left||(i=-e.top,s=-e.left);{let t=Number.parseFloat(getComputedStyle(this.ownerElement).zIndex);this.style.zIndex=t-1}if(this.style.top=i+"px",this.style.left=s+"px",t){return this.animate({opacity:["0","1"]},{duration:100,easing:"ease-out"}).finished}}hide(t=!0){if(t){let t=this.animate({opacity:["1","0"]},{duration:100,easing:"ease-in"});return t.finished.then((()=>{this.remove()})),t.finished}this.remove()}}customElements.define("x-backdrop",Kn);class Jn extends HTMLElement{static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:flex;box-sizing:border-box;align-items:center;justify-content:flex-start}:host([vertical]){flex-flow:column;align-items:flex-start;justify-content:center}:host([hidden]){display:none}
`;get vertical(){return this.hasAttribute("vertical")}set vertical(t){t?this.setAttribute("vertical",""):this.removeAttribute("vertical")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Jn.#E],this.#$.append(document.importNode(Jn.#z.content,!0))}}customElements.define("x-box",Jn);class Qn extends HTMLElement{static observedAttributes=["disabled","skin"];static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:flex;align-items:center;justify-content:center;width:fit-content;height:fit-content;min-height:32px;padding:2px 14px;box-sizing:border-box;opacity:1;position:relative}:host(:focus){outline:none}:host(:focus:not(:active)){z-index:1}:host([mixed]){opacity:0.75}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get togglable(){return this.hasAttribute("togglable")}set togglable(t){t?this.setAttribute("togglable",""):this.removeAttribute("togglable")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get condensed(){return this.hasAttribute("condensed")}set condensed(t){t?this.setAttribute("condensed",""):this.removeAttribute("condensed")}get skin(){return this.hasAttribute("skin")?this.getAttribute("skin"):"normal"}set skin(t){this.setAttribute("skin",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get expanded(){return this.hasAttribute("expanded")}get expandable(){return this.#G()||this.#F()}get ownerButtons(){if(this.parentElement){if("x-buttons"===this.parentElement?.localName)return this.parentElement;if(["a","x-box"].includes(this.parentElement.localName)&&this.parentElement.parentElement&&"x-buttons"===this.parentElement.parentElement.localName)return this.parentElement.parentElement}return null}#$=null;#X=!1;#_=!1;#Z=null;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Qn.#E],this.#$.append(document.importNode(Qn.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#W())),this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("keydown",(t=>this.#q(t))),this.addEventListener("close",(t=>this.#K(t))),(async()=>{await customElements.whenDefined("x-backdrop"),this["#backdrop"]=t("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)"})()}connectedCallback(){this.parentElement&&"a"===this.parentElement.localName&&-1!==this.parentElement.tabIndex&&(this.parentElement.tabIndex=-1),this.#J(),this.#Q()}disconnectedCallback(){this.#_=!1}attributeChangedCallback(t,e,i){e!==i&&!1!==this.isConnected&&("disabled"===t?this.#J():"skin"===t&&this.#Q())}expand(){return new Promise((async t=>{this.#G()?await this.#tt():this.#F()&&await this.#et(),t()}))}collapse(t=null){return new Promise((async e=>{this.#it()?await this.#st(t):this.#nt()&&await this.#at(t),e()}))}#tt(){return new Promise((async t=>{if(this.#G()){let t=this.querySelector(":scope > x-menu"),e=this.querySelector(":scope > x-tooltip");e&&e.close(!1),this.#X=this.matches(":focus"),this.setAttribute("expanded",""),this["#backdrop"].ownerElement=t,this["#backdrop"].show(!1),await t.openNextToElement(this,"vertical",3),t.focus()}t()}))}#st(t=null){return new Promise((async e=>{if(this.#it()){let e=this.querySelector(":scope > x-menu");if(e.setAttribute("closing",""),await t,e.close(),this["#backdrop"].hide(!1),this.removeAttribute("expanded"),"chromium"===_n()&&this.replaceWith(this),this.#X)this.focus();else{let t=i(this.parentNode,"[tabindex]");t&&t.focus()}e.removeAttribute("closing")}e()}))}#G(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-menu");if(e&&!1===e.hasAttribute("opened")&&!1===e.hasAttribute("closing")){null!==e.querySelector("x-menuitem")&&(t=!0)}}return t}#it(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-menu");e?.opened&&(t=!0)}return t}#et(){return new Promise((async t=>{if(this.#F()){let t=this.querySelector(":scope > x-popover"),e=this.querySelector(":scope > x-tooltip");e&&e.close(!1),this.#X=this.matches(":focus"),this.setAttribute("expanded",""),await t.open(this)}t()}))}#at(t=null){return new Promise((async e=>{if(this.#nt()){let e=this.querySelector(":scope > x-popover");if(e.setAttribute("closing",""),await t,await e.close(),this.removeAttribute("expanded"),e.modal&&"chromium"===_n()&&this.replaceWith(this),this.#X)this.focus();else{let t=i(this.parentNode,"[tabindex]");t&&t.focus()}e.removeAttribute("closing")}e()}))}#F(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-popover");e&&!1===e.hasAttribute("opened")&&(t=!0)}return t}#nt(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-popover");e?.opened&&(t=!0)}return t}#rt(){return new Promise((t=>{if(this.#ot()){this.querySelector(":scope > dialog").showModal()}t()}))}#ot(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > dialog");e&&!1===e.hasAttribute("open")&&!1===e.hasAttribute("closing")&&(t=!0)}return t}#lt(){return new Promise((t=>{if(this.#ht()){this.querySelector(":scope > x-drawer").open()}t()}))}#ht(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-drawer");e&&!1===e.matches(":popover-open")&&!1===e.hasAttribute("closing")&&(t=!0)}return t}#dt(){return new Promise((t=>{if(this.#ct()){this.querySelector(":scope > x-notification").opened=!0}t()}))}#ct(){let t=!1;if(!1===this.disabled){let e=this.querySelector(":scope > x-notification");!e||e.hasAttribute("opened")||e.hasAttribute("closing")||(t=!0)}return t}#J(){this.setAttribute("role","button"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#Q(){!1===this.hasAttribute("skin")&&this.setAttribute("skin","normal")}#Y(t){let e=this.querySelector(":scope > x-menu[opened]"),i=this.querySelector(":scope > x-popover[opened]"),s=this.querySelector(":scope > dialog[open]"),n=this.querySelector(":scope > x-drawer[open]"),a=this.querySelector(":scope > x-notification[opened]");if(this.#Z=t,t.target===this["#backdrop"])this.#ut(t);else{if(e?.contains(t.target))return;if(i?.contains(t.target))return;if(s?.contains(t.target))return;if(n?.contains(t.target))return;if(a?.contains(t.target))return;this.#pt(t)}}#K(t){t.target.parentElement===this&&["x-menu","x-popover"].includes(t.target.localName)&&this.#Z&&!1===e(this.#Z,this)&&(this.#_=!1)}#V(){let t=this.querySelector(":scope > x-tooltip");if(t&&!1===t.disabled&&!1===this.expanded&&!1===this.#_){if(this.parentElement&&"x-buttons"===this.parentElement.localName)for(let t of this.parentElement.children)if(t!==this&&"x-button"===t.localName){let e=t.querySelector(":scope > x-tooltip");e&&e.close(!1)}t.open(this)}}#W(){let t=this.querySelector(":scope > x-tooltip");t&&t.close(),this.#_=!1}#T(t){let e=this.querySelector(":scope > x-menu[opened]"),i=this.querySelector(":scope > x-popover[opened]"),s=this.querySelector(":scope > dialog[open]"),n=this.querySelector(":scope > x-drawer[open]"),a=this.querySelector(":scope > x-notification[opened]");if(t.target!==this["#backdrop"])if(e?.contains(t.target))!1===e.hasAttribute("closing")&&t.target.closest("x-menuitem")&&this.#mt(t);else{if(i?.contains(t.target))return;if(s?.contains(t.target))return;if(n?.contains(t.target))return;if(a?.contains(t.target))return;this.#_=!0,this.#bt(t)}}#ut(){this.collapse()}#pt(t){if(t.buttons>1)t.preventDefault();else if(this.querySelector(":scope > dialog[open], :scope > x-drawer[open]"))t.preventDefault();else if(!1!==this.contains(t.target)){if(this.setPointerCapture(t.pointerId),t.preventDefault(),!1===this.matches(":focus")){let t,e=i(this.parentNode,"*[tabindex]:not(a)");this.addEventListener("pointerup",t=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),e?e.focus():(this.focus(),this.blur())}),this.addEventListener("pointercancel",t)}if(!1===this.#G()&&!1===this.#F()&&!1===this.#nt()){let t,e=Date.now(),i=!0,s=Number.parseInt(getComputedStyle(this).getPropertyValue("--min-pressed-time")||"150ms");this.addEventListener("pointerup",t=async()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),i=!1;let n=Date.now()-e;n<s&&await Zn(s-n),this.removeAttribute("pressed")}),this.addEventListener("pointercancel",t),(async()=>{if(this.ownerButtons)if(0===this.ownerButtons.tracking||2===this.ownerButtons.tracking)await Zn(10);else if(1!==this.ownerButtons.tracking||!1!==this.toggled&&!this.mixed){if(3===this.ownerButtons.tracking){let t=[...this.ownerButtons.querySelectorAll(":scope > x-button, :scope > x-box > x-button")].filter((t=>t.toggled));(!1===this.toggled||t.length>1)&&await Zn(10)}}else await Zn(10);else this.togglable&&await Zn(10);i&&this.setAttribute("pressed","")})()}this.#G()?"touch"!==t.pointerType&&this.#tt():this.#F()?"touch"!==t.pointerType&&this.#et():this.#nt()&&this.#at()}}#bt(t){let e=this.querySelector(":scope > x-menu, :scope > x-popover");if(e){if(e.hasAttribute("closing"))return;e.focus()}!1===this.#nt()&&(this.#ot()?this.#rt():this.#ht()?this.#lt():this.#ct()&&this.#dt()),this.#Z&&"touch"===this.#Z.pointerType&&(this.#G()?this.#tt():this.#F()&&this.#et()),this.togglable&&!1===t.defaultPrevented&&(this.removeAttribute("pressed"),this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle")))}#mt(t){let e=t.target.closest("x-menuitem");this.querySelector(":scope > x-menu").hasAttribute("closing")||this.collapse(e.whenTriggerEnd)}#q(t){!1===t.defaultPrevented&&("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code?this.#G()?(t.preventDefault(),this.#tt().then((()=>this.querySelector(":scope > x-menu").focusFirstMenuItem()))):this.#F()?(t.preventDefault(),this.#et()):this.#ot()?(t.preventDefault(),this.#rt()):this.#ht()?(t.preventDefault(),this.#lt()):this.#ct()?(t.preventDefault(),this.#dt()):this.matches(":focus")&&(this.#nt()?this.#at():this.#it()?this.#st():(t.preventDefault(),this.click())):"ArrowDown"===t.code?this.#G()?(t.preventDefault(),this.#tt().then((()=>this.querySelector(":scope > x-menu").focusFirstMenuItem()))):this.#F()?(t.preventDefault(),this.#et()):(t.preventDefault(),this.click()):"ArrowUp"===t.code?this.#G()?(t.preventDefault(),this.#tt().then((()=>this.querySelector(":scope > x-menu").focusLastMenuItem()))):this.#F()?(t.preventDefault(),this.#et()):(t.preventDefault(),this.click()):"Escape"===t.code&&(this.#it()||this.#nt())&&(t.preventDefault(),this.collapse()))}}customElements.define("x-button",Qn);class ta extends HTMLElement{static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:flex;flex-flow:row;align-items:center;justify-content:flex-start;box-sizing:border-box;width:fit-content}:host([hidden]){display:none}
`;get tracking(){return this.hasAttribute("tracking")?Number.parseInt(this.getAttribute("tracking")):-1}set tracking(t){this.setAttribute("tracking",t)}get vertical(){return this.hasAttribute("vertical")}set vertical(t){!0===t?this.setAttribute("vertical",""):this.removeAttribute("vertical")}get value(){if(2===this.tracking||3===this.tracking){return this.#gt().filter((t=>t.toggled)).map((t=>t.value)).filter((t=>void 0!==t))}if(1===this.tracking||0===this.tracking){let t=this.#gt().find((t=>t.toggled));return t&&void 0!==t.value?t.value:null}return null}set value(t){if(2===this.tracking||3===this.tracking){let e=this.#gt();if(Array.isArray(t))for(let i of e)i.toggled=t.includes(i.value);else for(let i of e)i.toggled=i.value===t}else if(1===this.tracking||0===this.tracking){let e=this.#gt(),i=e.find((e=>e.value===t));for(let t of e)t.toggled=t===i}}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ta.#E],this.#$.append(document.importNode(ta.#z.content,!0)),this.addEventListener("click",(t=>this.#T(t)),!0),this.addEventListener("keydown",(t=>this.#q(t)))}connectedCallback(){for(let t of this.children)if("x-button"===t.localName){"none"!==getComputedStyle(t).boxShadow?this.setAttribute("hasboxshadow",""):this.removeAttribute("hasboxshadow");break}}#gt(){return[...this.querySelectorAll(":scope > x-button, :scope > x-box > x-button")]}#T(t){if(t.buttons>1)return;let e=t.target.closest("x-button");if(e&&!1===e.disabled&&!1===e.expandable){let t=this.#gt().filter((t=>t!==e));if(0===this.tracking){e.mixed||(e.toggled=!e.toggled),e.mixed=!1;for(let e of t)e.toggled=!1,e.mixed=!1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}else if(1===this.tracking){if(!1===e.toggled||!0===e.mixed){e.toggled=!0,e.mixed=!1;for(let e of t)e.toggled=!1,e.mixed=!1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}}else if(2===this.tracking)e.mixed?e.mixed=!1:e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}));else if(3===this.tracking){let i=t.filter((t=>!0===t.toggled));(!1===e.toggled||i.length>0)&&(e.mixed?e.mixed=!1:e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e})))}}}#q(t){if("ArrowRight"===t.code){let t=[...this.children].find((t=>t.matches(":focus")));t&&(t.nextElementSibling?t.nextElementSibling.focus():t!==t.parentElement.firstElementChild&&t.parentElement.firstElementChild.focus())}else if("ArrowLeft"===t.code){let t=[...this.children].find((t=>t.matches(":focus")));t&&(t.previousElementSibling?t.previousElementSibling.focus():t!==t.parentElement.lastElementChild&&t.parentElement.lastElementChild.focus())}}}customElements.define("x-buttons",ta);class ea extends HTMLElement{static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:block;width:100%;min-width:20px;min-height:48px;box-sizing:border-box;margin:30px 0;padding:16px 20px}:host([hidden]){display:none}slot{border-radius:inherit}
`;#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ea.#E],this.#$.append(document.importNode(ea.#z.content,!0))}}customElements.define("x-card",ea);class ia extends HTMLElement{static observedAttributes=["toggled","mixed","disabled"];static#z=Us`<template><div id="main"><div id="indicator" part="indicator"><svg id="checkmark" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="checkmark-path"></path></svg></div><div id="description"><slot></slot></div></div></template>`;static#E=Ys`:host{display:block;width:fit-content}:host([disabled]){opacity:0.4;pointer-events:none}:host([hidden]){display:none}:host(:focus){outline:none}#main{display:flex;align-items:center}#indicator{position:relative;width:19px;height:19px;box-sizing:border-box;border:2px solid currentColor;overflow:hidden;--path-data: M 95 23 L 86 13 L 37 66 L 13.6 41 L 4.5 51 L 37 85 L 95 23 Z;}:host([mixed]) #indicator{--path-data: M 87 42.6 L 13 42.6 L 13 57.4 L 87 57.4 L 87 42.6 Z;}#checkmark{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;overflow:visible;transition-property:opacity;transition-timing-function:inherit;transition-duration:inherit}:host([mixed]) #checkmark{opacity:1}:host([toggled]) #checkmark{opacity:1}#checkmark-path{fill:currentColor}#description{flex:1}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;#P=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ia.#E],this.#$.append(document.importNode(ia.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#W())),this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("keydown",(t=>this.#q(t)))}async connectedCallback(){Vn.addEventListener("themechange",this.#P=()=>this.#ft()),this.#J(),"webkit"===_n()&&(await Zn(10),!1===this.isConnected)||Vn.whenThemeReady.then((()=>{this.#ft()}))}disconnectedCallback(){Vn.removeEventListener("themechange",this.#P)}attributeChangedCallback(t,e,i){e!==i&&("toggled"===t?this.#xt():"mixed"===t?this.#wt():"disabled"===t&&this.#vt())}#ft(){let t=getComputedStyle(this["#indicator"]).getPropertyValue("--path-data");this["#checkmark-path"].setAttribute("d",t)}#J(){this.setAttribute("role","checkbox"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#xt(){this.#ft(),this.setAttribute("aria-toggled",this.mixed?"mixed":this.toggled)}#wt(){this.#ft()}#vt(){this.#J()}#Y(t){if(t.buttons>1)t.preventDefault();else if(!1===this.matches(":focus")){t.preventDefault();let e=i(this.parentNode,"[tabindex]");e&&e.focus()}}#V(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#W(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#T(){this.mixed?this.mixed=!1:this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0}))}#q(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-checkbox",ia);class sa extends HTMLElement{static observedAttributes=["value","space","disabled"];static#z=Us`<template><div id="main"><slot></slot><input id="input" type="text" spellcheck="false" autocomplete="false" part="input"><div id="arrow-container"><svg id="arrow" width="10" height="10" viewBox="0 0 100 100" preserveAspectRatio="none" part="arrow"><path id="arrow-path"></path></svg></div><slot></slot></div></template>`;static#E=Ys`:host{display:block;position:relative;max-width:160px;height:32px;padding:0 2px 0 8px;box-sizing:border-box;font-size:0.875rem}:host([size="small"]){height:24px;padding:0 2px 0 6px;font-size:0.8rem}:host([size="large"]){height:38px}:host(:focus){z-index:10}:host([mixed]){color:rgba(0, 0, 0, 0.7)}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}#main{display:flex;align-items:center;width:100%;height:100%}#input{width:100%;padding:0;box-sizing:border-box;color:inherit;background:none;border:none;outline:none;font-family:inherit;font-size:inherit;font-weight:inherit;text-align:inherit;text-overflow:ellipsis}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}:host(:not(:focus)) ::selection{color:inherit;background:transparent}#arrow-container{display:flex;align-items:center;justify-content:center;height:100%;margin-left:4px;min-width:fit-content}#arrow{display:block;box-sizing:border-box;width:auto;min-width:fit-content;height:calc(100% - 4px);color:currentColor;cursor:default;--text-color: 50%;--path-data: M 25 41 L 50 16 L 75 41 L 83 34 L 50 1 L 17 34 Z M 17 66 L 50 100 L 83 66 L 75 59 L 50 84 L 25 59 Z;}:host([size="small"]) #arrow{padding:2px 2px}:host([size="large"]) #arrow{padding:0px 1px}#arrow path{fill:currentColor}
`;get value(){return this.#yt}set value(t){t=Gs(Ci(It(t),this.space),this.#kt),this.#yt===t||this.matches(":focus")||(this.#yt=t,this.isConnected&&(this.#Ct(),this.#zt(),this.#Et&&this.reportValidity()))}get space(){return this.hasAttribute("space")?this.getAttribute("space"):"srgb"}set space(t){this.setAttribute("space",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#yt="#000000";#kt="hex";#$=null;#U=0;#Et=null;#X=!1;#$t;#St;#Mt;#Lt;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,sa.#E],this.#$.append(document.importNode(sa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#format-menu"]=t("x-menu"),this["#backdrop"]=t("x-backdrop"),this["#backdrop"].style.opacity="0",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>this.#At(t))),this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#W())),this.addEventListener("focusin",(t=>this.#Pt(t))),this.addEventListener("focusout",(t=>this.#Tt(t))),this.addEventListener("keydown",(t=>this.#q(t))),this["#input"].addEventListener("input",(t=>this.#Rt(t))),this["#input"].addEventListener("blur",(t=>this.#Dt(t))),this["#input"].addEventListener("search",(t=>this.#Bt(t))),this["#input"].addEventListener("pointerdown",(t=>this.#Ot(t))),this["#input"].addEventListener("contextmenu",(()=>this.#Nt())),this["#arrow"].addEventListener("pointerdown",(t=>this.#Ht(t))),this["#arrow"].addEventListener("click",(t=>this.#It(t))),this["#format-menu"].addEventListener("toggle",(t=>this.#jt(t))),this["#format-menu"].addEventListener("click",(t=>this.#Gt(t)))}connectedCallback(){this.#kt=Vn.getConfig(`x-colorinput:${this.space}Format`,this.#Ft(this.space)),this.#Xt(),this.#Et&&this.reportValidity(),Vn.addEventListener("configchange",this.#$t=t=>this.#_t(t)),Vn.addEventListener("themechange",this.#St=()=>this.#O())}disconnectedCallback(){Vn.removeEventListener("configchange",this.#$t),Vn.removeEventListener("themechange",this.#St)}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Zt():"space"===t?this.#Ut():"disabled"===t&&this.#vt())}selectAll(){this["#input"].select()}clear(){this.value="",this.#Et=null,this.#Yt()}reportValidity(){let t=this["#input"].value;return this.required&&0===t.length?this.#Et={href:"#required-field"}:!1===_s(t)&&!1===_s("#"+t)?this.#Et={href:"#invalid-color"}:this.#Et=null,this.#Yt(),null===this.#Et}#Vt(){if(!1===this.#Wt())return;let t=this["#format-menu"];window.addEventListener("resize",this.#Mt=()=>this.#qt()),window.addEventListener("blur",this.#Lt=()=>this.#qt());{let e=It(this.value);e.spaceId!==this.space&&(e=Ci(e,this.space),void 0===e.spaceId&&(e.spaceId=e.space.id)),["srgb","hwb","hsl"].includes(e.spaceId)?t.innerHTML=`\n          <x-menuitem value="hex">\n            <x-label>${Gs(e,"hex")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hex-alt">\n            <x-label>${Gs(e,"hex").toUpperCase()}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="color">\n            <x-label>${Gs(e,"color")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="color-alt">\n            <x-label>${Gs(e,"color-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="rgb">\n            <x-label>${Gs(e,"rgb")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="rgb-alt">\n            <x-label>${Gs(e,"rgb-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="hsl">\n            <x-label>${Gs(e,"hsl")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hsl-alt">\n            <x-label>${Gs(e,"hsl-alt")}</x-label>\n          </x-menuitem>\n\n          <hr/>\n\n          <x-menuitem value="hwb">\n            <x-label>${Gs(e,"hwb")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="hwb-alt">\n            <x-label>${Gs(e,"hwb-alt")}</x-label>\n          </x-menuitem>\n        `:["srgb-linear","p3","rec2020","prophoto","a98rgb","xyz","xyz-d65","xyz-d50"].includes(e.spaceId)?t.innerHTML=`\n          <x-menuitem value="color">\n            <x-label>${Gs(e,"color")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="color-alt">\n            <x-label>${Gs(e,"color-alt")}</x-label>\n          </x-menuitem>\n        `:"oklch"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="oklch">\n            <x-label>${Gs(e,"oklch")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="oklch-alt">\n            <x-label>${Gs(e,"oklch-alt")}</x-label>\n          </x-menuitem>\n        `:"oklab"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="oklab">\n            <x-label>${Gs(e,"oklab")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="oklab-alt">\n            <x-label>${Gs(e,"oklab-alt")}</x-label>\n          </x-menuitem>\n        `:"lch"===e.spaceId?t.innerHTML=`\n          <x-menuitem value="lch">\n            <x-label>${Gs(e,"lch")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="lch-alt">\n            <x-label>${Gs(e,"lch-alt")}</x-label>\n          </x-menuitem>\n        `:"lab"===e.spaceId&&(t.innerHTML=`\n          <x-menuitem value="lab">\n            <x-label>${Gs(e,"lab")}</x-label>\n          </x-menuitem>\n\n          <x-menuitem value="lab-alt">\n            <x-label>${Gs(e,"lab-alt")}</x-label>\n          </x-menuitem>\n        `)}{let e=t.querySelector(`[value="${this.#kt}"]`);e&&(e.toggled=!0)}{let e=t.querySelector("x-menuitem[toggled]"),i=t.querySelector("x-menuitem").firstElementChild;this.append(t),this["#backdrop"].show(!1),e?t.openOverElement(this["#input"],e.querySelector("x-label")):t.openOverElement(this["#input"],i)}{let e=t.getBoundingClientRect(),i=this.getBoundingClientRect(),s=Number.parseFloat(getComputedStyle(this).paddingRight);e.right-s<i.right&&(t.style.minWidth=i.right-e.left+s+"px")}{let t=this.getBoundingClientRect();t.right+7>window.innerWidth&&(this.style.maxWidth=window.innerWidth-t.left-7+"px")}}async#qt(t=null){if(!1===this.#Kt())return;let e=this["#format-menu"];if(e.setAttribute("closing",""),await t,this["#backdrop"].hide(!1),this.#X)this.focus(),this.selectAll();else{let t=i(this.parentNode,"[tabindex]");t&&t.focus()}window.removeEventListener("resize",this.#Mt),window.removeEventListener("blur",this.#Lt),await e.close(),e.removeAttribute("closing"),e.remove()}#Wt(){if(this.disabled)return!1;{let t=this["#format-menu"];return null!==t&&!1===t.opened&&!1===t.hasAttribute("closing")}}#Kt(){if(this.disabled)return!1;{let t=this["#format-menu"];return null!==t&&!0===t.opened&&!1===t.hasAttribute("closing")}}#Jt(t="increment",e=1){let{value:i}=this["#input"],s=this.#Qt();if(s){let[n,a]=s,r=i.substring(n,a),o="",l=1;r.endsWith("%")?o="%":r.endsWith("deg")&&(o="deg"),l="%"===o||"deg"===o?1:i.indexOf("/")>-1&&i.indexOf("/")<n||"color-alt"===this.#kt?.01:1,l*=e,"decrement"===t&&(l*=-1);let h=Ei(Number.parseFloat(r)+l,5)+o;this["#input"].value=i.substring(0,n)+h+i.substring(a),this["#input"].selectionStart=n,this["#input"].selectionEnd=n+h.length,this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}}#te(){let{value:t,selectionStart:e,selectionEnd:i}=this["#input"],s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=-1,a=-1;t=t.toLowerCase();for(let i=e-1;i>=0;i-=1){let e=t[i];if(!s.includes(e)){if("#"===e){n=i;break}return null}n=i}for(let n=e;n<t.length;n+=1){let e=t[n];if(!s.includes(e)){if(" "!==e||i>n)return null;break}a=n+1}return-1===n&&-1!==a?n=e:-1===a&&-1!==n&&(a=i),[n,a]}#Qt(){let{value:t,selectionStart:e,selectionEnd:i}=this["#input"],s=["0","1","2","3","4","5","6","7","8","9",".","+","-","%","d","e","g"],n=-1,a=-1;t=t.toLowerCase();for(let i=e-1;i>=0;i-=1){let e=t[i];if(!s.includes(e)){if(!1===[" ","(","/"].includes(e))return null;break}n=i}for(let n=e;n<=t.length;n+=1){let e=t[n];if(!s.includes(e)){if(!1===[" ",")","/"].includes(e)||i>n)return null;break}a=n+1}return-1===n&&-1!==a?n=e:-1===a&&-1!==n&&(a=i),[n,a]}#ee(){let t,e=this["#input"].value;try{t=It(e)}catch(i){t=It("#"+e)}return!1===this.alpha&&(t.alpha=1),e=Gs(Ci(t,this.space),this.#kt),e}#Ft(t){let e="color";return"srbg"===t?e="hex":"oklch"===t?e="oklch":"oklab"===t?e="oklab":"lch"===t?e="lch":"lab"===t&&(e="lab"),e}#_t(t){let{key:e,value:i}=t.detail;e===`x-colorinput:${this.space}Format`&&(this.#kt=i||this.#Ft(this.space),this.#yt=Gs(Ci(It(this["#input"].value),this.space),this.#kt),this.#Ct())}#Ut(){this.#kt=Vn.getConfig(`x-colorinput:${this.space}Format`,this.#Ft(this.space)),this.isConnected&&this.#Ct()}#Zt(){this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&this.selectAll()}#vt(){this["#input"].disabled=this.disabled,this.#J()}#T(t){if(2===t.detail){let t=this.#Qt(),e=this.#te();if(t){let[e,i]=t;this["#input"].setSelectionRange(e,i)}else if(e){let[t,i]=e;this["#input"].setSelectionRange(t,i)}}this.#Yt()}#At(){this.#qt()}#V(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#W(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#Pt(){this.#Yt(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#Tt(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),this.reportValidity()}#q(t){if("Enter"===t.code||"NumpadEnter"===t.code){if(t.preventDefault(),this.reportValidity(),null===this.#Et){let t=this.#ee();t!==this.#yt&&(this.#yt=t,this.#Ct(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#Ct(),this.selectAll()}}else"ArrowUp"===t.code?(t.preventDefault(),t.stopPropagation(),this.#Jt("increment",t.shiftKey?10:1)):"ArrowDown"===t.code?(t.preventDefault(),t.stopPropagation(),this.#Jt("decrement",t.shiftKey?10:1)):"Backspace"===t.code&&t.stopPropagation()}#Dt(){if(this.reportValidity(),null===this.#Et){let t=this.#ee();t!==this.#yt&&(this.#yt=t,this.#Ct(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#Ct()}}#Rt(t){this.#Et&&this.reportValidity(),t.stopPropagation(),this.#zt(),this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}#Bt(){this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#Ot(t){!1===this["#input"].matches(":focus")&&(t.preventDefault(),this["#input"].focus(),this.selectAll())}#Nt(){this["#input"].selectionStart===this["#input"].selectionEnd&&this.selectAll()}#Ht(){this.#X=this.matches(":focus")}#It(){this.#Vt()}#Gt(t){let e=t.target.closest("x-menuitem");if(e){if(!1===e.toggled){for(let t of this["#format-menu"].querySelectorAll("x-menuitem"))t.toggled=t===e;Vn.setConfig(`x-colorinput:${this.space}Format`,e.value)}this.#qt(e.whenTriggerEnd)}}#jt(t){t.preventDefault()}#Xt(){this.#Ct(),this.#O(),this.#zt(),this.#J()}#Ct(){let t=It(this.#yt);!1===this.alpha&&(t.alpha=1);let e=Gs(Ci(t,this.space),this.#kt);this.matches(":focus")?(this["#input"].selectionStart=0,this["#input"].selectionEnd=this["#input"].value.length,document.execCommand("insertText",!1,e)):this["#input"].value=e}#O(){Vn.whenThemeReady.then((()=>{let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}))}#Yt(){let e=this.#Et;e?this.setAttribute("error",""):this.removeAttribute("error");{let i=this.querySelector(':scope > x-tooltip[type="error"]');if(e&&this.matches(":focus")){if(i||(i=t("x-tooltip"),i.setAttribute("type","error"),this.append(i)),e.href){let t=e.args?Object.entries(e.args).map((([t,e])=>`${t}:${e}`)).join(","):"";i.innerHTML=`<x-message href="${e.href}" args="${t}"></x-message>`}else i.innerHTML=e;Zn(10).then((()=>{i.open(this)}))}else i&&i.close().then((()=>i.remove()))}}#zt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#J(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}}customElements.define("x-colorinput",sa);class na extends HTMLElement{static#z=Us`<template><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="a-slider" class="slider" part="slider"><div id="a-slider-track" class="slider-track"><svg id="a-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="a-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="a-slider-marker" class="slider-marker"><span id="a-slider-label" class="slider-label">A</span></div></div></div><div id="b-slider" class="slider" part="slider"><div id="b-slider-track" class="slider-track"><svg id="b-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="b-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="b-slider-marker" class="slider-marker"><span id="b-slider-label" class="slider-label">B</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-label><x-message href="#color-picker" autocapitalize>Color Picker</x-message></x-label><x-menuitem id="gamut-hints-menu-item"><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Ys`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}.slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}
`;get value(){let[t,e,i]=this.#ie;return[t,e,i,this.#se]}set value([t,e,i,s]){this.#ie=[t,e,i],this.#se=s,this.#Xt()}get space(){return this.#ne}set space(t){this.#ne!==t&&(this.#ne=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#ae;#$t;#re=!1;#ne="lab";#oe="srgb";#le=!0;#ie=[0,0,0];#se=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(na.#z.content,!0)),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,na.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#he(t))),this["#a-slider"].addEventListener("pointerdown",(t=>this.#de(t))),this["#b-slider"].addEventListener("pointerdown",(t=>this.#ce(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ue(t))),this["#context-menu"].addEventListener("click",(t=>this.#pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#me(t)))}connectedCallback(){this.#ae=i(this,"x-colorpicker"),this.#oe=Xs(Vn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#le=Vn.getConfig("x-colorpicker:labels",!0),Vn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){Vn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Xs(i||"srgb","color.js");t!==this.#oe&&(this.#oe=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#le&&(this.#le=t,this.#be())}}#pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#oe&&(this.#oe=e.value,this.#Xt(),Vn.setConfig("x-colorpicker:gamutHints",Xs(this.#oe,"css"))):"labels"===e.value&&(this.#le=!e.toggled,Vn.setConfig("x-colorpicker:labels",this.#le),this.#Xt()))}#me(){this.#ge()}#he(t){if(t.button>0||this.#re)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#re=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklab"===this.#ne?e=Si(e,0,1):"lab"===this.#ne&&(e=Si(100*e,0,100)),e!==this.#ie[0]&&(this.#ie[0]=e,this.#fe(),this.#xe(),this.#we(),this.#ve(),this.#ye(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#de(t){if(t.button>0||this.#re)return;let e,i,s=this["#a-slider-track"].getBoundingClientRect();this.#re=!0,this["#a-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),"oklab"===this.#ne?e=.8*e-.4:"lab"===this.#ne&&(e=250*e-125),e!==this.#ie[1]&&(this.#ie[1]=e,this.#ze(),this.#Ee(),this.#$e(),this.#we(),this.#ve(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#a-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#a-slider"].addEventListener("pointerup",i=()=>{this["#a-slider"].removeEventListener("pointermove",e),this["#a-slider"].removeEventListener("pointerup",i),this["#a-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#a-slider"].addEventListener("pointercancel",i)}#ce(t){if(t.button>0||this.#re)return;let e,i,s=this["#b-slider-track"].getBoundingClientRect();this.#re=!0,this["#b-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),"oklab"===this.#ne?e=.8*e-.4:"lab"===this.#ne&&(e=250*e-125),e!==this.#ie[2]&&(this.#ie[2]=e,this.#ze(),this.#Ee(),this.#fe(),this.#xe(),this.#Se(),this.#we(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#b-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#b-slider"].addEventListener("pointerup",i=()=>{this["#b-slider"].removeEventListener("pointermove",e),this["#b-slider"].removeEventListener("pointerup",i),this["#b-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#b-slider"].addEventListener("pointercancel",i)}#ue(t){if(t.button>0||this.#re)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#re=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#se&&(this.#se=e,this.#Me(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#ye(),this.#ze(),this.#Ee(),this.#$e(),this.#fe(),this.#xe(),this.#Se(),this.#we(),this.#ve(),this.#Me(),this.#ke(),this.#Ce(),this.#be()}#ye(){let[t]=this.#ie;"oklab"===this.#ne?this["#lightness-slider-marker"].style.left=100*t+"%":"lab"===this.#ne&&(this["#lightness-slider-marker"].style.left=t+"%")}#ze(){let t=[],[,e,i]=this.#ie;if("oklab"===this.#ne)for(let s=0;s<=1;s+=.02)t.push({space:"oklab",coords:[s,e,i]});else if("lab"===this.#ne)for(let s=0;s<=100;s+=2)t.push({space:"lab",coords:[s,e,i]});t=t.map((t=>zi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${t.join(",")})`}async#Ee(){if("none"===this.#oe)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ie,a=null;for(let r=0;r<=e;r+=i){let i=r/e,o=!1;if("lab"===this.#ne){let[t,e,a]=Ci({space:this.#ne,coords:[100*i,s,n]},"xyz-d65").coords;o=await this.#ae.isColorInGamut(t,e,a,this.#oe)}else if("oklab"===this.#ne){let[t,e,a]=Ci({space:this.#ne,coords:[i,s,n]},"xyz-d65").coords;o=await this.#ae.isColorInGamut(t,e,a,this.#oe)}o?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#$e(){let[,t]=this.#ie;"oklab"===this.#ne?this["#a-slider-marker"].style.left=t<-.4?"calc(0% - 18px)":t>.4?"calc(100% + 18px)":(t+.4)/.8*100+"%":"lab"===this.#ne&&(this["#a-slider-marker"].style.left=t<-125?"calc(0% - 18px)":t>125?"calc(100% + 18px)":(t+125)/250*100+"%")}#fe(){let[t,,e]=this.#ie,i=[];if("oklab"===this.#ne)for(let s=-.4;s<=.4;s+=.05)i.push({space:"oklab",coords:[t,s,e]});else if("lab"===this.#ne)for(let s=-125;s<=125;s+=5)i.push({space:"lab",coords:[t,s,e]});i=i.map((t=>zi(t))),this["#a-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${i.join(",")})`}async#xe(){if("none"===this.#oe)this["#a-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#a-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#ie,a=null;for(let r=0;r<=e;r+=i){let i=r/e,o=!1;if("lab"===this.#ne){let[t,e,a]=Ci({space:this.#ne,coords:[s,250*i-125,n]},"xyz-d65").coords;o=await this.#ae.isColorInGamut(t,e,a,this.#oe)}else if("oklab"===this.#ne){let[t,e,a]=Ci({space:this.#ne,coords:[s,.8*i-.4,n]},"xyz-d65").coords;o=await this.#ae.isColorInGamut(t,e,a,this.#oe)}o?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#a-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#a-slider-gamut-path"].removeAttribute("d")}}#Se(){let[,,t]=this.#ie;"oklab"===this.#ne?this["#b-slider-marker"].style.left=t<-.4?"calc(0% - 18px)":t>.4?"calc(100% + 18px)":(t+.4)/.8*100+"%":"lab"===this.#ne&&(this["#b-slider-marker"].style.left=t<-125?"calc(0% - 18px)":t>125?"calc(100% + 18px)":(t+125)/250*100+"%")}#we(){let[t,e]=this.#ie,i=[];if("oklab"===this.#ne)for(let s=-.4;s<=.4;s+=.05)i.push({space:"oklab",coords:[t,e,s]});else if("lab"===this.#ne)for(let s=-125;s<=125;s+=5)i.push({space:"lab",coords:[t,e,s]});i=i.map((t=>zi(t))),this["#b-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${i.join(",")})`}async#ve(){if("none"===this.#oe)this["#b-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#b-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#ie,a=null;for(let r=0;r<=e;r+=i){let i=r/e,o=!1;if("lab"===this.#ne){let[t,e,a]=Ci({space:this.#ne,coords:[s,n,250*i-125]},"xyz-d65").coords;o=await this.#ae.isColorInGamut(t,e,a,this.#oe)}else if("oklab"===this.#ne){let[t,e,a]=Ci({space:this.#ne,coords:[s,n,.8*i-.4]},"xyz-d65").coords;o=await this.#ae.isColorInGamut(t,e,a,this.#oe)}o?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#b-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#b-slider-gamut-path"].removeAttribute("d")}}#Me(){this["#alpha-slider-marker"].style.left=100*this.#se+"%"}#ke(){let[t,e,i]=this.#ie,s=[{space:this.#ne,coords:[t,e,i],alpha:0},{space:this.#ne,coords:[t,e,i],alpha:1}];s=s.map((t=>zi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ne} to right, ${s.join(",")})`}async#Ce(){if("none"===this.#oe)this["#a-slider-marker"].removeAttribute("data-warn"),this["#b-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{let[t,e,i]=Ci({space:this.#ne,coords:this.#ie},"xyz-d65").coords;await this.#ae.isColorInGamut(t,e,i,this.#oe)?(this["#a-slider-marker"].removeAttribute("data-warn"),this["#b-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#a-slider-marker"].setAttribute("data-warn",""),this["#b-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#be(){this["#a-slider-label"].hidden=!this.#le,this["#b-slider-label"].hidden=!this.#le,this["#lightness-slider-label"].hidden=!this.#le,this["#alpha-slider-label"].hidden=!this.#le}#ge(){if(0===this.#ae.gamuts.length)this["#gamut-hints-menu-item"].hidden=!0,this["#gamut-hints-menu"].innerHTML="";else{let t='\n          <x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem>\n          <hr/>\n        ';for(let e of this.#ae.gamuts)t+=`\n            <x-menuitem value="${e}"><x-label>${this.#ae.getGamutLabel(e)}</x-label></x-menuitem>\n          `;this["#gamut-hints-menu"].innerHTML=t,this["#gamut-hints-menu-item"].hidden=!1}for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#oe;this["#labels-menu-item"].toggled=this.#le}}void 0===customElements.get("x-lablinearsliders")&&customElements.define("x-lablinearsliders",na);class aa extends HTMLElement{static#z=Us`<template><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-label><x-message href="#color-picker" autocapitalize>Color Picker</x-message></x-label><x-menuitem id="gamut-hints-menu-item"><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Ys`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}#lightness-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}#lightness-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#lightness-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#lightness-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}#lightness-slider-gamut-svg{width:100%;height:100%}#lightness-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#lightness-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0%;left:0%;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size) / -2), calc(var(--marker-size) / -2));background:rgba(0, 0, 0, 0.3);border:3px solid white;border-radius:999px;box-shadow:0 0 3px black;--marker-size: 20px;}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255, 255, 255, 0.9);font-size:1.125rem;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%;overflow:hidden;border-radius:inherit}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}
`;get value(){let[t,e,i]=this.#ie;return[t,e,i,this.#se]}set value([t,e,i,s]){this.#ie=[t,e,i],this.#se=s,this.#Xt()}get space(){return this.#ne}set space(t){this.#ne!==t&&(this.#ne=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#ae;#$t;#Le=new ResizeObserver((()=>this.#Ae()));#re=!1;#ne="lab";#oe="srgb";#le=!0;#ie=[0,0,0];#se=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(aa.#z.content,!0)),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,aa.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#he(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#Pe(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ue(t))),this["#context-menu"].addEventListener("click",(t=>this.#pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#me(t)))}connectedCallback(){this.#ae=i(this,"x-colorpicker"),this.#oe=Xs(Vn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#le=Vn.getConfig("x-colorpicker:labels",!0),this.#Le.observe(this),Vn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){this.#Le.unobserve(this),Vn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Xs(i||"srgb","color.js");t!==this.#oe&&(this.#oe=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#le&&(this.#le=t,this.#be())}}#pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#oe&&(this.#oe=e.value,this.#Xt(),Vn.setConfig("x-colorpicker:gamutHints",Xs(this.#oe,"css"))):"labels"===e.value&&(this.#le=!e.toggled,Vn.setConfig("x-colorpicker:labels",this.#le),this.#Xt()))}#me(){this.#ge()}#Ae(){this.#Te()}#he(t){if(t.button>0||this.#re)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#re=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklab"===this.#ne?e=Si(e,0,1):"lab"===this.#ne&&(e=Si(100*e,0,100)),e!==this.#ie[0]&&(this.#ie[0]=e,this.#ye(),this.#Te(),this.#Re(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#Pe(t){if(t.button>0||this.#re)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#re=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=Si(i,0,1),n=Si(n,0,1);let[a,r,o]=this.#ie;"lab"===this.#ne?(r=250*i-125,o=250*(1-n)-125):"oklab"===this.#ne&&(r=.8*i-.4,o=.8*(1-n)-.4),this.#ie=[a,r,o],this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#De(),this.#ze(),this.#Ee(),this.#ke(),this.#Ce()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#ue(t){if(t.button>0||this.#re)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#re=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#se&&(this.#se=e,this.#Me(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#De(),this.#Re(),this.#Be(),this.#ye(),this.#ze(),this.#Ee(),this.#Me(),this.#ke(),this.#Ce(),this.#be()}#De(){let t,e,[,i,s]=this.#ie;"lab"===this.#ne?(t=i<-125?"calc(0% - 18px)":i>125?"calc(100% + 18px)":(i+125)/250*100+"%",e=s<-125?"calc(0% - 18px)":s>125?"calc(100% + 18px)":100-(s+125)/250*100+"%"):"oklab"===this.#ne&&(t=i<-.4?"calc(0% - 18px)":i>.4?"calc(100% + 18px)":(i+.4)/.8*100+"%",e=s<-.4?"calc(0% - 18px)":s>.4?"calc(100% + 18px)":100-(s+.4)/.8*100+"%"),this["#planar-slider-marker"].style.left=t,this["#planar-slider-marker"].style.top=e}#Re(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[n]=this.#ie;e.clearRect(0,0,i,s);for(let t=0;t<=i;t+=1){let a=[];for(let e=0;e<=s;e+=10){let r,o=t/i,l=1-e/s;"lab"===this.#ne?r={space:"lab",coords:[n,250*o-125,250*l-125]}:"oklab"===this.#ne&&(r={space:"oklab",coords:[n,.8*o-.4,.8*l-.4]}),a.push(r)}let r=e.createLinearGradient(t,0,i,s);for(let t=0;t<a.length;t+=1){let e=a[t];r.addColorStop(t/a.length,zi(e))}e.fillStyle=r,e.fillRect(t,0,1,s)}}async#Be(){if("none"===this.#oe)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this["#planar-slider-gamut-svg"].clientWidth,e=this["#planar-slider-gamut-svg"].clientHeight,i=Math.sqrt(Math.pow(t/2,2)+Math.pow(e/2,2)),s={x:t/2,y:e/2},[n]=this.#ie,a=[];for(let r=0;r<360;r+=3){let o;for(let a=i;a>=0;a-=15){let i,l,h=Ti({x:t/2,y:e/2-a},s,r);"lab"===this.#ne?(i=h.x/t*250-125,l=-(h.y/e*250-125)):"oklab"===this.#ne&&(i=h.x/t*.8-.4,l=-(h.y/e*.8-.4));let[d,c,u]=Ci({space:this.#ne,coords:[n,i,l]},"xyz-d65").coords;if(await this.#ae.isColorInGamut(d,c,u,this.#oe)){o=a;break}}for(let l=o;l<=i;l+=1){let i,o,h=Ti({x:t/2,y:e/2-l},s,r);"lab"===this.#ne?(i=h.x/t*250-125,o=-(h.y/e*250-125)):"oklab"===this.#ne&&(i=h.x/t*.8-.4,o=-(h.y/e*.8-.4));let[d,c,u]=Ci({space:this.#ne,coords:[n,i,o]},"xyz-d65").coords;if(!1===await this.#ae.isColorInGamut(d,c,u,this.#oe)){a.push(h);break}}}if(0===a.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=a.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#Te=Yn(this.#Be,40,this);#ye(){let[t]=this.#ie;"oklab"===this.#ne?this["#lightness-slider-marker"].style.left=100*t+"%":"lab"===this.#ne&&(this["#lightness-slider-marker"].style.left=t+"%")}#ze(){let[,t,e]=this.#ie,i=[];if("oklab"===this.#ne)for(let s=0;s<=1;s+=.02)i.push({space:"oklab",coords:[s,t,e]});else if("lab"===this.#ne)for(let s=0;s<=100;s+=2)i.push({space:"lab",coords:[s,t,e]});i=i.map((t=>zi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${i.join(",")})`}async#Ee(){if("none"===this.#oe)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ie,a=null;for(let r=0;r<=e;r+=i){let i=r/e,o=!1;if("lab"===this.#ne){let[t,e,a]=Ci({space:this.#ne,coords:[100*i,s,n]},"xyz-d65").coords;o=await this.#ae.isColorInGamut(t,e,a,this.#oe)}else if("oklab"===this.#ne){let[t,e,a]=Ci({space:this.#ne,coords:[i,s,n]},"xyz-d65").coords;o=await this.#ae.isColorInGamut(t,e,a,this.#oe)}o?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#Me(){this["#alpha-slider-marker"].style.left=100*this.#se+"%"}#ke(){let[t,e,i]=this.#ie,s=[{space:this.#ne,coords:[t,e,i],alpha:0},{space:this.#ne,coords:[t,e,i],alpha:1}];s=s.map((t=>zi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ne} to right, ${s.join(",")})`}async#Ce(){if("none"===this.#oe)this["#planar-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{let[t,e,i]=Ci({space:this.#ne,coords:this.#ie},"xyz-d65").coords;await this.#ae.isColorInGamut(t,e,i,this.#oe)?(this["#planar-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#planar-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#be(){this["#lightness-slider-label"].hidden=!this.#le,this["#alpha-slider-label"].hidden=!this.#le}#ge(){if(0===this.#ae.gamuts.length)this["#gamut-hints-menu-item"].hidden=!0,this["#gamut-hints-menu"].innerHTML="";else{let t='\n          <x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem>\n          <hr/>\n        ';for(let e of this.#ae.gamuts)t+=`\n            <x-menuitem value="${e}"><x-label>${this.#ae.getGamutLabel(e)}</x-label></x-menuitem>\n          `;this["#gamut-hints-menu"].innerHTML=t,this["#gamut-hints-menu-item"].hidden=!1}for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#oe;this["#labels-menu-item"].toggled=this.#le}}void 0===customElements.get("x-labplanarsliders")&&customElements.define("x-labplanarsliders",aa);const ra=150,oa=.4;class la extends HTMLElement{static#z=Us`<template><div id="hue-slider" class="slider" part="slider"><div id="hue-slider-track" class="slider-track"><svg id="hue-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="hue-slider-marker" class="slider-marker"><span id="hue-slider-label" class="slider-label">H</span></div></div></div><div id="chroma-slider" class="slider" part="slider"><div id="chroma-slider-track" class="slider-track"><svg id="chroma-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="chroma-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="chroma-slider-marker" class="slider-marker"><span id="chroma-slider-label" class="slider-label">C</span></div></div></div><div id="lightness-slider" class="slider" part="slider"><div id="lightness-slider-track" class="slider-track"><svg id="lightness-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="lightness-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="lightness-slider-marker" class="slider-marker"><span id="lightness-slider-label" class="slider-label">L</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-label><x-message href="#color-picker" autocapitalize>Color Picker</x-message></x-label><x-menuitem id="gamut-hints-menu-item"><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Ys`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}.slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}
`;get value(){let[t,e,i]=this.#ie;return[t,e,i,this.#se]}set value([t,e,i,s]){this.#ie=[t,e,i],this.#se=s,this.#Xt()}get space(){return this.#ne}set space(t){this.#ne!==t&&(this.#ne=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#ae;#$t;#re=!1;#ne="lch";#oe="srgb";#le=!0;#ie=[0,0,0];#se=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(la.#z.content,!0)),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,la.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#Oe(t))),this["#chroma-slider"].addEventListener("pointerdown",(t=>this.#Ne(t))),this["#lightness-slider"].addEventListener("pointerdown",(t=>this.#he(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ue(t))),this["#context-menu"].addEventListener("click",(t=>this.#pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#me(t)))}connectedCallback(){this.#ae=i(this,"x-colorpicker"),this.#oe=Xs(Vn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#le=Vn.getConfig("x-colorpicker:labels",!0),Vn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){Vn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Xs(i||"srgb","color.js");t!==this.#oe&&(this.#oe=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#le&&(this.#le=t,this.#be())}}#pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#oe&&(this.#oe=e.value,this.#Xt(),Vn.setConfig("x-colorpicker:gamutHints",Xs(this.#oe,"css"))):"labels"===e.value&&(this.#le=!e.toggled,Vn.setConfig("x-colorpicker:labels",this.#le),this.#Xt()))}#me(){this.#ge()}#Oe(t){if(t.button>0||this.#re)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#re=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),360*e!==this.#ie[2]&&(this.#ie[2]=360*e,this.#He(),this.#Ie(),this.#je(),this.#ze(),this.#Ee(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#Ne(t){if(t.button>0||this.#re)return;let e,i,s=this["#chroma-slider-track"].getBoundingClientRect();this.#re=!0,this["#chroma-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklch"===this.#ne?e=Si(e*oa,0,oa):"lch"===this.#ne&&(e=Si(e*ra,0,ra)),e!==this.#ie[1]&&(this.#ie[1]=e,this.#Ge(),this.#Fe(),this.#ze(),this.#Ee(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#chroma-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#chroma-slider"].addEventListener("pointerup",i=()=>{this["#chroma-slider"].removeEventListener("pointermove",e),this["#chroma-slider"].removeEventListener("pointerup",i),this["#chroma-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#chroma-slider"].addEventListener("pointercancel",i)}#he(t){if(t.button>0||this.#re)return;let e,i,s=this["#lightness-slider-track"].getBoundingClientRect();this.#re=!0,this["#lightness-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;"oklch"===this.#ne?e=Si(e,0,1):"lch"===this.#ne&&(e=Si(100*e,0,100)),e!==this.#ie[0]&&(this.#ie[0]=e,this.#Ge(),this.#je(),this.#ye(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#lightness-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#lightness-slider"].addEventListener("pointerup",i=()=>{this["#lightness-slider"].removeEventListener("pointermove",e),this["#lightness-slider"].removeEventListener("pointerup",i),this["#lightness-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#lightness-slider"].addEventListener("pointercancel",i)}#ue(t){if(t.button>0||this.#re)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#re=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#se&&(this.#se=e,this.#Me(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#He(),this.#Xe(),this.#Ge(),this.#Fe(),this.#Ie(),this.#je(),this.#ye(),this.#ze(),this.#Ee(),this.#Me(),this.#ke(),this.#Ce(),this.#be()}#He(){let[,,t]=this.#ie;this["#hue-slider-marker"].style.left=t/360*100+"%"}#Xe(){let t=[];if("oklch"===this.#ne)for(let e=0;e<=360;e+=5)t.push({space:"oklch",coords:[.8,oa,e]});else if("lch"===this.#ne)for(let e=0;e<=360;e+=5)t.push({space:"lch",coords:[75,ra,e]});t=t.map((t=>zi(t))),this["#hue-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${t.join(",")})`}async#Ge(){if("none"===this.#oe)this["#hue-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#hue-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#ie,a=null;for(let r=0;r<=e;r+=i){let i=r/e,[o,l,h]=Ci({space:this.#ne,coords:[s,n,360*i]},"xyz-d65").coords;await this.#ae.isColorInGamut(o,l,h,this.#oe)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#Fe(){let[,t]=this.#ie;"oklch"===this.#ne?this["#chroma-slider-marker"].style.left=t>oa?"calc(100% + 18px)":t/oa*100+"%":"lch"===this.#ne&&(this["#chroma-slider-marker"].style.left=t>ra?"calc(100% + 18px)":t/ra*100+"%")}#Ie(){let[,,t]=this.#ie,e=[];if("oklch"===this.#ne)for(let i=0;i<=oa;i+=.03)e.push({space:"oklch",coords:[.75,i,t]});else if("lch"===this.#ne)for(let i=0;i<=ra;i+=10)e.push({space:"lch",coords:[75,i,t]});e=e.map((t=>zi(t))),this["#chroma-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${e.join(",")})`}async#je(){if("none"===this.#oe)this["#chroma-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#chroma-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#ie,a=null;for(let r=0;r<=e;r+=i){let i=r/e,o="lch"===this.#ne?ra:oa,[l,h,d]=Ci({space:this.#ne,coords:[s,i*o,n]},"xyz-d65").coords;await this.#ae.isColorInGamut(l,h,d,this.#oe)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#chroma-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#chroma-slider-gamut-path"].removeAttribute("d")}}#ye(){let[t]=this.#ie;"oklch"===this.#ne?this["#lightness-slider-marker"].style.left=100*t+"%":"lch"===this.#ne&&(this["#lightness-slider-marker"].style.left=t+"%")}#ze(){let[,t,e]=this.#ie,i=[];if("oklch"===this.#ne)for(let s=0;s<=1;s+=.02)i.push({space:"oklch",coords:[s,t,e]});else if("lch"===this.#ne)for(let s=0;s<=100;s+=2)i.push({space:"lch",coords:[s,t,e]});i=i.map((t=>zi(t))),this["#lightness-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${i.join(",")})`}async#Ee(){if("none"===this.#oe)this["#lightness-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#lightness-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ie,a=null;for(let r=0;r<=e;r+=i){let i=r/e,o=!1;if("lch"===this.#ne){let[t,e,a]=Ci({space:this.#ne,coords:[100*i,s,n]},"xyz-d65").coords;o=await this.#ae.isColorInGamut(t,e,a,this.#oe)}else if("oklch"===this.#ne){let[t,e,a]=Ci({space:this.#ne,coords:[i,s,n]},"xyz-d65").coords;o=await this.#ae.isColorInGamut(t,e,a,this.#oe)}o?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#lightness-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#lightness-slider-gamut-path"].removeAttribute("d")}}#Me(){this["#alpha-slider-marker"].style.left=100*this.#se+"%"}#ke(){let[t,e,i]=this.#ie,s=[{space:this.#ne,coords:[t,e,i],alpha:0},{space:this.#ne,coords:[t,e,i],alpha:1}];s=s.map((t=>zi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ne} to right, ${s.join(",")})`}async#Ce(){if("none"===this.#oe)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#chroma-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn");else{let[t,e,i]=Ci({space:this.#ne,coords:this.#ie},"xyz-d65").coords;await this.#ae.isColorInGamut(t,e,i,this.#oe)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#chroma-slider-marker"].removeAttribute("data-warn"),this["#lightness-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#chroma-slider-marker"].setAttribute("data-warn",""),this["#lightness-slider-marker"].setAttribute("data-warn",""))}}#be(){this["#hue-slider-label"].hidden=!this.#le,this["#chroma-slider-label"].hidden=!this.#le,this["#lightness-slider-label"].hidden=!this.#le,this["#alpha-slider-label"].hidden=!this.#le}#ge(){if(0===this.#ae.gamuts.length)this["#gamut-hints-menu-item"].hidden=!0,this["#gamut-hints-menu"].innerHTML="";else{let t='\n          <x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem>\n          <hr/>\n        ';for(let e of this.#ae.gamuts)t+=`\n            <x-menuitem value="${e}"><x-label>${this.#ae.getGamutLabel(e)}</x-label></x-menuitem>\n          `;this["#gamut-hints-menu"].innerHTML=t,this["#gamut-hints-menu-item"].hidden=!1}for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#oe;this["#labels-menu-item"].toggled=this.#le}}void 0===customElements.get("x-lchlinearsliders")&&customElements.define("x-lchlinearsliders",la);const ha=150,da=.4;class ca extends HTMLElement{static#z=Us`<template><div id="hue-slider" part="slider"><div id="hue-slider-track"><svg id="hue-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path"></path></svg><div id="hue-slider-marker"><span id="hue-slider-label">H</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-label><x-message href="#color-picker" autocapitalize>Color Picker</x-message></x-label><x-menuitem id="gamut-hints-menu-item"><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Ys`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}#hue-slider{width:100%;height:35px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}#hue-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#hue-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#hue-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}#hue-slider-gamut-svg{width:100%;height:100%}#hue-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#hue-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0%;left:0%;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size) / -2), calc(var(--marker-size) / -2));background:rgba(0, 0, 0, 0.3);border:3px solid white;border-radius:999px;box-shadow:0 0 3px black;--marker-size: 20px;}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255, 255, 255, 0.9);font-size:1.125rem;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%;overflow:hidden;border-radius:inherit}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}
`;get value(){let[t,e,i]=this.#ie;return[t,e,i,this.#se]}set value([t,e,i,s]){this.#ie=[t,e,i],this.#se=s,this.#Xt()}get space(){return this.#ne}set space(t){this.#ne!==t&&(this.#ne=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#ae;#$t;#Le=new ResizeObserver((()=>this.#Ae()));#re=!1;#ne="lch";#oe="srgb";#le=!0;#ie=[0,0,0];#se=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(ca.#z.content,!0)),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,ca.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#Oe(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#Pe(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ue(t))),this["#context-menu"].addEventListener("click",(t=>this.#pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#me(t)))}connectedCallback(){this.#ae=i(this,"x-colorpicker"),this.#oe=Xs(Vn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#le=Vn.getConfig("x-colorpicker:labels",!0),this.#Le.observe(this),Vn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){this.#Le.unobserve(this),Vn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Xs(i||"srgb","color.js");t!==this.#oe&&(this.#oe=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#le&&(this.#le=t,this.#be())}}#pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#oe&&(this.#oe=e.value,this.#Xt(),Vn.setConfig("x-colorpicker:gamutHints",Xs(this.#oe,"css"))):"labels"===e.value&&(this.#le=!e.toggled,Vn.setConfig("x-colorpicker:labels",this.#le),this.#Xt()))}#me(){this.#ge()}#Ae(){this.#Te()}#Oe(t){if(t.button>0||this.#re)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#re=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this["#planar-slider-gamut-path"].style.transition="d 60ms ease",this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),360*e!==this.#ie[2]&&(this.#ie[2]=360*e,this.#He(),this.#Ge(),this.#De(),this.#Re(),this.#Te(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this["#planar-slider-gamut-path"].style.transition="none",this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#Pe(t){if(t.button>0||this.#re)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#re=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=Si(i,0,1),n=Si(n,0,1);let[a,r,o]=this.#ie;"lch"===this.#ne?(a=100*i,r=(1-n)*ha):"oklch"===this.#ne&&(a=i,r=(1-n)*da),this.#ie=[a,r,o],this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ge(),this.#De(),this.#ke(),this.#Ce()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#ue(t){if(t.button>0||this.#re)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#re=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#se&&(this.#se=e,this.#Me(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#He(),this.#Xe(),this.#Ge(),this.#De(),this.#Re(),this.#Be(),this.#Me(),this.#ke(),this.#Ce(),this.#be()}#He(){let[,,t]=this.#ie;this["#hue-slider-marker"].style.left=t/360*100+"%"}#Xe(){let t=[];if("oklch"===this.#ne)for(let e=0;e<=360;e+=5)t.push({space:"oklch",coords:[.8,da,e]});else if("lch"===this.#ne)for(let e=0;e<=360;e+=5)t.push({space:"lch",coords:[75,ha,e]});t=t.map((t=>zi(t))),this["#hue-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${t.join(",")})`}async#Ge(){if("none"===this.#oe)this["#hue-slider-gamut-path"].removeAttribute("d");else{let[t,e]=this.#ie,i=this["#hue-slider"].clientWidth,s=1/window.devicePixelRatio,n=[];{let a=null;for(let r=0;r<=i;r+=s){let s=r/i,[o,l,h]=Ci({space:this.#ne,coords:[t,e,360*s]},"xyz-d65").coords;await this.#ae.isColorInGamut(o,l,h,this.#oe)?(null===a&&(a=[],n.push(a)),a.push(100*s)):a=null}n=n.map((t=>[t.at(0),t.at(-1)]))}if(n.length>0){let t=n.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#De(){if("lch"===this.#ne){let[t,e]=this.#ie,i=t,s=100-e/ha*100;this["#planar-slider-marker"].style.left=`${i}%`,this["#planar-slider-marker"].style.top=`${s}%`}else if("oklch"===this.#ne){let[t,e]=this.#ie,i=100*t,s=100-e/da*100;this["#planar-slider-marker"].style.left=`${i}%`,this["#planar-slider-marker"].style.top=`${s}%`}}#Re(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[,,n]=this.#ie;e.clearRect(0,0,t.width,t.height);for(let t=0;t<=i;t+=1){let a=[];for(let e=0;e<=s;e+=10){let r,o=t/i,l=1-e/s;"lch"===this.#ne?r={space:"lch",coords:[100*o,l*ha,n]}:"oklch"===this.#ne&&(r={space:"oklch",coords:[o,l*da,n]}),a.push(r)}let r=e.createLinearGradient(t,0,i,s);for(let t=0;t<a.length;t+=1){let e=a[t];r.addColorStop(t/a.length,zi(e))}e.fillStyle=r,e.fillRect(t,0,1,s)}}async#Be(){if("none"===this.#oe)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this.clientWidth,e=this.clientHeight,i=1/window.devicePixelRatio,[,,s]=this.#ie,n=[],a=(t,e,i)=>{let s="lch"===this.#ne?{space:"lch",coords:[100*t,e*ha,i]}:{space:"oklch",coords:[t,e*da,i]},[n,a,r]=Ci(s,"xyz-d65").coords;return this.#ae.isColorInGamut(n,a,r,this.#oe)};for(let r=0;r<=t;r+=i){let o=e;for(;o>=0;){if(!await a(r/t,1-o/e,s))break;o-=10}let l=Math.max(o+10,e);for(;o<=l&&(o+=i,!a(r/t,1-o/e,s)););n.push([r,o])}if(0===n.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=n.map((([t,e],i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ");this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#Te=Yn(this.#Be,40,this);#Me(){this["#alpha-slider-marker"].style.left=100*this.#se+"%"}#ke(){let[t,e,i]=this.#ie,s=[{space:this.#ne,coords:[t,e,i],alpha:0},{space:this.#ne,coords:[t,e,i],alpha:1}];s=s.map((t=>zi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ne} to right, ${s.join(",")})`}async#Ce(){if("none"===this.#oe)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else{let[t,e,i]=Ci({space:this.#ne,coords:this.#ie},"xyz-d65").coords;await this.#ae.isColorInGamut(t,e,i,this.#oe)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#be(){this["#hue-slider-label"].hidden=!this.#le,this["#alpha-slider-label"].hidden=!this.#le}#ge(){if(0===this.#ae.gamuts.length)this["#gamut-hints-menu-item"].hidden=!0,this["#gamut-hints-menu"].innerHTML="";else{let t='\n          <x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem>\n          <hr/>\n        ';for(let e of this.#ae.gamuts)t+=`\n            <x-menuitem value="${e}"><x-label>${this.#ae.getGamutLabel(e)}</x-label></x-menuitem>\n          `;this["#gamut-hints-menu"].innerHTML=t,this["#gamut-hints-menu-item"].hidden=!1}for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#oe;this["#labels-menu-item"].toggled=this.#le}}void 0===customElements.get("x-lchplanarsliders")&&customElements.define("x-lchplanarsliders",ca);class ua extends HTMLElement{static#z=Us`<template><div id="coord-0-slider" class="slider" part="slider"><div id="coord-0-slider-track" class="slider-track"><svg id="coord-0-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-0-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-0-slider-marker" class="slider-marker"><span id="coord-0-slider-label" class="slider-label"></span></div></div></div><div id="coord-1-slider" class="slider" part="slider"><div id="coord-1-slider-track" class="slider-track"><svg id="coord-1-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-1-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-1-slider-marker" class="slider-marker"><span id="coord-1-slider-label" class="slider-label"></span></div></div></div><div id="coord-2-slider" class="slider" part="slider"><div id="coord-2-slider-track" class="slider-track"><svg id="coord-2-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="coord-2-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="coord-2-slider-marker" class="slider-marker"><span id="coord-2-slider-label" class="slider-label"></span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-label><x-message href="#color-picker" autocapitalize>Color Picker</x-message></x-label><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem><x-menuitem value="hwb"><x-label>HWB</x-label></x-menuitem><hr><x-menuitem value="okhsv" data-srgb-only><x-label>OK HSV</x-label></x-menuitem><x-menuitem value="okhsl" data-srgb-only><x-label>OK HSL</x-label></x-menuitem><x-menuitem value="hsluv" data-srgb-only><x-label>HSLuv</x-label></x-menuitem><hr><x-menuitem value="rgb"><x-label>RGB</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem id="gamut-hints-menu-item"><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Ys`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}.slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}
`;get value(){let t=this.#_e();if("rgb"===t){let[t,e,i]=this.#ie;return[t,e,i,this.#se]}if("hsv"===t){let[e,i,s]=this.#ie,[n,a,r]=Ci({space:t,coords:[360*e,100*i,100*s]},"srgb").coords;return[n,a,r,this.#se]}if("okhsv"===t){let[e,i,s]=this.#ie,[n,a,r]=Ci({space:t,coords:[360*e,i,s]},"srgb").coords;return[n,a,r,this.#se]}if("hsl"===t||"hsluv"===t){let[e,i,s]=this.#ie,[n,a,r]=Ci({space:t,coords:[360*e,100*i,100*s]},"srgb").coords;return[n,a,r,this.#se]}if("okhsl"===t){let[e,i,s]=this.#ie,[n,a,r]=Ci({space:t,coords:[360*e,i,s]},"srgb").coords;return[n,a,r,this.#se]}{let[t,e,i]=this.#ie,[s,n,a]=Ci({space:"hwb",coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#se]}}set value([t,e,i,s]){let n=this.#_e();if("rgb"===n)this.#ie=[t,e,i],this.#se=s;else if("hsv"===n){let[a,r,o]=Ci({space:"srgb",coords:[t,e,i]},n).coords;this.#ie=[a/360,r/100,o/100],this.#se=s}else if("okhsv"===n){let[a,r,o]=Ci({space:"srgb",coords:[t,e,i]},n).coords;this.#ie=[a/360,r,o],this.#se=s}else if("hsl"===n||"hsluv"===n){let[a,r,o]=Ci({space:"srgb",coords:[t,e,i]},n).coords;this.#ie=[a/360,r/100,o/100],this.#se=s}else if("okhsl"===n){let[a,r,o]=Ci({space:"srgb",coords:[t,e,i]},n).coords;this.#ie=[a/360,r,o],this.#se=s}else if("hwb"===n){let[n,a,r]=Ci({space:"srgb",coords:[t,e,i]},"hwb").coords;this.#ie=[n/360,a/100,r/100],this.#se=s}for(let t=0;t<this.#ie.length;t+=1)(null===this.#ie[t]||Number.isNaN(this.#ie[t]))&&(this.#ie[t]=0);this.#Xt()}get space(){return this.#ne}set space(t){this.#ne!==t&&(this.#ne=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#ae;#$t;#re=!1;#ne="srgb";#Ze="hsv";#oe="srgb";#le=!0;#ie=[0,0,0];#se=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(ua.#z.content,!0)),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,ua.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#coord-0-slider"].addEventListener("pointerdown",(t=>this.#Ue(t))),this["#coord-1-slider"].addEventListener("pointerdown",(t=>this.#Ye(t))),this["#coord-2-slider"].addEventListener("pointerdown",(t=>this.#Ve(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ue(t))),this["#context-menu"].addEventListener("click",(t=>this.#pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#me(t)))}connectedCallback(){this.#ae=i(this,"x-colorpicker"),this.#Ze=Vn.getConfig(`${this.localName}:model`,"hsv"),this.#oe=Xs(Vn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#le=Vn.getConfig("x-colorpicker:labels",!0),Vn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){Vn.removeEventListener("configchange",this.#$t)}#_e(){return"okhsv"===this.#Ze?"srgb"===this.#ne?"okhsv":"hsv":"okhsl"===this.#Ze?"srgb"===this.#ne?"okhsl":"hsl":"hsluv"===this.#Ze?"srgb"===this.#ne?"hsluv":"hsl":this.#Ze}#We(){return"none"===this.#oe||"srgb"===this.#oe&&["srgb","srgb-linear"].includes(this.#ne)||"p3"===this.#oe&&["srgb","srgb-linear","p3"].includes(this.#ne)||"a98rgb"===this.#oe&&["srgb","srgb-linear","a98rgb"].includes(this.#ne)||"rec2020"===this.#oe&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#ne)||"prophoto"===this.#oe?"none":this.#oe}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#Ze){let[e,i,s]=this.value;this.#Ze=t,this.value=[e,i,s,this.#se]}}else if("x-colorpicker:gamutHints"===e){let t=Xs(i||"srgb","color.js");t!==this.#oe&&(this.#oe=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#le&&(this.#le=t,this.#be())}}#pe(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#color-model-menu"]){let t=e.value,[i,s,n]=this.value;this.#Ze=t,Vn.setConfig(`${this.localName}:model`,t),this.value=[i,s,n,this.#se]}else e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#oe&&(this.#oe=e.value,this.#Xt(),Vn.setConfig("x-colorpicker:gamutHints",Xs(this.#oe,"css"))):"labels"===e.value&&(this.#le=!e.toggled,Vn.setConfig("x-colorpicker:labels",this.#le),this.#Xt())}#me(){this.#ge()}#Ue(t){if(t.button>0||this.#re)return;let e,i,s=this["#coord-0-slider-track"].getBoundingClientRect();this.#re=!0,this["#coord-0-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#ie[0]&&(this.#ie[0]=e,this.#qe(),this.#Ke(),this.#Je(),this.#Qe(),this.#ti(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#coord-0-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#coord-0-slider"].addEventListener("pointerup",i=()=>{this["#coord-0-slider"].removeEventListener("pointermove",e),this["#coord-0-slider"].removeEventListener("pointerup",i),this["#coord-0-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#coord-0-slider"].addEventListener("pointercancel",i)}#Ye(t){if(t.button>0||this.#re)return;let e,i,s=this.#_e(),n=this["#coord-1-slider-track"].getBoundingClientRect();this.#re=!0,this["#coord-1-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let a=t=>{let e=(t-n.x)/n.width;e=Si(e,0,1),e!==this.#ie[1]&&(this.#ie[1]=e,"rgb"===s&&this.#ei(),this.#ii(),this.#si(),this.#Ke(),this.#Qe(),this.#ti(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};a(t.clientX),this["#coord-1-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&a(e.clientX)}),this["#coord-1-slider"].addEventListener("pointerup",i=()=>{this["#coord-1-slider"].removeEventListener("pointermove",e),this["#coord-1-slider"].removeEventListener("pointerup",i),this["#coord-1-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#coord-1-slider"].addEventListener("pointercancel",i)}#Ve(t){if(t.button>0||this.#re)return;let e,i,s=this.#_e(),n=this["#coord-2-slider-track"].getBoundingClientRect();this.#re=!0,this["#coord-2-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let a=t=>{let e=(t-n.x)/n.width;e=Si(e,0,1),e!==this.#ie[2]&&(this.#ie[2]=e,"rgb"===s&&(this.#ei(),this.#Ke()),this.#ii(),this.#Je(),this.#ni(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};a(t.clientX),this["#coord-2-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&a(e.clientX)}),this["#coord-2-slider"].addEventListener("pointerup",i=()=>{this["#coord-2-slider"].removeEventListener("pointermove",e),this["#coord-2-slider"].removeEventListener("pointerup",i),this["#coord-2-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#coord-2-slider"].addEventListener("pointercancel",i)}#ue(t){if(t.button>0||this.#re)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#re=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#se&&(this.#se=e,this.#Me(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#qe(),this.#ei(),this.#ii(),this.#si(),this.#Ke(),this.#Je(),this.#ni(),this.#Qe(),this.#ti(),this.#Me(),this.#ke(),this.#Ce(),this.#be()}#qe(){this["#coord-0-slider-marker"].style.left=100*this.#ie[0]+"%"}#ei(){let t=this.#_e();if("rgb"===t){let[,t,e]=this.#ie,i="srgb-linear"===this.#ne?"srgb-linear":"srgb",s=[{space:this.#ne,coords:[0,t,e]},{space:this.#ne,coords:[1,t,e]}];s=s.map((t=>zi(t))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let t="srgb-linear"===this.#ne?"srgb-linear":"srgb",e=[{space:this.#ne,coords:[1,0,0]},{space:this.#ne,coords:[1,1,0]},{space:this.#ne,coords:[0,1,0]},{space:this.#ne,coords:[0,1,1]},{space:this.#ne,coords:[0,0,1]},{space:this.#ne,coords:[1,0,1]},{space:this.#ne,coords:[1,0,0]}];e=e.map((t=>zi(t))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in ${t} to right, ${e})`}else if("okhsv"===t||"okhsl"===t){let t=[];for(let e=0;e<=360;e+=60)t.push({space:"okhsv",coords:[e,1,1]});t=t.map((t=>zi(Ci(t,"srgb")))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in srgb to right, ${t})`}else if("hsluv"===t){let t=[];for(let e=0;e<=360;e+=60)t.push({space:"okhsv",coords:[e,1,1]});t=t.map((t=>zi(Ci(t,"srgb")))).join(","),this["#coord-0-slider"].style.background=`linear-gradient(in srgb to right, ${t})`}}async#ii(){let t=this.#We();if("none"===t)this["#coord-0-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#_e(),s=this["#coord-0-slider"].clientWidth,n=1/window.devicePixelRatio,[,a,r]=this.#ie,o=null;for(let l=0;l<=s;l+=n){let n=l/s,h=!1;if("hsv"===i||"hsl"===i||"hwb"===i){let[e,i,s]=Ci({space:this.#Ze,coords:[360*n,100*a,100*r]},"srgb").coords,[o,l,d]=Ci({space:this.#ne,coords:[e,i,s]},"xyz-d65").coords;h=await this.#ae.isColorInGamut(o,l,d,t)}else if("rgb"===i){let[e,i,s]=Ci({space:this.#ne,coords:[n,a,r]},"xyz-d65").coords;h=await this.#ae.isColorInGamut(e,i,s,t)}h?(null===o&&(o=[],e.push(o)),o.push(100*n)):o=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-0-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-0-slider-gamut-path"].removeAttribute("d")}}#si(){this["#coord-1-slider-marker"].style.left=100*this.#ie[1]+"%"}#Ke(){let t=this.#_e();if("rgb"===t){let[t,,e]=this.#ie,i="srgb-linear"===this.#ne?"srgb-linear":"srgb",s=[{space:this.#ne,coords:[t,0,e]},{space:this.#ne,coords:[t,1,e]}];s=s.map((t=>zi(t))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let e,[i]=this.#ie,s="srgb-linear"===this.#ne?"srgb":this.space,n="srgb-linear"===this.#ne?"srgb-linear":"srgb";"hsv"===t?e=[{space:this.#ne,coords:Ci({space:"hsv",coords:[360*i,0,100]},s).coords},{space:this.#ne,coords:Ci({space:"hsv",coords:[360*i,100,100]},s).coords}]:"hsl"===t?e=[{space:this.#ne,coords:Ci({space:"hsl",coords:[360*i,0,50]},s).coords},{space:this.#ne,coords:Ci({space:"hsl",coords:[360*i,100,50]},s).coords}]:"hwb"===t&&(e=[{space:this.#ne,coords:Ci({space:"hwb",coords:[360*i,0,0]},s).coords},{space:this.#ne,coords:Ci({space:"hwb",coords:[360*i,100,0]},s).coords}]),e=e.map((t=>zi(t))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in ${n} to right, ${e})`}else if("okhsv"===t||"okhsl"===t){let[e]=this.#ie,i=[];for(let s=0;s<=1;s+=.01)i.push({space:t,coords:[360*e,s,"okhsv"===t?1:.65]});i=i.map((t=>zi(Ci(t,"srgb")))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in srgb to right, ${i})`}else if("hsluv"===t){let[e]=this.#ie,i=[];for(let s=0;s<=100;s+=1)i.push({space:t,coords:[360*e,s,65]});i=i.map((t=>zi(Ci(t,"srgb")))).join(","),this["#coord-1-slider"].style.background=`linear-gradient(in srgb to right, ${i})`}}async#Je(){let t=this.#We();if("none"===t)this["#coord-1-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#_e(),s=this["#coord-1-slider"].clientWidth,n=1/window.devicePixelRatio,[a,,r]=this.#ie,o=null;for(let l=0;l<=s;l+=n){let n=l/s,h=!1;if("hsv"===i||"hsl"===i||"hwb"===i){let[e,i,s]=Ci({space:this.#Ze,coords:[360*a,100*n,100*r]},"srgb").coords,[o,l,d]=Ci({space:this.#ne,coords:[e,i,s]},"xyz-d65").coords;h=await this.#ae.isColorInGamut(o,l,d,t)}else if("rgb"===i){let[e,i,s]=Ci({space:this.#ne,coords:[a,n,r]},"xyz-d65").coords;h=await this.#ae.isColorInGamut(e,i,s,t)}h?(null===o&&(o=[],e.push(o)),o.push(100*n)):o=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-1-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-1-slider-gamut-path"].removeAttribute("d")}}#ni(){this["#coord-2-slider-marker"].style.left=100*this.#ie[2]+"%"}#Qe(){let t=this.#_e();if("rgb"===t){let[t,e]=this.#ie,i="srgb-linear"===this.#ne?"srgb-linear":"srgb",s=[{space:this.#ne,coords:[t,e,0]},{space:this.#ne,coords:[t,e,1]}];s=s.map((t=>zi(t))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("hsv"===t||"hsl"===t||"hwb"===t){let e="srgb-linear"===this.#ne?"srgb":this.#ne,i="srgb-linear"===this.#ne?"srgb-linear":"srgb",s=[];if("hsv"===t){let[t,i]=this.#ie;s=[{space:this.#ne,coords:Ci({space:"hsv",coords:[360*t,100*i,0]},e).coords},{space:this.#ne,coords:Ci({space:"hsv",coords:[360*t,100*i,100]},e).coords}]}else if("hsl"===t){let[t,i]=this.#ie;s=[{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,100*i,0]},e).coords},{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,100*i,50]},e).coords},{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,100*i,100]},e).coords}]}else if("hwb"===t){let[t,i]=this.#ie;for(let n=0;n<=100;n+=10)s.push({space:this.#ne,coords:Ci({space:"hwb",coords:[360*t,100*i,n]},e).coords})}s=s.map((t=>zi(t))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in ${i} to right, ${s})`}else if("okhsv"===t||"okhsl"===t){let[e,i]=this.#ie,s=[];for(let n=0;n<=1;n+=.01)s.push({space:t,coords:[360*e,i,n]});s=s.map((t=>zi(Ci(t,"srgb")))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in srgb to right, ${s})`}else if("hsluv"===t){let[e,i]=this.#ie,s=[];for(let n=0;n<=100;n+=1)s.push({space:t,coords:[360*e,100*i,n]});s=s.map((t=>zi(Ci(t,"srgb")))).join(","),this["#coord-2-slider"].style.background=`linear-gradient(in srgb to right, ${s})`}}async#ti(){let t=this.#We();if("none"===t)this["#coord-2-slider-gamut-path"].removeAttribute("d");else{let e=[];{let i=this.#_e(),s=this["#coord-2-slider"].clientWidth,n=1/window.devicePixelRatio,[a,r]=this.#ie,o=null;for(let l=0;l<=s;l+=n){let n=!1,h=l/s;if("hsv"===i||"hsl"===i||"hwb"===i){let[e,i,s]=Ci({space:this.#Ze,coords:[360*a,100*r,100*h]},"srgb").coords,[o,l,d]=Ci({space:this.#ne,coords:[e,i,s]},"xyz-d65").coords;n=await this.#ae.isColorInGamut(o,l,d,t)}else if("rgb"===i){let[e,i,s]=Ci({space:this.#ne,coords:[a,r,h]},"xyz-d65").coords;n=await this.#ae.isColorInGamut(e,i,s,t)}n?(null===o&&(o=[],e.push(o)),o.push(100*h)):o=null}e=e.map((t=>[t.at(0),t.at(-1)]))}if(e.length>0){let t=e.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#coord-2-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#coord-2-slider-gamut-path"].removeAttribute("d")}}#Me(){this["#alpha-slider-marker"].style.left=100*this.#se+"%"}#ke(){let t=this.#_e();if("rgb"===t){let[t,e,i]=this.#ie,s=[{space:this.#ne,coords:[t,e,i],alpha:0},{space:this.#ne,coords:[t,e,i],alpha:1}];s=s.map((t=>zi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${s})`}else if("okhsv"===t||"okhsl"===t){let[e,i,s]=this.#ie,n="srgb-linear"===this.#ne?"srgb":this.#ne,a=[];for(let r of[0,1])a.push({space:this.#ne,coords:Ci({space:t,coords:[360*e,i,s]},n).coords,alpha:r});a=a.map((t=>zi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${a})`}else{let[e,i,s]=this.#ie,n="srgb-linear"===this.#ne?"srgb":this.#ne,a=[];for(let r of[0,1])a.push({space:this.#ne,coords:Ci({space:t,coords:[360*e,100*i,100*s]},n).coords,alpha:r});a=a.map((t=>zi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(to right, ${a})`}}async#Ce(){let t=this.#We();if("none"===t)this["#coord-0-slider-marker"].removeAttribute("data-warn"),this["#coord-1-slider-marker"].removeAttribute("data-warn"),this["#coord-2-slider-marker"].removeAttribute("data-warn");else{let e=this.#_e(),[i,s,n]=this.#ie,a=!1;if("hsv"===e||"hsl"===e||"hwb"===e){let[e,r,o]=Ci({space:this.#Ze,coords:[360*i,100*s,100*n]},"srgb").coords,[l,h,d]=Ci({space:this.#ne,coords:[e,r,o]},"xyz-d65").coords;a=await this.#ae.isColorInGamut(l,h,d,t)}else if("rgb"===e){let[e,r,o]=Ci({space:this.#ne,coords:[i,s,n]},"xyz-d65").coords;a=await this.#ae.isColorInGamut(e,r,o,t)}a?(this["#coord-0-slider-marker"].removeAttribute("data-warn"),this["#coord-1-slider-marker"].removeAttribute("data-warn"),this["#coord-2-slider-marker"].removeAttribute("data-warn")):(this["#coord-0-slider-marker"].setAttribute("data-warn",""),this["#coord-1-slider-marker"].setAttribute("data-warn",""),this["#coord-2-slider-marker"].setAttribute("data-warn",""))}}#be(){if(this.#le){let t=this.#_e();"hsv"===t||"okhsv"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="S",this["#coord-2-slider-label"].textContent="V"):"hsl"===t||"okhsl"===t||"hsluv"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="S",this["#coord-2-slider-label"].textContent="L"):"hwb"===t?(this["#coord-0-slider-label"].textContent="H",this["#coord-1-slider-label"].textContent="W",this["#coord-2-slider-label"].textContent="B"):"rgb"===t&&(this["#coord-0-slider-label"].textContent="R",this["#coord-1-slider-label"].textContent="G",this["#coord-2-slider-label"].textContent="B"),this["#alpha-slider-label"].textContent="α"}else this["#coord-0-slider-label"].textContent="",this["#coord-1-slider-label"].textContent="",this["#coord-2-slider-label"].textContent="",this["#alpha-slider-label"].textContent=""}#ge(){{let t=this.#_e();for(let e of this["#color-model-menu"].querySelectorAll("x-menuitem"))e.toggled=e.value===t,e.hidden=e.hasAttribute("data-srgb-only")&&"srgb"!==this.#ne;for(let t of this["#color-model-menu"].querySelectorAll("hr"))t.hidden="srgb"!==this.#ne&&"rgb"!==t.nextElementSibling?.value}if(0===this.#ae.gamuts.length)this["#gamut-hints-menu-item"].hidden=!0,this["#gamut-hints-menu"].innerHTML="";else{let t='\n          <x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem>\n          <hr/>\n        ';for(let e of this.#ae.gamuts)t+=`\n            <x-menuitem value="${e}"><x-label>${this.#ae.getGamutLabel(e)}</x-label></x-menuitem>\n          `;this["#gamut-hints-menu"].innerHTML=t,this["#gamut-hints-menu-item"].hidden=!1}for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#oe;this["#labels-menu-item"].toggled=this.#le}}void 0===customElements.get("x-rgblinearsliders")&&customElements.define("x-rgblinearsliders",ua);class pa extends HTMLElement{static#z=Us`<template><div id="hue-slider" part="slider"><div id="hue-slider-track"><svg id="hue-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="hue-slider-gamut-path"></path></svg><div id="hue-slider-marker"><span id="hue-slider-label">H</span></div></div></div><div id="planar-slider" part="slider"><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-label><x-message href="#color-picker" autocapitalize>Color Picker</x-message></x-label><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem id="gamut-hints-menu-item"><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Ys`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}#hue-slider{width:100%;height:35px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}#hue-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#hue-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#hue-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}#hue-slider-gamut-svg{width:100%;height:100%}#hue-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#hue-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0%;left:0%;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size) / -2), calc(var(--marker-size) / -2));background:rgba(0, 0, 0, 0.3);border:3px solid white;border-radius:999px;box-shadow:0 0 3px black;--marker-size: 20px;}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255, 255, 255, 0.9);font-size:1.125rem;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-gamut-svg{width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}
`;get value(){if("hsv"===this.#Ze||"hsl"===this.#Ze){let[t,e,i]=this.#ie,[s,n,a]=Ci({space:this.#Ze,coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#se]}return[0,0,0,0]}set value([t,e,i,s]){if("hsv"===this.#Ze||"hsl"===this.#Ze){let[n,a,r]=Ci({space:"srgb",coords:[t,e,i]},this.#Ze).coords;this.#ie=[n/360,a/100,r/100],this.#se=s}for(let t=0;t<this.#ie.length;t+=1)(null===this.#ie[t]||Number.isNaN(this.#ie[t]))&&(this.#ie[t]=0);this.#Xt()}get space(){return this.#ne}set space(t){this.#ne!==t&&(this.#ne=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#ae;#$t;#Le=new ResizeObserver((()=>this.#Ae()));#re=!1;#ne="srgb";#Ze="hsv";#oe="srgb";#le=!0;#ie=[0,0,0];#se=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(pa.#z.content,!0)),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,pa.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#hue-slider"].addEventListener("pointerdown",(t=>this.#Oe(t))),this["#planar-slider"].addEventListener("pointerdown",(t=>this.#Pe(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ue(t))),this["#context-menu"].addEventListener("click",(t=>this.#pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#me(t)))}connectedCallback(){this.#ae=i(this,"x-colorpicker"),this.#Ze=Vn.getConfig(`${this.localName}:model`,"hsv"),this.#oe=Xs(Vn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#le=Vn.getConfig("x-colorpicker:labels",!0),this.#Le.observe(this),Vn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){this.#Le.unobserve(this),Vn.removeEventListener("configchange",this.#$t)}#We(){return"none"===this.#oe||"srgb"===this.#oe&&["srgb","srgb-linear"].includes(this.#ne)||"p3"===this.#oe&&["srgb","srgb-linear","p3"].includes(this.#ne)||"a98rgb"===this.#oe&&["srgb","srgb-linear","a98rgb"].includes(this.#ne)||"rec2020"===this.#oe&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#ne)||"prophoto"===this.#oe?"none":this.#oe}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#Ze){let[e,i,s]=this.value;this.#Ze=t,this.value=[e,i,s,this.#se]}}else if("x-colorpicker:gamutHints"===e){let t=Xs(i||"srgb","color.js");t!==this.#oe&&(this.#oe=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#le&&(this.#le=t,this.#be())}}#pe(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#gamut-hints-menu"])e.value!==this.#oe&&(this.#oe=e.value,this.#Xt(),Vn.setConfig("x-colorpicker:gamutHints",Xs(this.#oe,"css")));else if(e.parentElement===this["#color-model-menu"]){if(e.value!==this.#Ze){let[t,i,s]=this.value;this.#Ze=e.value,this.value=[t,i,s,this.#se],Vn.setConfig(`${this.localName}:model`,e.value)}}else"labels"===e.value&&(this.#le=!e.toggled,Vn.setConfig("x-colorpicker:labels",this.#le),this.#Xt())}#me(){this.#ge()}#Ae(){this.#Te()}#Oe(t){if(t.button>0||this.#re)return;let e,i,s=this["#hue-slider-track"].getBoundingClientRect();this.#re=!0,this["#hue-slider"].setPointerCapture(t.pointerId),this["#planar-slider-gamut-path"].style.transition="d 60ms ease",this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#ie[0]&&(this.#ie[0]=e,this.#He(),this.#Ge(),this.#De(),this.#Re(),this.#Te(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#hue-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#hue-slider"].addEventListener("pointerup",i=()=>{this["#hue-slider"].removeEventListener("pointermove",e),this["#hue-slider"].removeEventListener("pointerup",i),this["#hue-slider"].removeEventListener("pointercancel",i),this["#planar-slider-gamut-path"].style.transition="none",this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#hue-slider"].addEventListener("pointercancel",i)}#Pe(t){if(t.button>0||this.#re)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#re=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;if(i=Si(i,0,1),n=Si(n,0,1),"hsv"===this.#Ze){let[t,e,s]=this.#ie;e=i,s=1-n,this.#ie=[t,e,s]}else if("hsl"===this.#Ze){let[t,e,s]=this.#ie;e=i,s=1-n,this.#ie=[t,e,s]}this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Ge(),this.#De(),this.#ke(),this.#Ce()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#ue(t){if(t.button>0||this.#re)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#re=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#se&&(this.#se=e,this.#Me(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#He(),this.#Xe(),this.#Ge(),this.#De(),this.#Re(),this.#Be(),this.#Me(),this.#ke(),this.#Ce(),this.#be()}#He(){if("hsv"===this.#Ze||"hsl"===this.#Ze){let[t]=this.#ie;this["#hue-slider-marker"].style.left=100*t+"%"}}#Xe(){if("hsv"===this.#Ze||"hsl"===this.#Ze){let t="srgb-linear"===this.#ne?"srgb-linear":"srgb",e=[{space:this.#ne,coords:[1,0,0]},{space:this.#ne,coords:[1,1,0]},{space:this.#ne,coords:[0,1,0]},{space:this.#ne,coords:[0,1,1]},{space:this.#ne,coords:[0,0,1]},{space:this.#ne,coords:[1,0,1]},{space:this.#ne,coords:[1,0,0]}];e=e.map((t=>zi(t))).join(","),this["#hue-slider"].style.background=`linear-gradient(in ${t} to right, ${e})`}}async#Ge(){let t=this.#We();if("none"===t)this["#hue-slider-gamut-path"].removeAttribute("d");else if("hsv"===this.#Ze||"hsl"===this.#Ze){let[,e,i]=this.#ie,s=this["#hue-slider"].clientWidth,n=1/window.devicePixelRatio,a=[];{let r=null;for(let o=0;o<=s;o+=n){let n=o/s,[l,h,d]=Ci({space:this.#Ze,coords:[360*n,100*e,100*i]},"srgb").coords,[c,u,p]=Ci({space:this.#ne,coords:[l,h,d]},"xyz-d65").coords;await this.#ae.isColorInGamut(c,u,p,t)?(null===r&&(r=[],a.push(r)),r.push(100*n)):r=null}a=a.map((t=>[t.at(0),t.at(-1)]))}if(a.length>0){let t=a.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#hue-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#hue-slider-gamut-path"].removeAttribute("d")}}#De(){if("hsv"===this.#Ze||"hsl"===this.#Ze){let[,t,e]=this.#ie,i=100*t,s=100-100*e;this["#planar-slider-marker"].style.left=`${i}%`,this["#planar-slider-marker"].style.top=`${s}%`}}#Re(){let[t]=this.#ie,e="srgb-linear"===this.#ne?"srgb-linear":"srgb",i="srgb-linear"===this.#ne?"srgb":this.#ne;if("hsv"===this.#Ze){let s=[{space:this.#ne,coords:Ci({space:"hsv",coords:[360*t,0,100]},i).coords},{space:this.#ne,coords:Ci({space:"hsv",coords:[360*t,100,100]},i).coords}],n=[{space:this.#ne,coords:Ci({space:"hsv",coords:[360*t,0,100]},i).coords},{space:this.#ne,coords:Ci({space:"hsv",coords:[360*t,0,0]},i).coords}];this["#planar-slider"].style.background=`\n        linear-gradient(in ${e} to bottom, ${n.map((t=>zi(t))).join(",")}),\n        linear-gradient(in ${e} to right,  ${s.map((t=>zi(t))).join(",")})\n      `,this["#planar-slider"].style.backgroundBlendMode="multiply, normal"}else if("hsl"===this.#Ze){let s=[{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,0,50]},i).coords},{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,100,50]},i).coords}],n=[{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,0,0]},i).coords}],a=[{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,0,100]},i).coords},{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,0,0]},i).coords,alpha:0},{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,0,0]},i).coords,alpha:0}];s=s.map((t=>zi(t))),n=n.map((t=>zi(t))),a=a.map((t=>zi(t))),this["#planar-slider"].style.background=`\n        linear-gradient(in ${e} to bottom, ${a.join(",")}),\n        linear-gradient(in ${e} to bottom, ${n.join(",")}),\n        linear-gradient(in ${e} to right, ${s.join(",")})\n      `,this["#planar-slider"].style.backgroundBlendMode="normal, multiply, normal"}}async#Be(){let t=this.#We();if("none"===t)this["#planar-slider-gamut-path"].removeAttribute("d");else{let e=this["#planar-slider"].clientWidth,i=this["#planar-slider"].clientHeight,s=1/window.devicePixelRatio,[n]=this.#ie,a=[],r=(e,i,s)=>{let[n,a,r]=Ci({space:this.#Ze,coords:[360*e,100*i,100*s]},"srgb").coords,[o,l,h]=Ci({space:this.#ne,coords:[n,a,r]},"xyz-d65").coords;return this.#ae.isColorInGamut(o,l,h,t)};if("hsv"===this.#Ze){let t=0;for(let o=0;o<i;o+=s)for(;t<=e;){let l=t/e,h=1-o/i;if(!1===await r(n,l,h)){a.push([t,o]);break}t+=s}a.length>0&&a.at(-1)[0]<e&&a.push([e,a.at(-1)[1]])}else if("hsl"===this.#Ze)for(let t=0;t<i;t+=s){let o=e;for(;o>=0;){if(await r(n,o/e,1-t/i))break;o-=10}let l=Math.min(o+10,e);for(;o<=l;){if(o+=s,!1===await r(n,o/e,1-t/i))break}a.push([o,t])}if(0===a.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=a.map((([t,e],i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ");this["#planar-slider-gamut-path"].setAttribute("d",t),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${e} ${i}`)}}}#Te=Yn(this.#Be,40,this);#Me(){this["#alpha-slider-marker"].style.left=100*this.#se+"%"}#ke(){if("hsv"===this.#Ze||"hsl"===this.#Ze){let[t,e,i]=this.#ie,s="srgb-linear"===this.#ne?"srgb":this.#ne,n=[{space:this.#ne,coords:Ci({space:this.#Ze,coords:[360*t,100*e,100*i]},s).coords,alpha:0},{space:this.#ne,coords:Ci({space:this.#Ze,coords:[360*t,100*e,100*i]},s).coords,alpha:1}];n=n.map((t=>zi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(in srgb to right, ${n})`}}async#Ce(){let t=this.#We();if("none"===t)this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else if("hsv"===this.#Ze||"hsl"===this.#Ze){let[e,i,s]=this.#ie,[n,a,r]=Ci({space:this.#Ze,coords:[360*e,100*i,100*s]},"srgb").coords,[o,l,h]=Ci({space:this.#ne,coords:[n,a,r]},"xyz-d65").coords;await this.#ae.isColorInGamut(o,l,h,t)?(this["#hue-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#hue-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#be(){this["#hue-slider-label"].hidden=!this.#le,this["#alpha-slider-label"].hidden=!this.#le}#ge(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#Ze;if(0===this.#ae.gamuts.length)this["#gamut-hints-menu-item"].hidden=!0,this["#gamut-hints-menu"].innerHTML="";else{let t='\n          <x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem>\n          <hr/>\n        ';for(let e of this.#ae.gamuts)t+=`\n            <x-menuitem value="${e}"><x-label>${this.#ae.getGamutLabel(e)}</x-label></x-menuitem>\n          `;this["#gamut-hints-menu"].innerHTML=t,this["#gamut-hints-menu-item"].hidden=!1}for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#oe;this["#labels-menu-item"].toggled=this.#le}}void 0===customElements.get("x-rgbplanarsliders")&&customElements.define("x-rgbplanarsliders",pa);class ma extends HTMLElement{static#z=Us`<template><div id="polar-slider" part="slider"><div id="polar-slider-circle"><canvas id="polar-slider-canvas" width="100" height="100"></canvas><svg id="polar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="polar-slider-gamut-path"></path></svg><div id="polar-slider-marker"></div></div></div><div id="linear-slider" part="slider"><div id="linear-slider-track"><div id="linear-slider-marker"><span id="linear-slider-label"></span></div><svg id="linear-slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="linear-slider-gamut-path"></path></svg></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">H</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-label><x-message href="#color-picker" autocapitalize>Color Picker</x-message></x-label><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="hsv"><x-label>HSV</x-label></x-menuitem><x-menuitem value="hsl"><x-label>HSL</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem id="gamut-hints-menu-item"><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Ys`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}#polar-slider{display:flex;align-items:center;width:100%;max-width:200px;height:200px;margin:0 auto}#polar-slider-circle{touch-action:pinch-zoom;position:relative;width:100%;height:fit-content;aspect-ratio:1 / 1;border-radius:999px!important}#polar-slider-marker{position:absolute;top:0%;left:0%;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size) / -2), calc(var(--marker-size) / -2));background:rgba(0, 0, 0, 0.3);border:3px solid white;border-radius:999px;box-shadow:0 0 3px black;--marker-size: 20px;}#polar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255, 255, 255, 0.9);font-size:1.125rem;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#polar-slider-canvas{position:absolute;width:100%;height:100%;border-radius:9999px}#polar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%;transform:rotate(-90deg)}#polar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#linear-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}#linear-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#linear-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#linear-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}#linear-slider-gamut-svg{width:100%;height:100%}#linear-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#linear-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}
`;get value(){if("hsv"===this.#Ze||"hsl"===this.#Ze){let[t,e,i]=this.#ie,[s,n,a]=Ci({space:this.#Ze,coords:[360*t,100*e,100*i]},"srgb").coords;return[s,n,a,this.#se]}return[0,0,0,0]}set value([t,e,i,s]){if("hsv"===this.#Ze||"hsl"===this.#Ze){let[n,a,r]=Ci({space:"srgb",coords:[t,e,i]},this.#Ze).coords;this.#ie=[n/360,a/100,r/100],this.#se=s}for(let t=0;t<this.#ie.length;t+=1)(null===this.#ie[t]||Number.isNaN(this.#ie[t]))&&(this.#ie[t]=0);this.#Xt()}get space(){return this.#ne}set space(t){this.#ne!==t&&(this.#ne=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#ae;#$t;#Le=new ResizeObserver((()=>this.#Ae()));#re=!1;#ne="srgb";#Ze="hsv";#oe="srgb";#le=!0;#ie=[0,0,0];#se=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(ma.#z.content,!0)),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,ma.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#polar-slider"].addEventListener("pointerdown",(t=>this.#ai(t))),this["#linear-slider"].addEventListener("pointerdown",(t=>this.#ri(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ue(t))),this["#context-menu"].addEventListener("click",(t=>this.#pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#me(t)))}connectedCallback(){this.#ae=i(this,"x-colorpicker"),this.#Ze=Vn.getConfig(`${this.localName}:model`,"hsv"),this.#oe=Xs(Vn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#le=Vn.getConfig("x-colorpicker:labels",!0),this.#Le.observe(this),Vn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){this.#Le.unobserve(this),Vn.removeEventListener("configchange",this.#$t)}#We(){return"none"===this.#oe||"srgb"===this.#oe&&["srgb","srgb-linear"].includes(this.#ne)||"p3"===this.#oe&&["srgb","srgb-linear","p3"].includes(this.#ne)||"a98rgb"===this.#oe&&["srgb","srgb-linear","a98rgb"].includes(this.#ne)||"rec2020"===this.#oe&&["srgb","srgb-linear","a98rgb","p3","rec2020"].includes(this.#ne)||"prophoto"===this.#oe?"none":this.#oe}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"hsv";if(t!==this.#Ze){let[e,i,s]=this.value;this.#Ze=t,this.value=[e,i,s,this.#se]}}else if("x-colorpicker:gamutHints"===e){let t=Xs(i||"srgb","color.js");t!==this.#oe&&(this.#oe=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#le&&(this.#le=t,this.#be())}}#pe(t){let e=t.target.closest("x-menuitem");if(e)if(e.parentElement===this["#gamut-hints-menu"])e.value!==this.#oe&&(this.#oe=e.value,this.#Xt(),Vn.setConfig("x-colorpicker:gamutHints",Xs(this.#oe,"css")));else if(e.parentElement===this["#color-model-menu"]){if(e.value!==this.#Ze){let[t,i,s]=this.value;this.#Ze=e.value,this.value=[t,i,s,this.#se],Vn.setConfig(`${this.localName}:model`,e.value)}}else"labels"===e.value&&(this.#le=!e.toggled,Vn.setConfig("x-colorpicker:labels",this.#le),this.#Xt())}#me(){this.#ge()}#Ae(){this.#oi()}#ai(t){if(t.button>0||this.#re)return;let e,i,s=this["#polar-slider"].getBoundingClientRect();this.#re=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#polar-slider"].style.cursor="default",this["#polar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=s.width/2,n=t-s.left-i,a=e-s.top-i,r=Math.pow(n,2)+Math.pow(a,2),o=Math.atan2(a,n);r>Math.pow(i,2)&&(n=i*Math.cos(o),a=i*Math.sin(o),r=Math.pow(n,2)+Math.pow(a,2),o=Math.atan2(a,n)),this.#ie[0]=(o+Math.PI)/(2*Math.PI),"hsv"!==this.#Ze&&"hsl"!==this.#Ze||(this.#ie[1]=Math.sqrt(r)/i),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#li(),this.#hi(),this.#di(),this.#ke(),this.#Ce()};n(t.clientX,t.clientY),this["#polar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#polar-slider"].addEventListener("pointerup",i=()=>{this["#polar-slider"].removeEventListener("pointermove",e),this["#polar-slider"].removeEventListener("pointerup",i),this["#polar-slider"].removeEventListener("pointercancel",i),this["#polar-slider"].style.cursor=null,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#polar-slider"].addEventListener("pointercancel",i)}#ri(t){if(t.button>0||this.#re)return;let e,i,s=this["#linear-slider-track"].getBoundingClientRect();this.#re=!0,this["#linear-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#ie[2]&&(this.#ie[2]=e,this.#ci(),this.#oi(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#linear-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#linear-slider"].addEventListener("pointerup",i=()=>{this["#linear-slider"].removeEventListener("pointermove",e),this["#linear-slider"].removeEventListener("pointerup",i),this["#linear-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#linear-slider"].addEventListener("pointercancel",i)}#ue(t){if(t.button>0||this.#re)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#re=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#se&&(this.#se=e,this.#Me(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#li(),this.#ui(),this.#pi(),this.#ci(),this.#hi(),this.#di(),this.#Me(),this.#ke(),this.#Ce(),this.#be()}#li(){let[t,e]=this.#ie;if("hsv"===this.#Ze||"hsl"===this.#Ze){let s=100,n=(i=360*t,Math.PI*i/180),a=e*s/2,r={x:s/2,y:s/2},o=(s-(r.x+a*Math.cos(n)))/s*100,l=(r.y-a*Math.sin(n))/s*100;this["#polar-slider-marker"].style.left=o+"%",this["#polar-slider-marker"].style.top=l+"%"}var i}#ui(){let t="srgb-linear"===this.#ne?"srgb-linear":"srgb",e="srgb-linear"===this.#ne?"srgb":this.#ne;if("hsv"===this.#Ze){let i=[{space:this.#ne,coords:Ci({space:"hsv",coords:[0,0,100]},e).coords},{space:this.#ne,coords:Ci({space:"hsv",coords:[0,0,0]},e).coords}],s=[{space:this.#ne,coords:[1,0,0]},{space:this.#ne,coords:[1,1,0]},{space:this.#ne,coords:[0,1,0]},{space:this.#ne,coords:[0,1,1]},{space:this.#ne,coords:[0,0,1]},{space:this.#ne,coords:[1,0,1]},{space:this.#ne,coords:[1,0,0]}];i=i.map((t=>zi(t))).join(","),s=s.map((t=>zi(t))).join(","),this["#polar-slider-circle"].style.background=`\n        radial-gradient(circle closest-side in ${t}, ${i} 100%),\n        conic-gradient(from -90deg in hsl, ${s})\n      `,this["#polar-slider-circle"].style.backgroundBlendMode="screen, normal"}else if("hsl"===this.#Ze){let i=[{space:this.#ne,coords:Ci({space:"hsl",coords:[0,0,50]},e).coords,alpha:1},{space:this.#ne,coords:Ci({space:"hsl",coords:[0,0,50]},e).coords,alpha:0}],s=[{space:this.#ne,coords:[1,0,0]},{space:this.#ne,coords:[1,1,0]},{space:this.#ne,coords:[0,1,0]},{space:this.#ne,coords:[0,1,1]},{space:this.#ne,coords:[0,0,1]},{space:this.#ne,coords:[1,0,1]},{space:this.#ne,coords:[1,0,0]}];i=i.map((t=>zi(t))).join(","),s=s.map((t=>zi(t))).join(","),this["#polar-slider-circle"].style.background=`\n        radial-gradient(circle closest-side in ${t}, ${i}),\n        conic-gradient(from -90deg in hsl, ${s})\n      `,this["#polar-slider-circle"].style.backgroundBlendMode="normal, normal"}}async#pi(){let t=this.#We();if("none"===t)this["#polar-slider-gamut-path"].removeAttribute("d");else{let e=this["#polar-slider-gamut-svg"].clientWidth,i=this["#polar-slider-gamut-svg"].clientHeight,s=1/window.devicePixelRatio,[,,n]=this.#ie,a=[];if("hsv"===this.#Ze||"hsl"===this.#Ze)for(let r=0;r<=1;r+=.01)for(let o=i/2;o>=0;o-=s){let s=o/(i/2),[l,h,d]=Ci({space:this.#Ze,coords:[360*r,100*s,100*n]},"srgb").coords,[c,u,p]=Ci({space:this.#ne,coords:[l,h,d]},"xyz-d65").coords;if(await this.#ae.isColorInGamut(c,u,p,t)){let t=Ti({x:e/2,y:i/2-o},{x:e/2,y:i/2},360*r);a.push(t);break}}if(0===a.length)this["#polar-slider-gamut-path"].removeAttribute("d");else{let t=a.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#polar-slider-gamut-path"].setAttribute("d",t),this["#polar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${e} ${i}`)}}}#oi=Yn(this.#pi,40,this);#ci(){let[,,t]=this.#ie;"hsv"!==this.#Ze&&"hsl"!==this.#Ze||(this["#linear-slider-marker"].style.left=100*t+"%")}#hi(){if("hsv"===this.#Ze){let[t,e]=this.#ie,i="srgb-linear"===this.#ne?"srgb-linear":"srgb",s="srgb-linear"===this.#ne?"srgb":this.#ne,n=[{space:this.#ne,coords:Ci({space:"hsv",coords:[360*t,100*e,0]},s).coords},{space:this.#ne,coords:Ci({space:"hsv",coords:[360*t,100*e,100]},s).coords}];n=n.map((t=>zi(t))).join(","),this["#linear-slider"].style.background=`linear-gradient(in ${i} to right, ${n})`}else if("hsl"===this.#Ze){let[t,e]=this.#ie,i="srgb-linear"===this.#ne?"srgb-linear":"srgb",s="srgb-linear"===this.#ne?"srgb":this.#ne,n=[{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,100*e,0]},s).coords},{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,100*e,50]},s).coords},{space:this.#ne,coords:Ci({space:"hsl",coords:[360*t,100*e,100]},s).coords}];n=n.map((t=>zi(t))).join(","),this["#linear-slider"].style.background=`linear-gradient(in ${i} to right, ${n})`}}async#di(){let t=this.#We();if("none"===t)this["#linear-slider-gamut-path"].removeAttribute("d");else{let[e,i]=this.#ie,s=this["#linear-slider"].clientWidth,n=1/window.devicePixelRatio,a=[];{let r=null;for(let o=0;o<=s;o+=n)if("hsv"===this.#Ze||"hsl"===this.#Ze){let n=o/s,[l,h,d]=Ci({space:this.#Ze,coords:[360*e,100*i,100*n]},"srgb").coords,[c,u,p]=Ci({space:this.#ne,coords:[l,h,d]},"xyz-d65").coords;await this.#ae.isColorInGamut(c,u,p,t)?(null===r&&(r=[],a.push(r)),r.push(100*n)):r=null}a=a.map((t=>[t.at(0),t.at(-1)]))}if(a.length>0){let t=a.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#linear-slider-gamut-path"].setAttribute("d",t.join(" "))}else this["#linear-slider-gamut-path"].removeAttribute("d")}}#Me(){this["#alpha-slider-marker"].style.left=100*this.#se+"%"}#ke(){if("hsv"===this.#Ze||"hsl"===this.#Ze){let[t,e,i]=this.#ie,s="srgb-linear"===this.#ne?"srgb":this.#ne,n=[{space:this.#ne,coords:Ci({space:this.#Ze,coords:[360*t,100*e,100*i]},s).coords,alpha:0},{space:this.#ne,coords:Ci({space:this.#Ze,coords:[360*t,100*e,100*i]},s).coords,alpha:1}];n=n.map((t=>zi(t))).join(","),this["#alpha-slider-gradient"].style.background=`linear-gradient(in srgb to right, ${n})`}}async#Ce(){let t=this.#We();if("none"===t)this["#polar-slider-marker"].removeAttribute("data-warn"),this["#linear-slider-marker"].removeAttribute("data-warn");else{let[e,i,s]=this.#ie,[n,a,r]=Ci({space:this.#Ze,coords:[360*e,100*i,100*s]},"srgb").coords,[o,l,h]=Ci({space:this.#ne,coords:[n,a,r]},"xyz-d65").coords;await this.#ae.isColorInGamut(o,l,h,t)?(this["#polar-slider-marker"].removeAttribute("data-warn"),this["#linear-slider-marker"].removeAttribute("data-warn")):(this["#polar-slider-marker"].setAttribute("data-warn",""),this["#linear-slider-marker"].setAttribute("data-warn",""))}}#be(){this.#le?("hsv"===this.#Ze?this["#linear-slider-label"].textContent="V":"hsl"===this.#Ze&&(this["#linear-slider-label"].textContent="L"),this["#alpha-slider-label"].textContent="A"):(this["#linear-slider-label"].textContent="",this["#alpha-slider-label"].textContent="")}#ge(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#Ze;if(0===this.#ae.gamuts.length)this["#gamut-hints-menu-item"].hidden=!0,this["#gamut-hints-menu"].innerHTML="";else{let t='\n          <x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem>\n          <hr/>\n        ';for(let e of this.#ae.gamuts)t+=`\n            <x-menuitem value="${e}"><x-label>${this.#ae.getGamutLabel(e)}</x-label></x-menuitem>\n          `;this["#gamut-hints-menu"].innerHTML=t,this["#gamut-hints-menu-item"].hidden=!1}for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#oe;this["#labels-menu-item"].toggled=this.#le}}void 0===customElements.get("x-rgbpolarsliders")&&customElements.define("x-rgbpolarsliders",ma);class ba extends HTMLElement{static#z=Us`<template><div id="x-slider" class="slider" part="slider"><div id="x-slider-track" class="slider-track"><svg id="x-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="x-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="x-slider-marker" class="slider-marker"><span id="x-slider-label" class="slider-label">X</span></div></div></div><div id="y-slider" class="slider" part="slider"><div id="y-slider-track" class="slider-track"><svg id="y-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="y-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="y-slider-marker" class="slider-marker"><span id="y-slider-label" class="slider-label">Y</span></div></div></div><div id="z-slider" class="slider" part="slider"><div id="z-slider-track" class="slider-track"><svg id="z-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="z-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="z-slider-marker" class="slider-marker"><span id="z-slider-label" class="slider-label">Z</span></div></div></div><div id="alpha-slider" class="slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track" class="slider-track"><div id="alpha-slider-marker" class="slider-marker"><span id="alpha-slider-label" class="slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-label><x-message href="#color-picker" autocapitalize>Color Picker</x-message></x-label><x-menuitem id="gamut-hints-menu-item"><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Ys`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}.slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}.slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}.slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}.slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}.slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}.slider-gamut-svg{width:100%;height:100%}.slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#alpha-slider{display:none;margin-top:10px;position:relative;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}
`;get value(){let[t,e,i]=this.#ie;return[t,e,i,this.#se]}set value([t,e,i,s]){this.#ie=[t,e,i],this.#se=s,this.#Xt()}get space(){return this.#ne}set space(t){this.#ne!==t&&(this.#ne=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#ae;#$t;#re=!1;#ne="xyz-d65";#oe="srgb";#le=!0;#ie=[0,0,0];#se=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(ba.#z.content,!0)),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,ba.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#x-slider"].addEventListener("pointerdown",(t=>this.#mi(t))),this["#y-slider"].addEventListener("pointerdown",(t=>this.#bi(t))),this["#z-slider"].addEventListener("pointerdown",(t=>this.#gi(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ue(t))),this["#context-menu"].addEventListener("click",(t=>this.#pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#me(t)))}connectedCallback(){this.#ae=i(this,"x-colorpicker"),this.#oe=Xs(Vn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#le=Vn.getConfig("x-colorpicker:labels",!0),Vn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){Vn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if("x-colorpicker:gamutHints"===e){let t=Xs(i||"srgb","color.js");t!==this.#oe&&(this.#oe=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#le&&(this.#le=t,this.#be())}}#pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#oe&&(this.#oe=e.value,this.#Xt(),Vn.setConfig("x-colorpicker:gamutHints",Xs(this.#oe,"css"))):"labels"===e.value&&(this.#le=!e.toggled,Vn.setConfig("x-colorpicker:labels",this.#le),this.#Xt()))}#me(){this.#ge()}#mi(t){if(t.button>0||this.#re)return;let e,i,s=this["#x-slider-track"].getBoundingClientRect();this.#re=!0,this["#x-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#ie[0]&&(this.#ie[0]=e,this.#fi(),this.#xi(),this.#wi(),this.#vi(),this.#yi(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#x-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#x-slider"].addEventListener("pointerup",i=()=>{this["#x-slider"].removeEventListener("pointermove",e),this["#x-slider"].removeEventListener("pointerup",i),this["#x-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#x-slider"].addEventListener("pointercancel",i)}#bi(t){if(t.button>0||this.#re)return;let e,i,s=this["#y-slider-track"].getBoundingClientRect();this.#re=!0,this["#y-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#ie[1]&&(this.#ie[1]=e,this.#ki(),this.#Ci(),this.#zi(),this.#xi(),this.#vi(),this.#yi(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#y-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#y-slider"].addEventListener("pointerup",i=()=>{this["#y-slider"].removeEventListener("pointermove",e),this["#y-slider"].removeEventListener("pointerup",i),this["#y-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#y-slider"].addEventListener("pointercancel",i)}#gi(t){if(t.button>0||this.#re)return;let e,i,s=this["#z-slider-track"].getBoundingClientRect();this.#re=!0,this["#z-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#ie[2]&&(this.#ie[2]=e,this.#ki(),this.#Ci(),this.#xi(),this.#wi(),this.#Ei(),this.#vi(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#z-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#z-slider"].addEventListener("pointerup",i=()=>{this["#z-slider"].removeEventListener("pointermove",e),this["#z-slider"].removeEventListener("pointerup",i),this["#z-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#z-slider"].addEventListener("pointercancel",i)}#ue(t){if(t.button>0||this.#re)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#re=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#se&&(this.#se=e,this.#Me(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#fi(),this.#ki(),this.#Ci(),this.#zi(),this.#xi(),this.#wi(),this.#Ei(),this.#vi(),this.#yi(),this.#Me(),this.#ke(),this.#Ce(),this.#be()}#fi(){let[t]=this.#ie;this["#x-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#ki(){let[,t,e]=this.#ie,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#ne,coords:[s,t,e]});i=i.map((t=>zi(t))),this["#x-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${i.join(",")})`}async#Ci(){if("none"===this.#oe)this["#x-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#x-slider"].clientWidth,i=1/window.devicePixelRatio,[,s,n]=this.#ie,a=null;for(let r=0;r<=e;r+=i){let i=r/e,[o,l,h]=Ci({space:this.#ne,coords:[i,s,n]},"xyz-d65").coords;await this.#ae.isColorInGamut(o,l,h,this.#oe)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#x-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#x-slider-gamut-path"].removeAttribute("d")}}#zi(){let[,t]=this.#ie;this["#y-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#xi(){let[t,,e]=this.#ie,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#ne,coords:[t,s,e]});i=i.map((t=>zi(t))),this["#y-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${i.join(",")})`}async#wi(){if("none"===this.#oe)this["#y-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#y-slider"].clientWidth,i=1/window.devicePixelRatio,[s,,n]=this.#ie,a=null;for(let r=0;r<=e;r+=i){let i=r/e,[o,l,h]=Ci({space:this.#ne,coords:[s,i,n]},"xyz-d65").coords;await this.#ae.isColorInGamut(o,l,h,this.#oe)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#y-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#y-slider-gamut-path"].removeAttribute("d")}}#Ei(){let[,,t]=this.#ie;this["#z-slider-marker"].style.left=t<0?"calc(0% - 18px)":t>1?"calc(100% + 18px)":100*t+"%"}#vi(){let[t,e]=this.#ie,i=[];for(let s=0;s<=1;s+=.05)i.push({space:this.#ne,coords:[t,e,s]});i=i.map((t=>zi(t))),this["#z-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${i.join(",")})`}async#yi(){if("none"===this.#oe)this["#z-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#z-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n]=this.#ie,a=null;for(let r=0;r<=e;r+=i){let i=r/e,[o,l,h]=Ci({space:this.#ne,coords:[s,n,i]},"xyz-d65").coords;await this.#ae.isColorInGamut(o,l,h,this.#oe)?(null===a&&(a=[],t.push(a)),a.push(100*i)):a=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#z-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#z-slider-gamut-path"].removeAttribute("d")}}#Me(){this["#alpha-slider-marker"].style.left=100*this.#se+"%"}#ke(){let[t,e,i]=this.#ie,s=[{space:this.#ne,coords:[t,e,i],alpha:0},{space:this.#ne,coords:[t,e,i],alpha:1}];s=s.map((t=>zi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ne} to right, ${s.join(",")})`}async#Ce(){if("none"===this.#oe)this["#x-slider-marker"].removeAttribute("data-warn"),this["#y-slider-marker"].removeAttribute("data-warn"),this["#z-slider-marker"].removeAttribute("data-warn");else{let[t,e,i]=Ci({space:this.#ne,coords:this.#ie},"xyz-d65").coords;await this.#ae.isColorInGamut(t,e,i,this.#oe)?(this["#x-slider-marker"].removeAttribute("data-warn"),this["#y-slider-marker"].removeAttribute("data-warn"),this["#z-slider-marker"].removeAttribute("data-warn")):(this["#x-slider-marker"].setAttribute("data-warn",""),this["#y-slider-marker"].setAttribute("data-warn",""),this["#z-slider-marker"].setAttribute("data-warn",""))}}#be(){this["#x-slider-label"].hidden=!this.#le,this["#y-slider-label"].hidden=!this.#le,this["#z-slider-label"].hidden=!this.#le,this["#alpha-slider-label"].hidden=!this.#le}#ge(){if(0===this.#ae.gamuts.length)this["#gamut-hints-menu-item"].hidden=!0,this["#gamut-hints-menu"].innerHTML="";else{let t='\n          <x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem>\n          <hr/>\n        ';for(let e of this.#ae.gamuts)t+=`\n            <x-menuitem value="${e}"><x-label>${this.#ae.getGamutLabel(e)}</x-label></x-menuitem>\n          `;this["#gamut-hints-menu"].innerHTML=t,this["#gamut-hints-menu-item"].hidden=!1}for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#oe;this["#labels-menu-item"].toggled=this.#le}}void 0===customElements.get("x-xyzlinearsliders")&&customElements.define("x-xyzlinearsliders",ba);class ga extends HTMLElement{static#z=Us`<template><div id="linear-slider" class="slider" part="slider"><div id="linear-slider-track" class="slider-track"><svg id="linear-slider-gamut-svg" class="slider-gamut-svg" viewBox="0 0 100 35" preserveAspectRatio="none"><path id="linear-slider-gamut-path" class="slider-gamut-path"></path></svg><div id="linear-slider-marker" class="slider-marker"><span id="linear-slider-label" class="slider-label">L</span></div></div></div><div id="planar-slider" part="slider"><canvas id="planar-slider-canvas" width="100" height="100"></canvas><svg id="planar-slider-gamut-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="planar-slider-gamut-path"></path></svg><div id="planar-slider-marker"></div></div><div id="alpha-slider" part="slider"><div id="alpha-slider-gradient"></div><div id="alpha-slider-track"><div id="alpha-slider-marker"><span id="alpha-slider-label">α</span></div></div></div><x-contextmenu id="context-menu"><x-menu><x-label><x-message href="#color-picker" autocapitalize>Color Picker</x-message></x-label><x-menuitem><x-label><x-message href="#color-model" autocapitalize>Color Model</x-message></x-label><x-menu id="color-model-menu"><x-menuitem value="x-zy"><x-label>X-ZY</x-label></x-menuitem><x-menuitem value="y-xz"><x-label>Y-XZ</x-label></x-menuitem><x-menuitem value="z-xy"><x-label>Z-XY</x-label></x-menuitem></x-menu></x-menuitem><x-menuitem id="gamut-hints-menu-item"><x-label><x-message href="#gamut-hints" autocapitalize>Gamut Hints</x-message></x-label><x-menu id="gamut-hints-menu"></x-menu></x-menuitem><hr><x-menuitem id="labels-menu-item" value="labels"><x-label><x-message href="#labels" autocapitalize>Labels</x-message></x-label></x-menuitem></x-menu></x-contextmenu></template>`;static#E=Ys`:host{display:block;user-select:none;-webkit-user-select:none;--marker-width: 18px;}:host([disabled]){pointer-events:none;opacity:0.5}#linear-slider{width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);box-sizing:border-box;touch-action:pinch-zoom}#linear-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#linear-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#linear-slider-marker[data-warn]::after{content:"⚠";position:absolute;right:-26px;color:rgba(255, 255, 255, 0.9);filter:drop-shadow(1px 1px 1px black);pointer-events:none;font-size:1.125rem}#linear-slider-gamut-svg{width:100%;height:100%}#linear-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#linear-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}#planar-slider{width:100%;height:200px;margin-top:10px;position:relative;touch-action:pinch-zoom}#planar-slider-marker{position:absolute;top:0%;left:0%;width:var(--marker-size);height:var(--marker-size);display:flex;align-items:center;justify-content:center;box-sizing:border-box;transform:translate(calc(var(--marker-size) / -2), calc(var(--marker-size) / -2));background:rgba(0, 0, 0, 0.3);border:3px solid white;border-radius:999px;box-shadow:0 0 3px black;--marker-size: 20px;}#planar-slider-marker[data-warn]::after{content:"⚠";position:absolute;top:-30px;color:rgba(255, 255, 255, 0.9);font-size:1.125rem;filter:drop-shadow(1px 1px 1px black);pointer-events:none}#planar-slider-canvas{position:absolute;width:100%;height:100%;overflow:hidden;border-radius:inherit}#planar-slider-gamut-svg{position:absolute;top:0;left:0;width:100%;height:100%}#planar-slider-gamut-path{fill:none;stroke:white;stroke-width:1px;vector-effect:non-scaling-stroke;stroke-dasharray:2px;opacity:0.8}#alpha-slider{display:none;width:100%;height:35px;margin-top:10px;padding:0 calc(var(--marker-width) / 2);position:relative;box-sizing:border-box;touch-action:pinch-zoom;background:var(--checkboard-background)}:host([alpha]) #alpha-slider{display:block}#alpha-slider-track{position:relative;width:100%;height:100%;display:flex;align-items:center}#alpha-slider-marker{position:absolute;left:0%;width:var(--marker-width);height:calc(100% + 6px);box-sizing:border-box;display:flex;align-items:center;justify-content:center;transform:translateX(calc((var(--marker-width) / 2) * -1));background:rgba(0, 0, 0, 0.2);border:3px solid white;box-shadow:0 0 3px black}#alpha-slider-gradient{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit}#alpha-slider-label{font-weight:700;color:rgba(255, 255, 255, 0.9);font-size:0.625rem}
`;get value(){let[t,e,i]=this.#ie;return[t,e,i,this.#se]}set value([t,e,i,s]){this.#ie=[t,e,i],this.#se=s,this.#Xt()}get space(){return this.#ne}set space(t){this.#ne!==t&&(this.#ne=t,this.#Xt())}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#ae;#$t;#Le=new ResizeObserver((()=>this.#Ae()));#re=!1;#ne="xyz-d65";#Ze="x-zy";#oe="srgb";#le=!0;#ie=[0,0,0];#se=1;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.append(document.importNode(ga.#z.content,!0)),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,ga.#E];for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#planar-slider"].addEventListener("pointerdown",(t=>this.#Pe(t))),this["#linear-slider"].addEventListener("pointerdown",(t=>this.#ri(t))),this["#alpha-slider"].addEventListener("pointerdown",(t=>this.#ue(t))),this["#context-menu"].addEventListener("click",(t=>this.#pe(t))),this["#context-menu"].addEventListener("open",(t=>this.#me(t)))}connectedCallback(){this.#ae=i(this,"x-colorpicker"),this.#Ze=Vn.getConfig(`${this.localName}:model`,"x-zy"),this.#oe=Xs(Vn.getConfig("x-colorpicker:gamutHints","srgb"),"color.js"),this.#le=Vn.getConfig("x-colorpicker:labels",!0),this.#Le.observe(this),Vn.addEventListener("configchange",this.#$t=t=>this.#_t(t))}disconnectedCallback(){this.#Le.unobserve(this),Vn.removeEventListener("configchange",this.#$t)}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s)if(e===`${this.localName}:model`){let t=i||"x-zy";t!==this.#Ze&&(this.#Ze=t,this.#Xt())}else if("x-colorpicker:gamutHints"===e){let t=Xs(i||"srgb","color.js");t!==this.#oe&&(this.#oe=t,this.#Xt())}else if("x-colorpicker:labels"===e){let t=null!==i&&i;t!==this.#le&&(this.#le=t,this.#be())}}#pe(t){let e=t.target.closest("x-menuitem");e&&(e.parentElement===this["#color-model-menu"]?e.value!==this.#Ze&&(this.#Ze=e.value,this.#Xt(),Vn.setConfig(`${this.localName}:model`,e.value)):e.parentElement===this["#gamut-hints-menu"]?e.value!==this.#oe&&(this.#oe=e.value,this.#Xt(),Vn.setConfig("x-colorpicker:gamutHints",Xs(this.#oe,"css"))):"labels"===e.value&&(this.#le=!e.toggled,Vn.setConfig("x-colorpicker:labels",this.#le),this.#Xt()))}#me(){this.#ge()}#Ae(){this.#Te()}#ri(t){if(t.button>0||this.#re)return;let e,i,s=this["#linear-slider-track"].getBoundingClientRect();this.#re=!0,this["#linear-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e,i=(t-s.x)/s.width;i=Si(i,0,1),"x-zy"===this.#Ze?e=0:"y-xz"===this.#Ze?e=1:"z-xy"===this.#Ze&&(e=2),i!==this.#ie[e]&&(this.#ie[e]=i,this.#Re(),this.#Te(),this.#ci(),this.#ke(),this.#Ce(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#linear-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#linear-slider"].addEventListener("pointerup",i=()=>{this["#linear-slider"].removeEventListener("pointermove",e),this["#linear-slider"].removeEventListener("pointerup",i),this["#linear-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#linear-slider"].addEventListener("pointercancel",i)}#Pe(t){if(t.button>0||this.#re)return;let e,i,s=this["#planar-slider"].getBoundingClientRect();this.#re=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this["#planar-slider"].setPointerCapture(t.pointerId);let n=(t,e)=>{let i=(t-s.left)/s.width,n=(e-s.top)/s.height;i=Si(i,0,1),n=Si(n,0,1);let[a,r,o]=this.#ie;"x-zy"===this.#Ze?this.#ie=[a,n,i]:"y-xz"===this.#Ze?this.#ie=[i,r,n]:"z-xy"===this.#Ze&&(this.#ie=[i,n,o]),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#De(),this.#hi(),this.#di(),this.#ke(),this.#Ce()};n(t.clientX,t.clientY),this["#planar-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX,e.clientY)}),this["#planar-slider"].addEventListener("pointerup",i=()=>{this["#planar-slider"].removeEventListener("pointermove",e),this["#planar-slider"].removeEventListener("pointerup",i),this["#planar-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#planar-slider"].addEventListener("pointercancel",i)}#ue(t){if(t.button>0||this.#re)return;let e,i,s=this["#alpha-slider-track"].getBoundingClientRect();this.#re=!0,this["#alpha-slider"].setPointerCapture(t.pointerId),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let n=t=>{let e=(t-s.x)/s.width;e=Si(e,0,1),e!==this.#se&&(this.#se=e,this.#Me(),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};n(t.clientX),this["#alpha-slider"].addEventListener("pointermove",e=e=>{e.pointerId===t.pointerId&&n(e.clientX)}),this["#alpha-slider"].addEventListener("pointerup",i=()=>{this["#alpha-slider"].removeEventListener("pointermove",e),this["#alpha-slider"].removeEventListener("pointerup",i),this["#alpha-slider"].removeEventListener("pointercancel",i),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})),this.#re=!1}),this["#alpha-slider"].addEventListener("pointercancel",i)}#Xt(){this.#ci(),this.#hi(),this.#di(),this.#De(),this.#Re(),this.#Be(),this.#Me(),this.#ke(),this.#Ce(),this.#be()}#ci(){let[t,e,i]=this.#ie;"x-zy"===this.#Ze?this["#linear-slider-marker"].style.left=100*t+"%":"y-xz"===this.#Ze?this["#linear-slider-marker"].style.left=100*e+"%":"z-xy"===this.#Ze&&(this["#linear-slider-marker"].style.left=100*i+"%")}#hi(){let[t,e,i]=this.#ie,s=[];if("x-zy"===this.#Ze)for(let t=0;t<=1;t+=.02)s.push({space:this.#ne,coords:[t,e,i]});else if("y-xz"===this.#Ze)for(let e=0;e<=1;e+=.02)s.push({space:this.#ne,coords:[t,e,i]});else if("z-xy"===this.#Ze)for(let i=0;i<=1;i+=.02)s.push({space:this.#ne,coords:[t,e,i]});s=s.map((t=>zi(t))),this["#linear-slider"].style.background=`linear-gradient(in ${this.#ne} to right, ${s.join(",")})`}async#di(){if("none"===this.#oe)this["#linear-slider-gamut-path"].removeAttribute("d");else{let t=[];{let e=this["#linear-slider"].clientWidth,i=1/window.devicePixelRatio,[s,n,a]=this.#ie,r=null;for(let o=0;o<=e;o+=i){let i,l=o/e;"x-zy"===this.#Ze?i={space:this.#ne,coords:[l,n,a]}:"y-xz"===this.#Ze?i={space:this.#ne,coords:[s,l,a]}:"z-xy"===this.#Ze&&(i={space:this.#ne,coords:[s,n,l]});let[h,d,c]=Ci(i,"xyz-d65").coords;await this.#ae.isColorInGamut(h,d,c,this.#oe)?(null===r&&(r=[],t.push(r)),r.push(100*l)):r=null}t=t.map((t=>[t.at(0),t.at(-1)]))}if(t.length>0){let e=t.map((([t,e])=>`M ${t} 35 L ${t} 17 L ${e} 17 L ${e} 35`));this["#linear-slider-gamut-path"].setAttribute("d",e.join(" "))}else this["#linear-slider-gamut-path"].removeAttribute("d")}}#De(){let t,e,[i,s,n]=this.#ie;"x-zy"===this.#Ze?(t=n<0?"calc(0% - 18px)":n>1?"calc(100% + 18px)":100*n+"%",e=s<0?"calc(0% - 18px)":s>1?"calc(100% + 18px)":100*s+"%"):"y-xz"===this.#Ze?(t=i<0?"calc(0% - 18px)":i>1?"calc(100% + 18px)":100*i+"%",e=n<0?"calc(0% - 18px)":n>1?"calc(100% + 18px)":100*n+"%"):"z-xy"===this.#Ze&&(t=i<0?"calc(0% - 18px)":i>1?"calc(100% + 18px)":100*i+"%",e=s<0?"calc(0% - 18px)":s>1?"calc(100% + 18px)":100*s+"%"),this["#planar-slider-marker"].style.left=t,this["#planar-slider-marker"].style.top=e}#Re(){let t=this["#planar-slider-canvas"],e=t.getContext("2d",{colorSpace:"display-p3"}),{width:i,height:s}=t,[n,a,r]=this.#ie;e.clearRect(0,0,i,s);for(let t=0;t<=i;t+=1){let o=[];for(let e=0;e<=s;e+=10){let l;if("x-zy"===this.#Ze){let a=t/i,r=e/s;l={space:this.#ne,coords:[n,r,a]}}else if("y-xz"===this.#Ze){let n=t/i,r=e/s;l={space:this.#ne,coords:[n,a,r]}}else if("z-xy"===this.#Ze){let n=t/i,a=e/s;l={space:this.#ne,coords:[n,a,r]}}o.push(l)}let l=e.createLinearGradient(t,0,i,s);for(let t=0;t<o.length;t+=1){let e=o[t];l.addColorStop(t/o.length,zi(e))}e.fillStyle=l,e.fillRect(t,0,1,s)}}async#Be(){if("none"===this.#oe)this["#planar-slider-gamut-path"].removeAttribute("d");else{let t=this["#planar-slider-gamut-svg"].clientWidth,e=this["#planar-slider-gamut-svg"].clientHeight,i=Math.sqrt(Math.pow(t/2,2)+Math.pow(e/2,2)),s={x:t/2,y:e/2},n=[];for(let a=0;a<360;a+=3){let r,[o,l,h]=this.#ie;for(let n=i;n>=0;n-=15){let i=Ti({x:t/2,y:e/2-n},s,a);"x-zy"===this.#Ze?(h=i.x/t,l=i.y/e):"y-xz"===this.#Ze?(o=i.x/t,h=i.y/e):"z-xy"===this.#Ze&&(o=i.x/t,l=i.y/e);let[d,c,u]=Ci({space:this.#ne,coords:[o,l,h]},"xyz-d65").coords;if(await this.#ae.isColorInGamut(d,c,u,this.#oe)){r=n;break}}for(let o=r;o<=i;o+=1){let i=Ti({x:t/2,y:e/2-o},s,a),[r,l,h]=this.#ie;"x-zy"===this.#Ze?(h=i.x/t,l=i.y/e):"y-xz"===this.#Ze?(r=i.x/t,h=i.y/e):"z-xy"===this.#Ze&&(r=i.x/t,l=i.y/e);let[d,c,u]=Ci({space:this.#ne,coords:[r,l,h]},"xyz-d65").coords;if(!1===await this.#ae.isColorInGamut(d,c,u,this.#oe)){n.push(i);break}}}if(0===n.length)this["#planar-slider-gamut-path"].removeAttribute("d");else{let i=n.map((({x:t,y:e},i)=>`${0===i?"M":"L"} ${t} ${e}`)).join(" ")+" Z";this["#planar-slider-gamut-path"].setAttribute("d",i),this["#planar-slider-gamut-svg"].setAttribute("viewBox",`0 0 ${t} ${e}`)}}}#Te=Yn(this.#Be,40,this);#Me(){this["#alpha-slider-marker"].style.left=100*this.#se+"%"}#ke(){let[t,e,i]=this.#ie,s=[{space:this.#ne,coords:[t,e,i],alpha:0},{space:this.#ne,coords:[t,e,i],alpha:1}];s=s.map((t=>zi(t))),this["#alpha-slider-gradient"].style.background=`linear-gradient(in ${this.#ne} to right, ${s.join(",")})`}async#Ce(){if("none"===this.#oe)this["#linear-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn");else{let[t,e,i]=Ci({space:this.#ne,coords:this.#ie},"xyz-d65").coords;await this.#ae.isColorInGamut(t,e,i,this.#oe)?(this["#linear-slider-marker"].removeAttribute("data-warn"),this["#planar-slider-marker"].removeAttribute("data-warn")):(this["#linear-slider-marker"].setAttribute("data-warn",""),this["#planar-slider-marker"].setAttribute("data-warn",""))}}#be(){this["#linear-slider-label"].hidden=!this.#le,this["#linear-slider-label"].textContent=this.#Ze[0].toUpperCase(),this["#alpha-slider-label"].hidden=!this.#le}#ge(){for(let t of this["#color-model-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#Ze;if(0===this.#ae.gamuts.length)this["#gamut-hints-menu-item"].hidden=!0,this["#gamut-hints-menu"].innerHTML="";else{let t='\n          <x-menuitem value="none"><x-label><x-message href="#gamut-hints.none">None</x-message></x-label></x-menuitem>\n          <hr/>\n        ';for(let e of this.#ae.gamuts)t+=`\n            <x-menuitem value="${e}"><x-label>${this.#ae.getGamutLabel(e)}</x-label></x-menuitem>\n          `;this["#gamut-hints-menu"].innerHTML=t,this["#gamut-hints-menu-item"].hidden=!1}for(let t of this["#gamut-hints-menu"].querySelectorAll("x-menuitem"))t.toggled=t.value===this.#oe;this["#labels-menu-item"].toggled=this.#le}}void 0===customElements.get("x-xyzplanarsliders")&&customElements.define("x-xyzplanarsliders",ga);class fa extends HTMLElement{static observedAttributes=["value","alpha","spaces","disabled"];static#z=Us`<template><header id="header"><x-select id="space-select" size="small"><x-menu id="space-select-menu"><x-menuitem value="srgb"><x-label>sRGB</x-label></x-menuitem><x-menuitem value="srgb-linear"><x-label><x-message href="#color-space.srgb-linear">Linear sRGB</x-message></x-label></x-menuitem><x-menuitem value="a98rgb"><x-label>Adobe RGB</x-label></x-menuitem><x-menuitem value="p3"><x-label>Display P3</x-label></x-menuitem><x-menuitem value="rec2020"><x-label>Rec. 2020</x-label></x-menuitem><x-menuitem value="prophoto"><x-label>ProPhoto RGB</x-label></x-menuitem><hr><x-menuitem value="lch"><x-label>CIE LCH</x-label></x-menuitem><x-menuitem value="oklch"><x-label>OK LCH</x-label></x-menuitem><hr><x-menuitem value="lab"><x-label>CIE LAB</x-label></x-menuitem><x-menuitem value="oklab"><x-label>OK LAB</x-label></x-menuitem><hr><x-menuitem value="xyz-d65"><x-label>CIE XYZ D65</x-label></x-menuitem><x-menuitem value="xyz-d50"><x-label>CIE XYZ D50</x-label></x-menuitem></x-menu></x-select><x-buttons id="type-buttons" tracking="1"><x-button value="planar" skin="flat"><x-icon href="#square"></x-icon></x-button><x-button value="polar" skin="flat"><x-icon href="#circle"></x-icon></x-button><x-button value="linear" skin="flat"><x-icon href="#bars"></x-icon></x-button></x-buttons></header><div id="main"></div><footer id="footer"><x-colorinput id="input" space="srgb" size="small"></x-colorinput><x-button id="grab-button" part="grab-button" size="small" condensed togglable><x-icon href="#eye-dropper"></x-icon></x-button></footer></template>`;static#E=Ys`:host{display:block;width:200px;box-sizing:border-box}:host([hidden]){display:none}#header{display:flex;align-items:center}#space-select{min-width:110px;font-size:0.8125rem}#space-select x-menuitem[data-warn] x-label::after{content:" ⚠"}#type-buttons{margin-left:auto}#type-buttons x-button{margin-left:4px;min-height:1px}#type-buttons x-button x-icon{width:18px;height:18px}#main{margin-top:10px}#sliders{width:100%}:host([context~="x-popover"]) #sliders{height:250px}:host([context~="x-popover"]):host([alpha]) #sliders{height:290px}#footer{display:flex;margin-top:10px}#input{max-width:none;min-height:1px;flex:1}#input:focus{z-index:1}#grab-button{margin:0 0 0 5px;padding:0px 6px}#grab-button x-icon{width:14px;height:14px}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"}set value(t){this.setAttribute("value",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get spaces(){return this.hasAttribute("spaces")?this.getAttribute("spaces").replace(/\s+/g," ").split(" "):["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto","lch","oklch","lab","oklab","xyz-d65","xyz-d50"]}set spaces(t){this.setAttribute("spaces",t.join(" "))}get gamuts(){return Object.keys(this.#$i)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$;#$t;#re=!1;#$i={srgb:{label:"sRGB",isColorInGamut:(t,e,i)=>ue({space:"xyz-d65",coords:[t,e,i]},"srgb")},a98rgb:{label:"Adobe RGB",isColorInGamut:(t,e,i)=>ue({space:"xyz-d65",coords:[t,e,i]},"a98rgb")},p3:{label:"Display P3",isColorInGamut:(t,e,i)=>ue({space:"xyz-d65",coords:[t,e,i]},"p3")},rec2020:{label:"Rec. 2020",isColorInGamut:(t,e,i)=>ue({space:"xyz-d65",coords:[t,e,i]},"rec2020")},prophoto:{label:"Prohopto",isColorInGamut:(t,e,i)=>ue({space:"xyz-d65",coords:[t,e,i]},"prophoto")}};constructor(){super(),this.#$=this.attachShadow({mode:"open"}),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,fa.#E],this.#$.append(document.importNode(fa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#space-select"].addEventListener("change",(()=>this.#Si())),this["#space-select"].addEventListener("open",(()=>this.#Mi())),this["#type-buttons"].addEventListener("toggle",(()=>this.#Li())),this["#main"].addEventListener("pointerdown",(t=>this.#Ai(t)),!0),this["#main"].addEventListener("changestart",(t=>this.#Pi(t))),this["#main"].addEventListener("change",(t=>this.#Ti(t))),this["#main"].addEventListener("changeend",(t=>this.#Ri(t))),this["#input"].addEventListener("change",(t=>this.#Di(t))),this["#input"].addEventListener("keydown",(t=>this.#Bi(t))),this["#grab-button"].addEventListener("toggle",(()=>this.#Oi()))}connectedCallback(){Vn.addEventListener("configchange",this.#$t=t=>{this.#_t(t)}),"x-popover"===this.parentElement?.localName?this.setAttribute("context","x-popover"):this.removeAttribute("context"),this["#type-buttons"].value=Vn.getConfig(`${this.localName}:type`,"planar"),this.#Xt()}disconnectedCallback(){Vn.removeEventListener("configchange",this.#$t)}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Zt():"alpha"===t?this.#Ni():"spaces"===t?this.#Hi():"disabled"===t&&this.#vt())}addGamut(t,e,i){this.#$i[t]?console.error(`Gamut with ID "${t} already exists."`):this.#$i[t]={label:e,isColorInGamut:i}}removeGamut(t){this.#$i[t]?delete this.#$i[t]:console.error(`Gamut with ID "${t} was not found."`)}getGamutLabel(t){return this.#$i[t].label}isColorInGamut(t,e,i,s){return this.#$i[s]?.isColorInGamut(t,e,i)||!1}grab(){return new Promise((async t=>{if(void 0===window.EyeDropper)window.alert("Your web browser does not support Eye Dropper API"),t(null);else{let e,i=new EyeDropper,s=new AbortController;try{e=await i.open({signal:s.signal})}catch(t){e=null}t(e?.sRGBHex||null)}}))}#Zt(){this.isConnected&&(this.#re?this.#Ii():this.#Xt())}#Ni(){for(let t of this["#main"].children)this.alpha?t.setAttribute("alpha",""):t.removeAttribute("alpha");this.alpha?this["#input"].setAttribute("alpha",""):this["#input"].removeAttribute("alpha")}#Hi(){this.isConnected&&this.#Xt()}#vt(){this.isConnected&&this.#Xt()}#_t(t){let{key:e,value:i,origin:s}=t.detail;if("self"===s&&e===`${this.localName}:type`){let t=i||"planar";null===this.offsetParent&&this["#type-buttons"].value!==t&&(this["#type-buttons"].value=t,this.#Xt())}}#Si(){let t=It(this.value);if(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),"srgb"===this["#space-select"].value)this.value=zi(Ci(t,"srgb",{inGamut:!0}),{format:"hex"});else{let e=Ci(t,this["#space-select"].value,{inGamut:!0});for(let t=0;t<e.coords.length;t+=1)(null===e.coords[t]||Number.isNaN(e.coords[t]))&&(e.coords[t]=0);this.value=zi(e,{precision:3})}this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#Li(){Vn.setConfig(`${this.localName}:type`,this["#type-buttons"].value),this.#Xt()}#Ai(t){this["#input"].matches(":focus")&&t.stopImmediatePropagation()}#Pi(){this.#re=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))}#Ti(t){let e=t.target;if("srgb"===e.space){let[e,i,s,n]=t.target.value;this.value=zi({space:"srgb",coords:[e,i,s],alpha:n},{format:"hex"})}else if(["srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(e.space)){let[i,s,n,a]=t.target.value;this.value=zi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("lch"===e.space||"oklch"===e.space){let[i,s,n,a]=t.target.value;this.value=zi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("lab"===e.space||"oklab"===e.space){let[i,s,n,a]=t.target.value;this.value=zi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}else if("xyz-d65"===e.space||"xyz-d50"===e.space){let[i,s,n,a]=t.target.value;this.value=zi({space:e.space,coords:[i,s,n],alpha:a},{format:"default",precision:3})}this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#Ri(){this.#re=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#Di(){this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let t=It(this["#input"].value);"srgb"===this["#space-select"].value?this.value=zi(Ci(t,"srgb",{inGamut:!0}),{format:"hex"}):this.value=zi(Ci(t,this["#space-select"].value,{inGamut:!0}),{precision:3}),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#Bi(t){"Enter"!==t.key&&"Space"!==t.code||this.closest("x-popover")&&t.stopPropagation()}async#Oi(){let t=await this.grab();this["#grab-button"].toggled=!1,null!==t&&(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),"srgb"===this["#space-select"].value?this.value=t:this.value=zi(Ci(It(t),this["#space-select"].value,{inGamut:!0}),{precision:3}),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})))}#Xt(){let t=this.#ji();this.#Gi(t),this.#Fi(t),this.#Xi(t),this.#Ct(t),this.#_i()}#Gi(t=this.#ji()){return new Promise((async e=>{let i=this.spaces;if(await customElements.whenDefined("x-select"),this["#space-select"].value=t.spaceId,1===i.length)this["#space-select"].hidden=!0;else{this["#space-select"].hidden=!1,this["#space-select"].disabled=this.disabled;for(let t of this["#space-select-menu"].children)"x-menuitem"===t.localName&&(t.disabled=!i.includes(t.value))}e()}))}async#Mi(){let t=this.#ji();for(let e of this["#space-select-menu"].children)if("x-menuitem"===e.localName){let i=Fs(e.value);if(i){let[s,n,a]=Ci(t,"xyz-d65").coords;await this.isColorInGamut(s,n,a,i)?e.removeAttribute("data-warn"):e.setAttribute("data-warn","")}else e.removeAttribute("data-warn")}}#Fi(t=this.#ji()){let e;["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(t.spaceId)?e=["planar","polar","linear"]:["lch","oklch","lab","oklab","xyz-d65","xyz-d50"].includes(t.spaceId)&&(e=["planar","linear"]),!1===e.includes(this["#type-buttons"].value)&&(this["#type-buttons"].value=e[0]);for(let t of this["#type-buttons"].children)t.disabled=this.disabled,t.hidden=!1===e.includes(t.value)||e.length<=1}#Xi(e=this.#ji()){return new Promise((async i=>{let s,n=this["#type-buttons"].value,a=e.spaceId,r=[...e.coords,e.alpha];["srgb","srgb-linear","a98rgb","p3","rec2020","prophoto"].includes(a)?"linear"===n?s="x-rgblinearsliders":"planar"===n?s="x-rgbplanarsliders":"polar"===n&&(s="x-rgbpolarsliders"):"lch"===a||"oklch"===a?"linear"===n?s="x-lchlinearsliders":"planar"===n&&(s="x-lchplanarsliders"):"lab"===a||"oklab"===a?"linear"===n?s="x-lablinearsliders":"planar"===n&&(s="x-labplanarsliders"):"xyz-d65"!==a&&"xyz-d50"!==a||("linear"===n?s="x-xyzlinearsliders":"planar"===n&&(s="x-xyzplanarsliders")),this["#main"].firstElementChild?.localName!==s&&(this["#main"].innerHTML="",this["#sliders"]=t(s),this["#sliders"].setAttribute("id","sliders"),this["#sliders"].setAttribute("exportparts","slider"),this["#main"].append(this["#sliders"])),await customElements.whenDefined(s),this["#sliders"].space=a,this["#sliders"].value=r,this["#sliders"].alpha=this.alpha,this["#sliders"].disabled=this.disabled,i()}))}#Ct(t=this.#ji()){this["#input"].space=t.spaceId,this["#input"].alpha=this.alpha,this["#input"].value=zi(t),this["#input"].disabled=this.disabled}#Ii=Yn(this.#Ct,50,this);#_i(){this["#grab-button"].disabled=this.disabled}#ji(){let t=It(this.value);!1===this.spaces.includes(t.spaceId)&&(t="hsl"===t.spaceId||"hwb"===t.spaceId?Ci(t,"srgb",{inGamut:!0}):Ci(t,"p3",{inGamut:!0}));for(let e=0;e<t.coords.length;e+=1)(null===t.coords[e]||Number.isNaN(t.coords[e]))&&(t.coords[e]=0);return void 0===t.spaceId&&(t.spaceId=t.space.id),t.coords=t.coords.map((t=>Number.parseFloat(t))),t}}void 0===customElements.get("x-colorpicker")&&customElements.define("x-colorpicker",fa);class xa extends HTMLElement{static observedAttributes=["value","alpha","spaces","disabled","size"];static#z=Us`<template><div id="preview"></div><x-popover id="popover" part="popover" modal><x-colorpicker id="color-picker"></x-colorpicker></x-popover></template>`;static#E=Ys`:host{display:block;width:32px;height:32px;box-sizing:border-box;position:relative;overflow:hidden;background:var(--checkboard-background)}:host([hidden]){display:none}:host([disabled]){pointer-events:none;opacity:0.4}#preview{width:100%;height:100%}#popover{overflow:visible;--align: left;}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"}set value(t){this.setAttribute("value",t)}get alpha(){return this.hasAttribute("alpha")}set alpha(t){t?this.setAttribute("alpha",""):this.removeAttribute("alpha")}get spaces(){return this.hasAttribute("spaces")?this.getAttribute("spaces").replace(/\s+/g," ").split(" "):["srgb","p3"]}set spaces(t){this.setAttribute("spaces",t.join(" "))}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#X=!1;#Zi=!1;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,xa.#E],this.#$.append(document.importNode(xa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("keydown",(t=>this.#q(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this["#preview"].addEventListener("click",(t=>this.#T(t))),this["#popover"].addEventListener("close",(()=>this.#Ui())),this["#color-picker"].addEventListener("changestart",(()=>this.#Yi())),this["#color-picker"].addEventListener("change",(t=>this.#Vi(t))),this["#color-picker"].addEventListener("changeend",(()=>this.#Wi()))}connectedCallback(){this["#color-picker"].setAttribute("value",this.value),this.#J(),this.#qi()}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Zt():"alpha"===t?this.#Ni():"spaces"===t?this.#Hi():"disabled"===t?this.#vt():"size"===t&&this.#Ki())}async#Vt(){!1===this.hasAttribute("expanded")&&(this.#X=this.matches(":focus"),this.setAttribute("expanded",""),await this["#popover"].open(this),this["#popover"].focus())}async#qt(){if(this.hasAttribute("expanded")){if(this["#popover"].setAttribute("closing",""),await this["#popover"].close(),this.removeAttribute("expanded"),this.#X)this.focus();else{let t=i(this.parentNode,"[tabindex]");t&&t.focus()}this["#popover"].removeAttribute("closing")}}#qi(){this["#preview"].style.background=this.value}#J(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#Zt(){!1===this.#Zi&&(this.#qi(),this["#color-picker"].getAttribute("value")!==this.getAttribute("value")&&this["#color-picker"].setAttribute("value",this.getAttribute("value")))}#Ni(){this["#color-picker"].alpha=this.alpha}#Hi(){this["#color-picker"].spaces=this.spaces}#vt(){this.#J()}#Ki(){this["#color-picker"].size=this.size}#Yi(){this.#Zi=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))}#Vi(){this.value=this["#color-picker"].value,this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#qi()}#Wi(){this.#Zi=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}#Y(t){t.target===this&&!1===this.matches(":focus")&&t.preventDefault()}#T(t){!1===this["#popover"].opened&&(t.preventDefault(),this.#Vt())}#q(t){"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code?(t.preventDefault(),t.stopPropagation(),this.hasAttribute("expanded")?this.#qt():this.#Vt()):"Escape"===t.code?this.hasAttribute("expanded")&&(t.preventDefault(),this.#qt()):"Tab"===t.code&&this.hasAttribute("expanded")&&t.preventDefault()}#Ui(){this.dispatchEvent(new CustomEvent("collapse")),this.#qt()}}customElements.define("x-colorselect",xa);class wa extends HTMLElement{static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:block;position:fixed;width:0px;height:0px;font-size:0.875rem;z-index:1001}
`;get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;#Ji=null;#Qi=null;#ts=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[wa.#E],this.#$.append(document.importNode(wa.#z.content,!0)),this["#backdrop"]=t("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)",this["#backdrop"].addEventListener("contextmenu",(t=>this.#es(t))),this["#backdrop"].addEventListener("pointerdown",(t=>this.#ut(t))),this["#backdrop"].addEventListener("click",(t=>this.#At(t))),this.addEventListener("blur",(()=>this.#is())),this.addEventListener("keydown",(t=>this.#q(t)),!0),this.addEventListener("click",(t=>this.#T(t)))}connectedCallback(){this.#Ji=this.parentElement||this.parentNode.host,window.addEventListener("blur",this.#Qi=()=>{this.#is()}),this.#Ji.addEventListener("contextmenu",this.#ts=t=>{this.#ss(t)})}disconnectedCallback(){window.removeEventListener("blur",this.#Qi),this.#Ji.removeEventListener("contextmenu",this.#ts),this.#Ji=null}open(t,e){let i=this.querySelector("x-menu");!1===i.opened&&(i.openAtPoint(t,e),this["#backdrop"].ownerElement=i,this["#backdrop"].show(!1),i.focus())}close(){return new Promise((async t=>{this["#backdrop"].hide(!1);let e=this.querySelector("x-menu");if(e&&!0===e.opened&&(await e.close(),this.isConnected)){let t=i(this.parentNode,"[tabindex]");t&&t.focus()}t()}))}#is(){this.close()}#ss(t){!1===this.disabled&&(t.preventDefault(),this.open(t.clientX,t.clientY))}#es(t){"touch"!==t.pointerType&&(t.preventDefault(),t.stopImmediatePropagation(),this.close().then((()=>{let e=((t,e,i=!0)=>{let s=document.elementFromPoint(t,e);if(i&&s)for(;;){let i=s.shadowRoot||s._shadowRoot;if(!i)break;{let n=i.elementFromPoint(t,e);if(n.getRootNode()!==i&&(n=null),!n||n===s)break;s=n}}return s})(t.clientX,t.clientY,!0),i=new MouseEvent(t.type,t);e.dispatchEvent(i)})))}#ut(t){t.buttons<=1&&"touch"!==t.pointerType&&(t.preventDefault(),t.stopImmediatePropagation(),this.close())}#At(t){"touch"===t.pointerType&&this.close()}async#T(t){let e=t.target.closest("x-menuitem");if(e&&!1===e.disabled){let t=e.querySelector("x-menu");t?t.opened?t.close():t.openNextToElement(e,"horizontal"):(this.setAttribute("closing",""),await e.whenTriggerEnd,await this.close(),this.removeAttribute("closing"))}}#q(t){if("Escape"===t.code){this.querySelector("x-menu").opened&&(t.preventDefault(),this.close())}else if("Tab"===t.code){t.preventDefault(),t.stopPropagation(),this.querySelector("x-menu").focusNextMenuItem()}}}customElements.define("x-contextmenu",wa);class va extends HTMLElement{static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:none;width:300px;height:100%;left:0px;right:auto;top:0px;bottom:auto;padding:0;box-sizing:border-box;border-width:0;transition-duration:200ms;transition-timing-function:linear}:host([position="right"]){top:0px;bottom:auto;left:auto;right:0px}:host([position="top"]){top:0px;bottom:auto;left:0px;right:auto;width:100%;height:300px}:host([position="bottom"]){top:auto;bottom:0px;left:0px;right:auto;width:100%;height:300px}:host([popover]){display:block}:host(:popover-open){display:block}:host([hidden]){display:none}:host(:focus){outline:none}:host::backdrop{background-color:color(srgb 0 0 0 / 0.25);transition-property:all;transition-duration:200ms;transition-timing-function:linear;transition-behavior:allow-discrete}
`;get position(){return this.hasAttribute("position")?this.getAttribute("position"):"left"}set position(t){this.setAttribute("position",t)}get manual(){return this.hasAttribute("manual")}set manual(t){t?this.setAttribute("manual",""):this.removeAttribute("manual")}#$=null;#ns;#as;#rs;showPopover=void 0;hidePopover=void 0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[va.#E],this.#$.append(document.importNode(va.#z.content,!0)),this.addEventListener("pointerdown",(t=>{t.stopPropagation()})),this.addEventListener("click",(t=>{t.stopPropagation()}))}open(){return new Promise((async t=>{if(!1===this.isConnected)return void t();this.#ns&&await this.#ns.finished,this.#as&&await this.#as.finished,this.setAttribute("popover","manual"),this.setAttribute("tabindex","0"),this.setAttribute("position",this.position);let e=getComputedStyle(this),i=1e3*Number.parseFloat(e.getPropertyValue("transition-duration")||"0s"),s=e.getPropertyValue("transition-timing-function"),n=this.getBoundingClientRect();"left"===this.position?this.#ns=this.animate({transform:[`translateX(-${n.right}px)`,"translateX(0px)"]},{duration:i,easing:s}):"right"===this.position?this.#ns=this.animate({transform:[`translateX(${n.width}px)`,"translateX(0px)"]},{duration:i,easing:s}):"top"===this.position?this.#ns=this.animate({transform:[`translateY(-${n.bottom}px)`,"translateY(0px)"]},{duration:i,easing:s}):"bottom"===this.position&&(this.#ns=this.animate({transform:[`translateY(${n.height}px)`,"translateY(0px)"]},{duration:i,easing:s})),window.addEventListener("click",this.#rs=t=>{if("finished"===this.#ns.playState&&this.popover){let e=this.getBoundingClientRect();!1===Pi(e,{x:t.clientX,y:t.clientY})&&(this.manual||this.close())}}),super.showPopover(),t()}))}close(){return new Promise((async t=>{this.#ns&&await this.#ns.finished,this.#as&&await this.#as.finished,window.removeEventListener("click",this.#rs);let e=getComputedStyle(this),i=1e3*Number.parseFloat(e.getPropertyValue("transition-duration")||"0s"),s=e.getPropertyValue("transition-timing-function")||"ease",n=this.getBoundingClientRect();"left"===this.position?this.#as=this.animate({transform:["translateX(0px)",`translateX(-${n.right}px)`]},{duration:i,easing:s}):"right"===this.position?this.#as=this.animate({transform:["translateX(0px)",`translateX(${n.width}px)`]},{duration:i,easing:s}):"top"===this.position?this.#as=this.animate({transform:["translateY(0px)",`translateY(-${n.bottom+50}px)`]},{duration:i,easing:s}):"bottom"===this.position&&(this.#as=this.animate({transform:["translateY(0px)",`translateY(${n.height}px)`]},{duration:i,easing:s})),this.#as&&(await this.#as.finished,this.#as=null),super.hidePopover(),this.removeAttribute("popover"),this.removeAttribute("tabindex"),t()}))}toggle(){this.hasAttribute("popover")?this.close():this.open()}}customElements.define("x-drawer",va);class ya extends HTMLElement{static observedAttributes=["href"];static#z=Us`<template><svg id="svg" preserveAspectRatio="none" viewBox="0 0 100 100" width="0px" height="0px"></svg><slot></slot></template>`;static#E=Ys`:host{display:block;color:currentColor;display:flex;align-items:center;justify-content:center;width:17px;height:17px}:host([disabled]){opacity:0.5}:host([hidden]){display:none}#svg{width:100%;height:100%;fill:currentColor;stroke:none;overflow:inherit;pointer-events:none}
`;get href(){return this.hasAttribute("href")?this.getAttribute("href"):""}set href(t){this.setAttribute("href",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#os=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[ya.#E],this.#$.append(document.importNode(ya.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#W()))}connectedCallback(){Vn.addEventListener("iconschange",this.#os=()=>{this.#Xt()})}disconnectedCallback(){Vn.removeEventListener("iconschange",this.#os)}attributeChangedCallback(t,e,i){e!==i&&"href"===t&&this.#Xt()}#V(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#W(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}async#Xt(){let t=null,e=this.href.trim();if(""!==e){let i=null,s=null;if(e.includes("#")){let t=e.split("#");""!==t[0]&&(i=t[0]),""!==t[1]&&(s=t[1])}if(null!==s)if(null===i)await Vn.whenIconsReady,t=Vn.queryIcon("#"+CSS.escape(s));else{let e=await qs(i);e&&(t=e.querySelector("#"+CSS.escape(s)))}}if(t){let e=new Set;for(let i of t.querySelectorAll("*"))for(let s of["fill","stroke"]){let a="";if(""!==i.style[s]?a=i.style[s].trim():i.hasAttribute(s)&&(a=i.getAttribute(s).trim()),a.startsWith("url(")&&a.endsWith(")")&&(a=a.substring(a.indexOf("(")+1,a.indexOf(")")),a=a.replace(/['"]+/g,""),a.startsWith("#"))){let i=t.ownerSVGElement.querySelector(a);if(i){e.add(i);for(let t of n(i))e.add(t)}}}e=[...e].filter((e=>!1===t.contains(e)));let i="";e.length>0&&(i="<defs>"+e.map((t=>t.outerHTML)).join("")+"</defs>"),this["#svg"].setAttribute("viewBox",t.getAttribute("viewBox")),this["#svg"].innerHTML=i+t.innerHTML}else this["#svg"].innerHTML=""}}customElements.define("x-icon",ya);class ka extends HTMLElement{static observedAttributes=["type","value","spellcheck","minlength","maxlength","readonly","disabled","validation"];static#z=Us`<template><div id="main"><slot></slot><input id="input" spellcheck="false" part="input"></div></template>`;static#E=Ys`:host{display:block;position:relative;max-width:160px;height:32px;box-sizing:border-box;font-size:0.78125rem}:host(:focus){z-index:10}:host(:hover){cursor:text}:host([mixed]){color:rgba(0, 0, 0, 0.7)}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}#main{display:flex;align-items:center;width:100%;height:100%}#input{width:100%;height:100%;padding:0 6px;box-sizing:border-box;color:inherit;background:none;border:none;outline:none;font-family:inherit;font-size:inherit;font-weight:inherit;text-align:inherit;cursor:inherit;z-index:1}#input:-webkit-autofill{z-index:1}#input:-internal-autofill-previewed, #input:-internal-autofill-selected{-webkit-box-shadow:var(--autofill-background-color) 0px 0px 0px 30px inset}:host(:not(:focus)) ::selection{color:inherit;background:transparent}
`;get type(){return this.hasAttribute("type")?this.getAttribute("type"):"text"}set type(t){this.setAttribute("type",t)}get value(){return this["#input"].value}set value(t){this["#input"].value!==t&&(this.matches(":focus")?(this["#input"].selectionStart=0,this["#input"].selectionEnd=this["#input"].value.length,document.execCommand("insertText",!1,t)):this["#input"].value=t,"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#ls)&&this.reportValidity(),this.#zt())}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get minLength(){return this.hasAttribute("minlength")?Number.parseInt(this.getAttribute("minlength")):0}set minLength(t){this.setAttribute("minlength",t)}get maxLength(){return this.hasAttribute("maxlength")?Number.parseInt(this.getAttribute("maxlength")):Number.POSITIVE_INFINITY}set maxLength(t){this.setAttribute("maxlength",t)}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get readOnly(){return this.hasAttribute("readonly")}set readOnly(t){!0===t?this.setAttribute("readonly",t):this.removeAttribute("readonly")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get validation(){return this.hasAttribute("validation")?this.getAttribute("validation"):"auto"}set validation(t){this.setAttribute("validation",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#$=null;#U=0;#hs=0;#Et=null;#ls=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[ka.#E],this.#$.append(document.importNode(ka.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#W())),this.addEventListener("focusin",(t=>this.#Pt(t))),this.addEventListener("focusout",(t=>this.#Tt(t))),this.addEventListener("keydown",(t=>this.#q(t))),this["#input"].addEventListener("input",(t=>this.#Rt(t))),this["#input"].addEventListener("change",(t=>this.#Di(t))),this["#input"].addEventListener("search",(t=>this.#Bt(t)))}connectedCallback(){this.#J(),this.#zt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#ls)&&this.reportValidity()}attributeChangedCallback(t,e,i){e!==i&&("type"===t?this.#ds():"value"===t?this.#Zt():"spellcheck"===t?this.#cs():"minlength"===t?this.#us():"maxlength"===t?this.#ps():"readonly"===t?this.#ms():"disabled"===t?this.#vt():"validation"===t&&this.#bs())}selectAll(){this["#input"].select()}clear(){this.value="",this.#Et=null,this.#ls=null,this.#Yt()}reportValidity(){let t=new CustomEvent("beforevalidate",{bubbles:!1,cancelable:!0});return this.dispatchEvent(t),!1===t.defaultPrevented&&(this.value.length<this.minLength?this.#Et={href:"#entered-text-is-too-short"}:this.value.length>this.maxLength?this.#Et={href:"#entered-text-is-too-long"}:this.required&&0===this.value.length?this.#Et={href:"#required-field"}:"email"===this.type&&!1===this["#input"].validity.valid?this.#Et={href:"#invalid-email"}:"url"===this.type&&!1===this["#input"].validity.valid?this.#Et={href:"#invalid-url"}:"color"===this.type&&!1===_s(this["#input"].value)?this.#Et={href:"#invalid-color"}:this.#Et=null,this.#Yt()),null===this.#Et&&null===this.#ls}setCustomValidity(t){this.#ls=""===t?null:t,this.#Yt()}#Yt(){let e=this.#ls||this.#Et;e?this.setAttribute("error",""):this.removeAttribute("error");{let i=this.querySelector(':scope > x-tooltip[type="error"]');if(e&&this.matches(":focus")){if(i||(i=t("x-tooltip"),i.setAttribute("type","error"),this.append(i)),e.href){let t=e.args?Object.entries(e.args).map((([t,e])=>`${t}:${e}`)).join(","):"";i.innerHTML=`<x-message href="${e.href}" args="${t}"></x-message>`}else i.innerHTML=e;Zn(10).then((()=>{i.open(this)}))}else i&&i.close().then((()=>i.remove()))}}#zt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#J(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.setAttribute("aria-readonly",this.readOnly),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#ds(){"color"===this.type?this["#input"].type="text":this["#input"].type=this.type}#Zt(){this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&this.selectAll()}#cs(){this["#input"].spellcheck=this.spellcheck}#us(){this["#input"].minLength=this.minLength}#ps(){this["#input"].maxLength=this.maxLength}#ms(){this["#input"].readOnly=this.readOnly,this.#J()}#vt(){this["#input"].disabled=this.disabled,this.#J()}#bs(){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#ls)&&this.reportValidity()}#T(){this.#Yt()}#V(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#W(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#Pt(){this.#Yt(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#Tt(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),"auto"===this.validation||"instant"===this.validation?this.reportValidity():"manual"===this.validation&&this.#Yt()}#q(t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(document.execCommand("selectAll"),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||this.reportValidity())}#Rt(t){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#ls)&&this.reportValidity(),t.stopPropagation(),this.#zt(),this.dispatchEvent(new CustomEvent("input",{bubbles:!0}))}#Di(t){this.#hs=t.timeStamp,this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}#Bt(t){t.timeStamp-this.#hs>100&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}customElements.define("x-input",ka);class Ca extends HTMLElement{static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:block;cursor:inherit;user-select:none;-webkit-user-select:none;box-sizing:border-box;font-size:0.8125rem;font-weight:400;line-height:1.2}:host([disabled]){opacity:0.5}:host([hidden]){display:none}:host([level="1"]){margin:12px 0px;font-size:1.625rem;font-weight:600}:host([level="2"]){margin:10px 0px;font-size:1rem;font-weight:700}:host([level="3"]){margin:8px 0px;font-size:0.8125rem;font-weight:700}:host([level="4"]){margin:4px 0px;font-size:0.75rem;font-weight:500}slot{text-decoration:inherit}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get level(){return this.hasAttribute("level")?Number.parseInt(this.getAttribute("level")):null}set level(t){null===t?this.removeAttribute("level"):this.setAttribute("level",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ca.#E],this.#$.append(document.importNode(Ca.#z.content,!0))}}customElements.define("x-label",Ca);class za extends HTMLElement{static observedAttributes=["href","args","autocapitalize","ellipsis"];get href(){return this.hasAttribute("href")?this.getAttribute("href"):""}set href(t){this.setAttribute("href",t)}get args(){let t=Object.create(null),e=this.hasAttribute("args")?this.getAttribute("args").trim():"";if(""!==e)for(let i of e.split(",")){let[e,...s]=i.split(":"),n=s.join(":");e=e.trim(),n=n.trim();let a=Number.parseFloat(n),r=n-a+1>=0;t[e]=r?a:n}return t}set args(t){let e=Object.keys(t).map((e=>`${e}: ${t[e]}`)).join(", ");0===t.length?this.removeAttribute("args"):this.setAttribute("args",e)}get autocapitalize(){return!!this.hasAttribute("autocapitalize")}set autocapitalize(t){t?this.setAttribute("autocapitalize",""):this.removeAttribute("autocapitalize")}get ellipsis(){return this.hasAttribute("ellipsis")}set ellipsis(t){t?this.setAttribute("ellipsis",""):this.removeAttribute("ellipsis")}get whenReady(){return new Promise((t=>{null===this.#gs?t():this.#gs.push(t)}))}#fs=null;#St=null;#gs=[];#xs="";constructor(){super(),this.textContent.length>0&&(this.#xs=this.textContent)}connectedCallback(){this.#Xt(),Vn.addEventListener("localeschange",this.#fs=()=>{this.#Xt()}),Vn.addEventListener("themechange",this.#St=()=>{this.#Xt()})}disconnectedCallback(){Vn.removeEventListener("localeschange",this.#fs),Vn.removeEventListener("themechange",this.#St)}attributeChangedCallback(t,e,i){e!==i&&!1!==this.isConnected&&("href"===t||"args"===t||"autocapitalize"===t||"ellipsis"===t)&&this.#Xt()}async#Xt(){await Vn.whenLocalesReady;let t=Vn.queryMessage(this.href,this.args);if(t.fallback&&this.#xs?this.textContent=this.#xs:"html"===t.format?this.innerHTML=t.content+(this.ellipsis?"…":""):!0===this.autocapitalize&&"titlecase"===Vn.autocapitalize?this.textContent=(t=>{let e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|v.?|vs.?|via)$/i,i=/([A-Za-z0-9\u00C0-\u00FF])/;return t.split(/([ :–—-])/).map(((t,s,n)=>t.search(e)>-1&&0!==s&&s!==n.length-1&&":"!==n[s-3]&&":"!==n[s+1]&&("-"!==n[s+1]||"-"===n[s-1]&&"-"===n[s+1])?t.toLowerCase():t.substr(1).search(/[A-Z]|\../)>-1||":"===n[s+1]&&""!==n[s+2]?t:t.replace(i,(t=>t.toUpperCase())))).join("")})(t.content)+(this.ellipsis?"…":""):this.textContent=t.content+(this.ellipsis?"…":""),null!==this.#gs){for(let t of this.#gs)t();this.#gs=null}}}customElements.define("x-message",za);let Ea=t=>{let[e,i,...s]=t.trim().split(" ");return[i,Number.parseFloat(e),s.join(" ")]};class $a extends HTMLElement{static observedAttributes=["opened"];static#z=Us`<template><slot id="slot"></slot></template>`;static#E=Ys`:host{display:none;top:0;left:0;width:fit-content;padding:4px 0;z-index:1001;box-sizing:border-box;background:white;cursor:default;overflow:auto;flex-direction:column;-webkit-app-region:no-drag;--align: start;--scrollbar-background: rgba(0, 0, 0, 0.2);--scrollbar-width: 6px;--open-transition: none;--close-transition: none;}:host([opened]), :host([animating]){display:flex}:host(:focus){outline:none}:host-context([debug]):host(:focus){outline:2px solid red}::-webkit-scrollbar{max-width:var(--scrollbar-width);background:none}::-webkit-scrollbar-thumb{background-color:var(--scrollbar-background)}::-webkit-scrollbar-corner{display:none}
`;get opened(){return this.hasAttribute("opened")}#$=null;#ws=[];#vs=null;#ys=null;#ks=0;#Cs=0;#zs=!1;#Es=!1;#$s=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[$a.#E],this.#$.append(document.importNode($a.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("pointerover",(t=>this.#Ss(t))),this.addEventListener("pointerout",(t=>this.#Ms(t))),this.addEventListener("pointermove",(t=>this.#Ls(t))),this.addEventListener("keydown",(t=>this.#q(t))),this.addEventListener("wheel",(t=>this.#As(t)),{passive:!1}),this.addEventListener("scroll",(t=>this.#Ps(t)),{passive:!0})}connectedCallback(){this.setAttribute("role","menu"),this.setAttribute("aria-hidden",!this.opened),this.setAttribute("tabindex","0")}attributeChangedCallback(t,e,i){e!==i&&"opened"===t&&this.#Ts()}openOverElement(t,e){return new Promise((async i=>{let s=this.querySelectorAll(":scope > x-menuitem");if(s.length>0){this.#zs=!0,this.#$s=Un(),this.#Rs(),this.setAttribute("opened","");let i=[...s].find((t=>t.contains(e)))||s[0],n=this.getBoundingClientRect(),a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=0,l=0;i.focus(),0===n.top&&0===n.left||(o=-n.left,l=-n.top),this.style.left=a.x-(r.x-n.x)+o+"px",this.style.top=a.y-(r.y-n.y)+l+"px",n=this.getBoundingClientRect(),n.left<7&&(this.style.left=7+o+"px",n=this.getBoundingClientRect());7-n.top>0&&(this.style.height=n.bottom-7+"px",this.style.top=7+l+"px",this.scrollTop=9999,n=this.getBoundingClientRect());if(n.bottom+7>window.innerHeight){let t=n.bottom-window.innerHeight,e=n.height-t-7;this.style.height=e+"px"}if(n.right+7>window.innerWidth){let t=n.right-window.innerWidth,e=n.width-t-7;this.style.width=`${e}px`}{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Ea(t);if("transform"===e){let t=this.getBoundingClientRect(),e=a.y+a.height/2-t.top;await this.animate({transform:["scaleY(0)","scaleY(1)"],transformOrigin:[`0 ${e}px`,`0 ${e}px`]},{duration:i,easing:s}).finished}}this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),this.#Cs=l}i()}))}openOverLabel(t){return new Promise((async e=>{let i=this.querySelectorAll(":scope > x-menuitem");if(i.length>0){this.#Rs(),this.setAttribute("opened",""),this.#zs=!0,this.#$s=Un();let e=[...i].find((e=>{let i=e.querySelector("x-label");return!(!i||i.textContent!==t.textContent)}));e||(e=i[0]);let s=e.querySelector("x-label");await this.openOverElement(t,s)}e()}))}openNextToElement(t,e="horizontal",i=0){return new Promise((async s=>{this.#zs=!1,this.#$s=Un(),this.#Rs(),this.setAttribute("opened",""),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),"x-menuitem"===t.localName&&t.setAttribute("expanded","");let n=getComputedStyle(this).getPropertyValue("--align").trim(),a=t.getBoundingClientRect(),r=this.getBoundingClientRect(),o=0,l=0;if(0===r.top&&0===r.left||(o=-r.left,l=-r.top),"horizontal"===e){this.style.top=a.top+l+"px",this.style.left=a.left+a.width+i+o+"px";let t="right";{let t=this.getBoundingClientRect();t.width>window.innerWidth-10&&(this.style.width=window.innerWidth-10+"px"),t.height>window.innerHeight-10&&(this.style.height=window.innerHeight-10+"px")}{let e=this.getBoundingClientRect();e.left+e.width+7>window.innerWidth&&(a.left>e.width+7?(this.style.left=a.left-e.width+o+"px",t="left"):a.left>window.innerWidth-(a.left+a.width)?(this.style.left=7+o+"px",t="left"):(this.style.left=window.innerWidth-e.width-7+o+"px",t="right"))}{let t=this.getBoundingClientRect();if(t.top+t.height+7>window.innerHeight){let e=t.top+t.height+7-window.innerHeight;this.style.top=t.top-e+l+"px"}}{let e=getComputedStyle(this).getPropertyValue("--open-transition"),[i,s,n]=Ea(e);"transform"===i&&await this.animate({transform:["scale(0, 0)","scale(1, 1)"],transformOrigin:["left"===t?"100% 0":"0 0","left"===t?"100% 0":"0 0"]},{duration:s,easing:n}).finished}}else if("vertical"===e){this.style.top=a.top+a.height+i+l+"px",this.style.left="0px";let e="bottom";{let t=this.getBoundingClientRect();t.width>window.innerWidth-10&&(this.style.width=window.innerWidth-10+"px"),t.height>window.innerHeight-10&&(this.style.height=window.innerHeight-10+"px")}if(t.parentElement&&"x-menubar"===t.parentElement.localName){let t=this.getBoundingClientRect();t.top+t.height+7>window.innerHeight&&(this.style.height=window.innerHeight-(a.top+a.height)-10+"px")}else{let t=this.getBoundingClientRect();t.top+t.height+7>window.innerHeight&&(a.top>t.height+7?(this.style.top=a.top-t.height-i+l+"px",e="top"):a.top>window.innerHeight-(a.top+a.height)?(this.style.top=7+l+"px",e="top"):(this.style.top=window.innerHeight-t.height-7+l+"px",e="bottom"))}if("start"===n){this.style.left=a.left+o+"px";{let t=this.getBoundingClientRect();t.left+t.width+7>window.innerWidth&&(this.style.left=a.left+a.width-t.width+o+"px")}this.getBoundingClientRect().left<7&&(this.style.left=7+o+"px")}else if("end"===n){this.style.left=a.left+a.width-r.width+o+"px";this.getBoundingClientRect().left<7&&(this.style.left=a.left+o+"px");{let t=this.getBoundingClientRect();t.left+t.width+7>window.innerWidth&&(this.style.left=window.innerWidth-7+o+"px")}}{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[i,s,n]=Ea(t);"transform"===i&&await this.animate({transform:["scale(1, 0)","scale(1, 1)"],transformOrigin:["top"===e?"0 100%":"0 0","top"===e?"0 100%":"0 0"]},{duration:s,easing:n}).finished}}this.#Cs=l,s()}))}openAtPoint(t,e){return new Promise((async i=>{this.#zs=!1,this.#$s=Un(),this.#Rs(),this.setAttribute("opened",""),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this}));let s=0,n=0,a=[...this.querySelectorAll(":scope > x-menuitem > x-label > x-message")];await Promise.all(a.map((t=>t.whenReady)));let r=this.getBoundingClientRect();0===r.top&&0===r.left||(s=-r.left,n=-r.top),this.style.left=t+s+"px",this.style.top=e+n+"px",r=this.getBoundingClientRect(),r.right+7>window.innerWidth&&(t-=r.width,this.style.left=t+s+"px",r=this.getBoundingClientRect()),r.bottom+7>window.innerHeight&&(e=e+window.innerHeight-(r.top+r.height)-7,this.style.top=e+n+"px",r=this.getBoundingClientRect(),r.top<7&&(e=7,this.style.top=e+n+"px",this.style.height=window.innerHeight-7-7+"px"));{let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e]=Ea(t);"transform"===e&&await this.animate({transform:["scale(0)","scale(1)"],transformOrigin:["0 0","0 0"]},{duration:80,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)"}).finished}this.#Cs=n,i()}))}close(t=!0){return new Promise((async e=>{if(this.opened){this.removeAttribute("opened"),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this}));let e=this.closest("x-menuitem");if(e&&e.removeAttribute("expanded"),t){this.setAttribute("animating","");let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=Ea(t);"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished,this.removeAttribute("animating")}for(let t of this.querySelectorAll(":scope > x-menuitem")){let e=t.querySelector("x-menu[opened]");e&&e.close()}}e()}))}focusNextMenuItem(){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){let e=null;for(let i=t.nextElementSibling;i;i=i.nextElementSibling)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(null===e&&null!=t.parentElement)for(let i of t.parentElement.children)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(e){e.focus();let i=t.querySelector("x-menu");i&&i.close()}}else this.focusFirstMenuItem()}focusPreviousMenuItem(){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){let e=null;for(let i=t.previousElementSibling;i;i=i.previousElementSibling)if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(null===e&&null!=t.parentElement)for(let i of[...t.parentElement.children].reverse())if("x-menuitem"===i.localName&&!1===i.disabled&&!1===i.hidden){e=i;break}if(e){e.focus();let i=t.querySelector("x-menu");i&&i.close()}}else this.focusLastMenuItem()}focusFirstMenuItem(){let t=this.querySelectorAll("x-menuitem:not([disabled]):not([hidden])")[0]||null;t&&t.focus()}focusLastMenuItem(){let t=this.querySelectorAll("x-menuitem:not([disabled]):not([hidden])"),e=t.length>0?t.at(-1):null;e&&e.focus()}#Ds(t){let e=0;{let t=this.#ws.at(-1),i=this.#ws[0];if(this.querySelector("x-menu[opened]")&&t){i||(i=t);let s=this.getBoundingClientRect(),n={x:s.left,y:s.top-75},a={x:s.left+s.width,y:n.y},r={x:s.left,y:s.top+s.height+75},o={x:s.left+s.width,y:r.y},l=!0;if((i.x<s.left||i.x>o.x||i.y<s.top||i.y>o.y)&&(l=!1),this.#ys&&t.x===this.#ys.x&&t.y===this.#ys.y&&(l=!1),l){let s,n;s=a,n=o;let r=(t,e)=>(e.y-t.y)/(e.x-t.x),l=r(t,s),h=r(t,n),d=r(i,s),c=r(i,n);l<d&&h>c?(this.#ys=t,e=300):this.#ys=null}}}e>0?this.#vs=setTimeout((()=>{this.#Ds(t)}),e):t()}#Bs(){this.#vs&&(clearTimeout(this.#vs),this.#vs=null)}#Rs(){this.style.position="fixed",this.style.top="0px",this.style.left="0px",this.style.width=null,this.style.height=null,this.style.minWidth=null,this.style.maxWidth=null}#Os(){return this.matches("*[closing], *[closing] x-menu")}#Ts(){this.setAttribute("aria-hidden",!this.opened)}#Y(t){if(t.target!==this&&"hr"!==t.target.localName||t.stopPropagation(),"touch"===t.pointerType&&t.target.closest("x-menu")===this){!1===this.#Es&&this.#Ns();{let e=t.target.closest("x-menuitem");e&&!1===e.disabled&&e.closest("x-menu")===this?!1===e.matches(":focus")&&this.#Ds((()=>{let t=this.querySelector(":scope > x-menuitem:focus");if(t){let e=t.querySelector("x-menu");e&&e.close()}let i=e.querySelector("x-menu"),s=[...this.querySelectorAll(":scope > x-menuitem")].filter((t=>t!==e));i&&!1===i.opened&&i.openNextToElement(e,"horizontal");for(let t of s){let e=t.querySelector("x-menu");e&&e.close()}})):this.#Ds((()=>{this.focus()}))}}}#Ss(t){if(!this.#Os()&&"touch"!==t.pointerType&&t.target.closest("x-menu")===this){!1===this.#Es&&this.#Ns();{let e=t.target.closest("x-menuitem");e&&!1===e.disabled&&e.closest("x-menu")===this?!1===e.matches(":focus")&&this.#Ds((async()=>{let t=this.querySelector(":scope > x-menuitem:focus");if(t){let e=t.querySelector("x-menu");e&&e.close()}e.focus();let i=e.querySelector("x-menu"),s=[...this.querySelectorAll(":scope > x-menuitem")].filter((t=>t!==e));i&&(await Zn(60),e.matches(":focus")&&!1===i.opened&&i.openNextToElement(e,"horizontal"));for(let t of s){let e=t.querySelector("x-menu");e&&e.close()}})):this.#Ds((()=>{this.focus()}))}}}#Ms(t){t.relatedTarget&&i(t.relatedTarget,"x-menu")===this||!0===this.#Es&&this.#Hs()}#Ns(){this.#Os()||(this.#Es=!0,this.#Bs())}#Hs(){this.#Os()||(this.#Es=!1,this.#Bs(),this.focus())}#Ls(t){this.#ws.push({x:t.clientX,y:t.clientY}),this.#ws.length>3&&this.#ws.shift()}#As(t){t.target.closest("x-menu")===this?(t.preventDefault(),this.scrollTop=this.scrollTop+t.deltaY,this.#Es=!0):this.#Es=!1}#Ps(){if(this.#zs){let t=this.scrollTop-this.#ks;if(this.#ks=this.scrollTop,Un()-this.#$s>100){let e=this.getBoundingClientRect();t<0?e.bottom+Math.abs(t)<=window.innerHeight-7?this.style.height=e.height+Math.abs(t)+"px":this.style.height=window.innerHeight-14+"px":t>0&&(e.top-t>=7?(this.style.top=this.#Cs+e.top-t+"px",this.style.height=e.height+t+"px",this.scrollTop=0,this.#ks=0):(this.style.top=7+this.#Cs+"px",this.style.height=window.innerHeight-14+"px"))}}}#q(t){if(this.#Os())t.preventDefault(),t.stopPropagation();else if("ArrowUp"===t.code)t.preventDefault(),t.stopPropagation(),this.focusPreviousMenuItem();else if("ArrowDown"===t.code)t.preventDefault(),t.stopPropagation(),this.focusNextMenuItem();else if("ArrowRight"===t.code||"Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector("x-menuitem:focus");if(e){let i=e.querySelector("x-menu");if(i){t.preventDefault(),t.stopPropagation(),!1===i.opened&&i.openNextToElement(e,"horizontal");let s=i.querySelector("x-menuitem:not([disabled]):not([hidden])");s&&s.focus()}}}else if("ArrowLeft"===t.code){let e=this.querySelector("x-menuitem:focus");if(e){let i=e.closest("x-menu").closest("x-menuitem");i?.closest("x-menu")&&(t.preventDefault(),t.stopPropagation(),i.focus(),this.close())}}}}customElements.define("x-menu",$a);const Sa=Symbol();class Ma extends HTMLElement{static observedAttributes=["disabled"];static#z=Us`<template><svg id="backdrop" hidden><path id="backdrop-path"></path></svg><x-box id="container"><div id="main"><slot></slot></div><div id="aside"><slot name="aside"></slot></div></x-box></template>`;static#E=Ys`:host{display:flex;align-items:center;width:100%;height:36px;font-size:0.875rem;box-sizing:border-box}:host([disabled]){pointer-events:none;opacity:0.6}:host([hidden]){display:none}#backdrop{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;pointer-events:none;touch-action:none}#backdrop[hidden]{display:none}#backdrop path{fill:red;fill-rule:evenodd;opacity:0;pointer-events:all}#container{flex:1;width:100%;height:100%}#main{display:flex;align-items:center;width:fit-content;height:100%}#aside{margin-left:auto;display:flex;align-items:center;height:100%}::slotted(x-menuitem[ellipsis]){order:9999}
`;get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#Is=!1;#js=null;#L=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ma.#E],this.#$.append(document.importNode(Ma.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;new ResizeObserver((()=>this.#Gs())).observe(this["#container"],{box:"border-box"}),new ResizeObserver((()=>this.#Fs())).observe(this["#main"],{box:"border-box"}),this.#L=new MutationObserver((()=>this.#Xs())),this.#L.observe(this,{childList:!0}),this.addEventListener("focusout",(t=>this.#Tt(t))),this.addEventListener("click",(t=>this.#T(t))),this.#$.addEventListener("click",(t=>this.#_s(t))),this.#$.addEventListener("pointerdown",(t=>this.#Zs(t))),this.#$.addEventListener("pointerover",(t=>this.#Us(t))),this.#$.addEventListener("wheel",(t=>this.#Ys(t))),this.#$.addEventListener("keydown",(t=>this.#Vs(t)))}connectedCallback(){this.setAttribute("role","menubar"),this.setAttribute("aria-disabled",this.disabled),this.#Ws(),window.addEventListener("orientationchange",this.#js=()=>{this.#qs()})}disconnectedCallback(){window.removeEventListener("orientationchange",this.#js)}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.#vt()}#Ws(){{let t=this.querySelector(":scope > x-menuitem[ellipsis]");t?t.hasAttribute("slot")&&t.removeAttribute("slot"):(t=Us`<x-menuitem ellipsis><x-label><strong>⋯</strong></x-label><x-menu id="ellipsis-menu"></x-menu></x-menuitem>`,this.append(t))}let t=[...this.children].filter((t=>"x-menuitem"===t.localName&&""===t.slot)),e=t.find((t=>t.hasAttribute("ellipsis"))),i=[];for(let e of t)e.hasAttribute("autohidden")&&(i.push(e),e.removeAttribute("autohidden"));let s=this.getBoundingClientRect(),n=this["#aside"].getBoundingClientRect(),a=[];for(let e=0;e<t.length;e+=1){let i=t[e];i.getBoundingClientRect().right>s.right-n.width&&a.push(i)}if(a.length<=1)e.setAttribute("autohidden","");else for(let i of[...t].reverse())if(i!==e){if(i.setAttribute("autohidden",""),e.getBoundingClientRect().right<=s.right-n.width)break}{let s=[...this.querySelectorAll(":scope > x-menuitem[autohidden]")];if(!1===bt(s,i,!0)){let i=e.querySelector("x-menu");i.innerHTML="";for(let n of t)if(n!==e)if(n[Sa]||(n[Sa]=n.querySelector(":scope > x-menu")),s.includes(n)){let t=n.cloneNode(!1);for(let e of n.children)"x-menu"!==e.localName&&t.append(e.cloneNode(!0));n[Sa]&&t.append(n[Sa]),i.append(t)}else n[Sa]&&n[Sa].parentElement!==n&&n.append(n[Sa])}}}#Ks=Yn(this.#Ws,100,this);#Js(t){let e=t.querySelector(":scope > x-menu");if(e&&!1===e.opened){let i=this.#Is;t.focus(),this.#Is=!0,this.style.touchAction="none","aside"!==t.slot&&(this["#aside"].style.pointerEvents="none");{e.openNextToElement(t,"vertical");let i=[...this.querySelectorAll(":scope > x-menuitem > x-menu")].filter((t=>t!==e));for(let t of i)t&&t.close(!1)}{let{x:t,y:e,width:i,height:s}=this.getBoundingClientRect();this["#backdrop-path"].setAttribute("d",`\n          M 0 0\n          L ${window.innerWidth} 0\n          L ${window.innerWidth} ${window.innerHeight}\n          L 0 ${window.innerHeight}\n          L 0 0\n          M ${t} ${e}\n          L ${t+i} ${e}\n          L ${t+i} ${e+s}\n          L ${t} ${e+s}\n        `),this["#backdrop"].removeAttribute("hidden")}!1===i&&this.dispatchEvent(new CustomEvent("expand"))}}#Qs(){return new Promise((async t=>{let e=this.#Is;this.#Is=!1,this.style.touchAction=null,this["#aside"].style.pointerEvents=null,this["#backdrop"].setAttribute("hidden",""),this["#backdrop-path"].setAttribute("d","");{let t=this.querySelectorAll(":scope > x-menuitem > x-menu[opened]");for(let e of t)await e.close(!0)}let i=this.querySelector("x-menuitem:focus");i&&i.blur(),!0===e&&this.dispatchEvent(new CustomEvent("collapse")),t()}))}#tn(){let t=[...this.querySelectorAll(":scope > x-menuitem:not([disabled])")],e=this.querySelector(":focus").closest("x-menubar > x-menuitem");if(t.length>1&&e){let i=t.indexOf(e),s=t[i-1]||t.at(-1);this.#Js(s)}}#en(){let t=[...this.querySelectorAll(":scope > x-menuitem:not([disabled])")],e=this.querySelector(":focus").closest("x-menubar > x-menuitem");if(e&&t.length>1){let i=t.indexOf(e),s=t[i+1]||t[0];this.#Js(s)}}#vt(){this.setAttribute("aria-disabled",this.disabled)}#Tt(t){null!==t.relatedTarget&&!1!==this.contains(t.relatedTarget)||this.#Qs()}#qs(){this.#Qs()}#Gs(){this.isConnected&&this.#Ks()}#Fs(){this.isConnected&&this.#Ks()}#Xs(){this.isConnected&&this.#Ks()}#Ys(t){let e=this.querySelector("x-menu[opened]");e&&!1===e.contains(t.target)&&t.preventDefault()}async#T(t){let e=t.target.closest("x-menuitem");if(e&&!1===t.isTrusted&&!1===t.isTrusted&&!e.closest("[expanded]")){let t=null;for(let i=e;i!==this;i=i.parentElement)"x-menuitem"===i.localName&&(t=i);t.setAttribute("highlighted",""),await Zn(150),t.removeAttribute("highlighted")}}async#_s(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem"),i=t.target.closest("x-menu");if(e&&!1===e.disabled&&i){let t=e.querySelector(":scope > x-menu");e.parentElement!==this&&(t?t.opened&&!1===t.opened&&t.openNextToElement(e,"horizontal"):(this.setAttribute("closing",""),await e.whenTriggerEnd,await this.#Qs(),this.removeAttribute("closing")))}else t.target===this["#backdrop-path"]&&(this.#Qs(),t.preventDefault(),t.stopPropagation())}#Zs(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem");if(e&&!1===e.disabled&&e.parentElement===this){let i=e.querySelector(":scope > x-menu");i?i.opened?this.#Qs():this.#Js(e):t.preventDefault()}}#Us(t){if(this.hasAttribute("closing"))return;let e=t.target.closest("x-menuitem"),i=t.target.closest("x-menu");e&&!1===e.disabled&&e.parentElement===this&&!i&&this.#Is&&"touch"!==t.pointerType&&(!1===e.hasAttribute("expanded")?this.#Js(e):e.focus())}#Vs(t){if(this.hasAttribute("closing"))t.stopPropagation(),t.preventDefault();else if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector(":scope > x-menuitem:focus");e&&(t.preventDefault(),e.click())}else if("Escape"===t.code)this.#Is&&(t.preventDefault(),this.#Qs());else if("Tab"===t.code){let t=this.querySelector(":scope > x-menuitem:focus, :scope > x-menuitem[expanded]");if(t){t.focus();let e=t.querySelector(":scope > x-menu");e&&(e.tabIndex=-1,e.close().then((()=>{e.tabIndex=-1})))}}else if("ArrowRight"===t.code)this.#en();else if("ArrowLeft"===t.code)this.#tn();else if("ArrowDown"===t.code){let e=this.querySelector("x-menuitem:focus > x-menu");e&&(t.preventDefault(),e.focusFirstMenuItem())}else if("ArrowUp"===t.code){let e=this.querySelector("x-menuitem:focus > x-menu");e&&(t.preventDefault(),e.focusLastMenuItem())}}}customElements.define("x-menubar",Ma);class La extends HTMLElement{static observedAttributes=["disabled"];static#z=Us`<template><svg id="checkmark" part="checkmark" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="checkmark-path"></path></svg><slot></slot><svg id="arrow" part="arrow" viewBox="0 0 100 100" hidden><path id="arrow-path"></path></svg></template>`;static#E=Ys`:host{display:flex;flex-flow:row;align-items:center;position:relative;padding:0 12px 0 23px;min-height:28px;box-sizing:border-box;cursor:default;user-select:none;-webkit-user-select:none;--trigger-effect: blink}:host([hidden]){display:none}:host([disabled]){pointer-events:none;opacity:0.6}:host(:focus){outline:none}:host-context([debug]):host(:focus){outline:2px solid red}#checkmark{display:none;transition:transform 0.2s cubic-bezier(0.4, 0.0, 0.2, 1);align-self:center;width:18px;height:18px;margin:0 2px 0 -20px;color:inherit;--path-data: M 44 61 L 29 47 L 21 55 L 46 79 L 79 27 L 70 21 L 44 61 Z;}:host([togglable]) #checkmark{display:flex;transform:scale(0);transform-origin:50% 50%}:host([toggled]) #checkmark{display:flex;transform:scale(1)}#checkmark-path{fill:currentColor}#arrow{display:flex;width:16px;height:16px;transform:scale(1.1);align-self:center;margin-left:8px;opacity:1;color:inherit;--path-data: M 26 20 L 26 80 L 74 50 Z;}#arrow[hidden]{display:none}#arrow path{fill:currentColor}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){this.value!==t&&(null===t?this.removeAttribute("value"):this.setAttribute("value",t))}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get togglable(){return this.hasAttribute("togglable")}set togglable(t){t?this.setAttribute("togglable",""):this.removeAttribute("togglable")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get whenTriggerEnd(){return new Promise((t=>{!1===this.#in?t():this.#sn.push(t)}))}#$=null;#U=0;#in=!1;#sn=[];#nn=!1;#P=null;#an=new MutationObserver((()=>this.#rn()));constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[La.#E],this.#$.append(document.importNode(La.#z.content,!0)),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("keydown",(t=>this.#q(t)));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){Vn.whenThemeReady.then((()=>{this.#ft(),this.#O()})),this.#rn(),this.#J(),this.#an.observe(this,{childList:!0,attributes:!1,characterData:!1,subtree:!1}),Vn.addEventListener("themechange",this.#P=()=>this.#on())}disconnectedCallback(){this.#an.disconnect(),Vn.removeEventListener("themechange",this.#P)}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.#J()}#ft(){let t=getComputedStyle(this["#checkmark"]).getPropertyValue("--path-data");this["#checkmark-path"].setAttribute("d",t)}#O(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#rn(){if(this.parentElement&&"x-menubar"===this.parentElement.localName)this["#arrow"].setAttribute("hidden","");else{this.querySelector("x-menu")?this["#arrow"].removeAttribute("hidden"):this["#arrow"].setAttribute("hidden","")}}#J(){this.setAttribute("role","menuitem"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#on(){this.#ft(),this.#O()}#Y(t){if(this.#nn=this.matches(":focus"),t.buttons>1)return!1;if(this.matches("[closing] x-menuitem"))return t.preventDefault(),void t.stopPropagation();if(t.target.closest("x-menuitem")===this){this.setPointerCapture(t.pointerId);{let e,i=!0,s=Date.now();this.addEventListener("pointerup",e=async()=>{this.removeEventListener("pointerup",e),this.removeEventListener("pointercancel",e),i=!1;let n=Date.now()-s,a="touch"===t.pointerType?600:150;n<a&&await Zn(a-n),this.removeAttribute("pressed")}),this.addEventListener("pointercancel",e),i&&this.setAttribute("pressed","")}}}async#T(t){if(t.buttons>1)return;let e=t.target.closest("x-menuitem"),i=t.target.closest("x-menu");if(e===this&&i===this.closest("x-menu")&&!this.matches("[closing] x-menuitem"))if(t.detail>0&&!1===Pi(e.getBoundingClientRect(),new DOMPoint(t.clientX,t.clientY)))t.stopImmediatePropagation();else{if(this.togglable){let t=new CustomEvent("toggle",{bubbles:!0,cancelable:!0});this.dispatchEvent(t),!1===t.defaultPrevented&&(this.toggled=!this.toggled)}if(!this.querySelector(":scope > x-menu")&&"x-menubar"!==this.parentElement.localName){let t=getComputedStyle(this).getPropertyValue("--trigger-effect").trim();if("blink"===t){this.#in=!0,this.#nn?(this.parentElement.focus(),await Zn(150),this.focus(),await Zn(150)):(this.focus(),await Zn(150),this.parentElement.focus(),await Zn(150));for(let t of this.#sn)t();this.#sn=[],this.#in=!1}else if("none"===t){this.#in=!0,await Zn(50);for(let t of this.#sn)t();this.#sn=[],this.#in=!1}}}}#q(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.querySelector("x-menu")||(t.stopPropagation(),this.click()))}}customElements.define("x-menuitem",La);class Aa extends HTMLElement{static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:block;box-sizing:border-box}
`;get value(){let t=this.querySelector("x-navitem[toggled]");return t?t.value:null}set value(t){let e=[...this.querySelectorAll("x-navitem")],i=null===t?null:e.find((e=>e.value===t));for(let t of e)t.toggled=t===i}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Aa.#E],this.#$.append(document.importNode(Aa.#z.content,!0)),this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("keydown",(t=>this.#q(t)))}connectedCallback(){this.setAttribute("role","navigation"),"x-navitem"===this.parentElement?.localName&&this.parentElement.setAttribute("expandable",""),this.closest("x-navitem")&&this.setAttribute("slot","expandable")}#ln(){let t=this;for(;;){let e=t.parentElement?.closest("x-nav");if(!e)break;t=e}return t}#T(t){let e=t.target.closest("x-navitem");if(e&&!1===e.hasAttribute("expandable")&&("a"!==e.parentElement.localName||"_blank"!==e.parentElement.getAttribute("target"))&&e.closest("x-nav")===this){for(let t of this.#ln().querySelectorAll("x-navitem"))t===e?!1===t.toggled&&(t.toggled=!0):t.toggled=!1;e.dispatchEvent(new CustomEvent("toggle",{bubbles:!0}))}}#Y(t){if(t.buttons>1)return void t.preventDefault();let e=t.target.closest("x-navitem");if(e&&e.closest("x-nav")===this){if(t.preventDefault(),!1===this.matches(":focus")){let t,e=i(this.parentNode,"*[tabindex]:not(a,x-navitem)");this.addEventListener("pointerup",t=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),e?e.focus():(this.focus(),this.blur())}),this.addEventListener("pointercancel",t)}if("x-nav"!==t.target.localName){let t,i=Date.now(),s=!0,n=Number.parseInt(getComputedStyle(e).getPropertyValue("--min-pressed-time")||"150ms");this.addEventListener("pointerup",t=async()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),s=!1;let a=Date.now()-i;a<n&&await Zn(n-a),e.removeAttribute("pressed")}),this.addEventListener("pointercancel",t),(async()=>{!1===e.hasAttribute("toggled")&&await Zn(40),s&&e.setAttribute("pressed","")})()}}}#q(t){let e=this.#ln(),i=e.querySelector("x-navitem:focus");if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code)t.preventDefault(),t.stopPropagation(),i.click();else if("ArrowLeft"===t.code)i.expandable&&i.expanded&&(t.preventDefault(),t.stopPropagation(),i.click());else if("ArrowRight"===t.code)i.expandable&&!1===i.expanded&&(t.preventDefault(),t.stopPropagation(),i.click());else if("ArrowUp"===t.code||"ArrowDown"===t.code){let s=[...e.querySelectorAll("x-navitem:not([disabled])")];s=s.filter((t=>0!==t.clientHeight));let n=s.indexOf(i),a="ArrowUp"===t.code?s[n-1]:s[n+1];a&&(t.preventDefault(),t.stopPropagation(),a.focus())}}}customElements.define("x-nav",Aa);class Pa extends HTMLElement{static observedAttributes=["disabled"];static#z=Us`<template><div id="button" part="button"><slot></slot><div id="arrow" part="arrow"><svg id="arrow-svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg></div></div><div id="main"><slot name="expandable"></slot></div></template>`;static#E=Ys`:host{display:block;box-sizing:border-box}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}#button{display:flex;align-items:center;justify-content:center;padding:8px 15px;min-height:36px;box-sizing:border-box}#main{height:0;display:none;overflow:hidden}:host([expanded]) #main, :host([animating]) #main{display:block;height:auto}:host([expanded]:not([animating])) #main{overflow:visible}#arrow{display:none;align-items:center;justify-content:flex-start;pointer-events:none;margin-left:auto;padding-left:4px;--path-data: M 26 20 L 26 80 L 74 50 Z;}:host([expandable]) #arrow{display:flex}:host([animating]) #arrow{outline:none!important}#arrow-svg{display:flex;width:16px;height:16px;transform:rotate(0deg);color:currentColor}#arrow-svg:focus{background:transparent;outline:none}:host([expanded]) #arrow-svg{transform:rotate(90deg)}#arrow-path{fill:currentColor}::slotted(x-tooltip){--align: right;}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):""}set value(t){this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get expanded(){return this.hasAttribute("expanded")}set expanded(t){t?this.setAttribute("expanded",""):this.removeAttribute("expanded")}get expandable(){return this.hasAttribute("expandable")}#$;#P;#A=[];#_=!1;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Pa.#E],this.#$.append(document.importNode(Pa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#W()))}connectedCallback(){Vn.whenThemeReady.then((()=>{this.#O()})),Vn.addEventListener("themechange",this.#P=()=>this.#O()),this.parentElement&&"a"===this.parentElement.localName&&-1!==this.parentElement.tabIndex&&(this.parentElement.tabIndex=-1),this.#J()}disconnectedCallback(){this.#_=!1,Vn.removeEventListener("themechange",this.#P)}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.#J()}expand(t=!0){return new Promise((async e=>{if(!1===this.expanded)if(!1===t)this.#H(),this.removeAttribute("animating"),this.expanded=!0;else if(!0===t){let t=this["#main"].getBoundingClientRect();this.#H(),this.removeAttribute("animating"),this.expanded=!0;let e=this["#main"].getBoundingClientRect();this.setAttribute("animating","");let i=[this["#main"].animate({height:[`${t.height}px`,`${e.height}px`]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"}),this["#arrow-svg"].animate({transform:["rotate(0deg)","rotate(90deg)"]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})];this.#A=i,await Promise.all(i.map((t=>t.finished))),this.#A===i&&this.removeAttribute("animating")}e()}))}collapse(t=!0){return new Promise((async e=>{if(!0===this.expanded)if(!1===t)this.#H(),this.removeAttribute("animating"),this.expanded=!1;else if(!0===t){let t=this["#main"].getBoundingClientRect();this.#H(),this.removeAttribute("animating"),this.expanded=!1;let e=this["#main"].getBoundingClientRect();this.setAttribute("animating","");let i=[this["#main"].animate({height:[`${t.height}px`,`${e.height}px`]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"}),this["#arrow-svg"].animate({transform:["rotate(90deg)","rotate(0deg)"]},{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})];this.#A=i,await Promise.all(i.map((t=>t.finished))),this.#A===i&&this.removeAttribute("animating")}e()}))}#T(t){if(this.#_=!0,this===t.target.closest("x-navitem")&&this.hasAttribute("expandable")&&"x-nav"!==t.target.localName)if(this.expanded){let t=new CustomEvent("collapse",{bubbles:!0,cancelable:!0});this.dispatchEvent(t),!1===t.defaultPrevented&&this.collapse()}else{let t=new CustomEvent("expand",{bubbles:!0,cancelable:!0});this.dispatchEvent(t),!1===t.defaultPrevented&&this.expand()}}#V(){let t=this.querySelector(":scope > x-tooltip");if(t&&!1===t.disabled&&!1===this.expanded&&!1===this.#_){if(this.parentElement&&"x-nav"===this.parentElement.localName)for(let t of this.parentElement.children)if(t!==this&&"x-navitem"===t.localName){let e=t.querySelector(":scope > x-tooltip");e&&e.close(!1)}t.open(this)}}#W(){let t=this.querySelector(":scope > x-tooltip");t&&t.close(),this.#_=!1}#H(){this.#A.length>0&&this.#A.map((t=>t.finish()))}#J(){this.setAttribute("role","button"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#O(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}}customElements.define("x-navitem",Pa);class Ta extends HTMLElement{static observedAttributes=["opened"];static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:none;position:fixed;min-width:15px;min-height:15px;bottom:15px;left:50%;transform:translateX(-50%);padding:5px 12px;box-sizing:border-box;color:rgba(255, 255, 255, 0.9);background:#434343;z-index:9999;font-size:0.75rem;user-select:text;-webkit-user-select:none;transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1)}:host([opened]), :host([animating]){display:block}:host(:focus){outline:none}
`;get opened(){return this.hasAttribute("opened")}set opened(t){!0===t?this.setAttribute("opened",""):this.removeAttribute("opened"),this.#hn=0}get timeout(){return this.hasAttribute("timeout")?Number.parseFloat(this.getAttribute("timeout")):0}set timeout(t){this.setAttribute("timeout",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#hn=0;#dn=null;#cn=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ta.#E],this.#$.append(document.importNode(Ta.#z.content,!0))}connectedCallback(){this.setAttribute("tabindex","0")}attributeChangedCallback(t,e,i){e!==i&&"opened"===t&&(this.opened?this.#un():this.#K())}#un(){if(this.isConnected){let t=-this.getBoundingClientRect().height-10+"px",e=getComputedStyle(this).bottom;this.animate({bottom:[t,e]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})}if(this.timeout>0&&(this.#hn=0,this.#dn=setInterval((()=>{this.#hn+=100,this.timeout>0&&this.#hn>this.timeout&&(this.opened=!1)}),100)),this.timeout>=0){let t=Un();window.addEventListener("pointerdown",this.#cn=e=>{let i=Un(),s=this.getBoundingClientRect();i-t>10&&!1===Pi(s,new DOMPoint(e.clientX,e.clientY))&&(this.opened=!1)},!0)}}async#K(){if(null!==this.#dn&&(clearInterval(this.#dn),this.#dn=null),this.isConnected){this.setAttribute("animating","");let t=getComputedStyle(this).bottom,e=-this.getBoundingClientRect().height-10+"px",i=this.animate({bottom:[t,e]},{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"});await i.finished,this.removeAttribute("animating")}window.removeEventListener("pointerdown",this.#cn,!0)}}customElements.define("x-notification",Ta);const Ra=["0","1","2","3","4","5","6","7","8","9","-","+",",","."];class Da extends HTMLElement{static observedAttributes=["value","min","max","prefix","suffix","disabled"];static#z=Us`<template><div id="main"><div id="editor-container"><div id="editor" contenteditable="plaintext-only" spellcheck="false"></div></div><slot></slot></div></template>`;static#E=Ys`:host{display:block;position:relative;max-width:160px;height:32px;box-sizing:border-box;font-size:0.78125rem;line-height:10;--inner-padding: 0 6px;}:host(:hover){cursor:text}:host([mixed]){color:rgba(0, 0, 0, 0.7)}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}#main{display:flex;align-items:center;height:100%}#editor-container{display:flex;align-items:center;width:100%;height:100%;padding:var(--inner-padding);box-sizing:border-box;overflow:hidden}#editor{width:100%;color:inherit;background:none;border:none;outline:none;font-family:inherit;font-size:inherit;line-height:inherit;white-space:nowrap;font-variant-numeric:tabular-nums;overflow:hidden;text-overflow:ellipsis}:host(:focus) #editor{overflow:visible;text-overflow:clip}:host([disabled]) #editor{user-select:none;-webkit-user-select:none}#editor::-webkit-scrollbar{display:none}#editor::before{content:attr(data-prefix);pointer-events:none}#editor::after{content:attr(data-suffix);pointer-events:none}:host([empty]) #editor::before, :host([empty]) #editor::after, :host(:focus) #editor::before, :host(:focus) #editor::after{display:none}
`;get value(){return this.hasAttribute("value")?Number.parseFloat(this.getAttribute("value")):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get min(){return this.hasAttribute("min")?Number.parseFloat(this.getAttribute("min")):Number.NEGATIVE_INFINITY}set min(t){Number.isFinite(t)?this.setAttribute("min",t):this.removeAttribute("min")}get max(){return this.hasAttribute("max")?Number.parseFloat(this.getAttribute("max")):Number.POSITIVE_INFINITY}set max(t){Number.isFinite(t)?this.setAttribute("max",t):this.removeAttribute("max")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get precision(){return this.hasAttribute("precision")?Number.parseFloat(this.getAttribute("precision")):20}set precision(t){this.setAttribute("precision",t)}get step(){return this.hasAttribute("step")?Number.parseFloat(this.getAttribute("step")):1}set step(t){this.setAttribute("step",t)}get prefix(){return this.hasAttribute("prefix")?this.getAttribute("prefix"):""}set prefix(t){this.setAttribute("prefix",t)}get suffix(){return this.hasAttribute("suffix")?this.getAttribute("suffix"):""}set suffix(t){this.setAttribute("suffix",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;#pn=!1;#mn=!1;#bn=!1;#gn=!1;#fn=!1;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Da.#E],this.#$.append(document.importNode(Da.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#Zs(t))),this.#$.addEventListener("wheel",(t=>this.#As(t))),this["#editor"].addEventListener("paste",(t=>this.#xn(t))),this["#editor"].addEventListener("input",(t=>this.#wn(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("pointerenter",(()=>this.#V())),this.addEventListener("pointerleave",(()=>this.#W())),this.addEventListener("keydown",(t=>this.#q(t))),this.addEventListener("keyup",(t=>this.#vn(t))),this.addEventListener("keypress",(t=>this.#yn(t))),this.addEventListener("incrementstart",(t=>this.#kn(t))),this.addEventListener("decrementstart",(t=>this.#Cn(t))),this.addEventListener("focusin",(t=>this.#Pt(t))),this.addEventListener("focusout",(t=>this.#Tt(t))),"gecko"===_n()&&(this["#editor"].setAttribute("contenteditable",""),this["#editor"].addEventListener("beforeinput",(t=>{if("insertFromPaste"===t.inputType&&t.dataTransfer.types.includes("text/plain")){t.preventDefault();let e=window.getSelection(),i=e.getRangeAt(0);i.deleteContents(),i.insertNode(document.createTextNode(t.dataTransfer.getData("text/plain"))),e.collapseToEnd()}})))}connectedCallback(){this.#J(),this.#Xt()}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Zt():"min"===t?this.#zn():"max"===t?this.#En():"prefix"===t?this.#$n():"suffix"===t?this.#Sn():"disabled"===t&&this.#vt())}#Mn(t=!1){let e=this.value,i=this.value;i+=t?10*this.step:this.step,i=Si(i,this.min,this.max,Li(this.step)),e!==i&&(this.value=i),this.matches(":focus")&&document.execCommand("selectAll"),this.#Ln()}#An(t=!1){let e=this.value,i=this.value;i-=t?10*this.step:this.step,i=Si(i,this.min,this.max,Li(this.step)),e!==i&&(this.value=i),this.matches(":focus")&&document.execCommand("selectAll"),this.#Ln()}#Pn(){this.#mn||(this.#mn=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})))}#Tn=((t,e,i,s=!1)=>{let n=null,a=null;return(...r)=>{let o=s&&!n;return clearTimeout(n),n=setTimeout((()=>{n=null,s||(a=t.apply(i,r))}),e),o&&(a=t.apply(i,r)),a}})((()=>{!this.#mn||this.#bn||this.#gn||this.#fn||(this.#mn=!1,this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0})))}),500);#Rn(){let t=this["#editor"].textContent,e=Number.parseFloat(t);Number.isNaN(e)&&(e=null);let i=null===e?null:Si(e,this.min,this.max);i!==this.value?(this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})),this.value=i,this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))):e!==this.value?this.value=i:this.#Dn()}#Xt(){this.#Dn(),this.#Ln(),this.#Bn()}#Dn(){if(this.hasAttribute("value"))if(this.step<1){let t=Number.parseFloat(this.getAttribute("value")),e=Li(this.step),i=Li(t);this["#editor"].textContent=e>0&&i<e?t.toFixed(e):this.getAttribute("value").trim()}else this["#editor"].textContent=this.getAttribute("value").trim();else this["#editor"].textContent=""}#Ln(){let t=null;if(this.matches(":focus")){let e=this["#editor"].textContent;t=""===e.trim()?null:Number.parseFloat(e)}else t=this.value;null===t?this.setAttribute("empty",""):this.removeAttribute("empty")}#Bn(){let t=this.querySelector("x-stepper");if(t){let e=this.value>this.min,i=this.value<this.max;!0===i&&!0===e?t.removeAttribute("disabled"):!1===i&&!1===e?t.setAttribute("disabled",""):!1===i?t.setAttribute("disabled","increment"):!1===e&&t.setAttribute("disabled","decrement")}}#J(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#Zt(){this.#Xt()}#zn(){this.#Bn()}#En(){this.#Bn()}#$n(){this["#editor"].setAttribute("data-prefix",this.prefix)}#Sn(){this["#editor"].setAttribute("data-suffix",this.suffix)}#vt(){this["#editor"].contentEditable=this.disabled?"false":"plaintext-only",this.#J()}#Pt(){document.execCommand("selectAll"),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#Tt(){"chromium"===_n()&&this.#$.getSelection().collapse(this["#main"]),this["#editor"].scrollLeft=0,this.#Rn(),this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0}))}#wn(){this.#Ln(),this.#Bn()}#As(t){this.matches(":focus")&&(t.preventDefault(),this.#Pn(),t.wheelDeltaX>0||t.wheelDeltaY>0?(this.#Mn(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))):(this.#An(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),this.#Tn())}#T(t){t.preventDefault()}#Y(t){"x-stepper"===t.target.localName&&t.preventDefault()}#Zs(t){if(t.buttons>1||!1===t.isPrimary)t.preventDefault();else if(t.target===this["#editor"]&&!1===this["#editor"].matches(":focus")){t.preventDefault();let e,i,s=this.value,n=t.clientX,a=new DOMPoint(t.clientX,t.clientY);this.style.cursor="col-resize",this["#editor"].setPointerCapture(t.pointerId),this["#editor"].addEventListener("pointermove",e=e=>{let i=new DOMPoint(e.clientX,e.clientY),r=e.timeStamp-t.timeStamp,o=e.clientX!==n,l=Ai(a,i)>3||r>80;if(n=e.clientX,o&&l&&e.isPrimary){!1===this.#pn&&(this.#pn=!0,this.#mn=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0})));let i=e.clientX-t.clientX,n=s+i*this.step;n=Si(n,this.min,this.max,Li(this.step)),this.value=n,this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}),this["#editor"].addEventListener("pointerup",i=()=>{this["#editor"].removeEventListener("pointermove",e),this["#editor"].removeEventListener("pointerup",i),this["#editor"].removeEventListener("pointercancel",i),this.style.cursor=null,!0===this.#pn?(this.#pn=!1,this.#mn=!1,this.dispatchEvent(new CustomEvent("changeend",{detail:this.value!==s,bubbles:!0}))):(this["#editor"].focus(),document.execCommand("selectAll"))}),this["#editor"].addEventListener("pointercancel",i)}}#V(){let t=this.querySelector(":scope > x-tooltip");t&&!1===t.disabled&&t.open(this)}#W(){let t=this.querySelector(":scope > x-tooltip");t&&t.close()}#kn(){let t,e;this.matches(":focus")&&this.#Rn(),this.#fn=!0,this.addEventListener("increment",t=t=>{this.#Pn(),this.#Mn(t.detail.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Tn()}),this.addEventListener("incrementend",e=()=>{this.#fn=!1,this.removeEventListener("increment",t),this.removeEventListener("incrementend",e)})}#Cn(){let t,e;this.matches(":focus")&&this.#Rn(),this.#fn=!0,this.addEventListener("decrement",t=t=>{this.#Pn(),this.#An(t.detail.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Tn()}),this.addEventListener("decrementend",e=()=>{this.#fn=!1,this.removeEventListener("decrement",t),this.removeEventListener("decrementend",e)})}#q(t){"ArrowDown"===t.code?(t.preventDefault(),this.#bn=!0,this.#Pn(),this.#An(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Tn()):"ArrowUp"===t.code?(t.preventDefault(),this.#bn=!0,this.#Pn(),this.#Mn(t.shiftKey),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.#Tn()):"Backspace"===t.code?this.#gn=!0:"Enter"!==t.code&&"NumpadEnter"!==t.code||(this.#Rn(),document.execCommand("selectAll"))}#vn(t){"ArrowDown"===t.code||"ArrowUp"===t.code?(this.#bn=!1,this.#Tn()):"Backspace"===t.code&&(this.#gn=!1)}#yn(t){!1===t.ctrlKey&&!1===t.altKey&&!1===t.metaKey&&!1===Ra.includes(t.key)&&t.preventDefault()}async#xn(t){t.preventDefault();let e=t.clipboardData.getData("text/plain").trim();(t=>{let e=Number.parseFloat(t);return!1===Number.isNaN(e)&&Number.isFinite(e)})(e)&&(await Zn(1),document.execCommand("insertText",!1,e))}}customElements.define("x-numberinput",Da);class Ba extends HTMLElement{static observedAttributes=["value","max","controls","href"];static#z=Us`<template><div id="items"></div></template>`;static#E=Ys`:host{display:block;box-sizing:border-box;width:100%;--prev-path-data:  M 74 20 L 74 80 L 26 50 L 74 20 Z;--next-path-data:  M 26 20 L 26 80 L 74 50 Z;--first-path-data: M 16 20 L 26 20 L 26 80 L 16 80 L 16 20 Z M 84 20 L 84 80 L 36 50 L 84 20 Z;--last-path-data:  M 84 20 L 74 20 L 74 80 L 84 80 L 84 20 Z M 16 20 L 16 80 L 64 50 L 16 20 Z;}:host([hidden]){display:none}:host([max="1"]){display:none}#items{display:flex;align-items:center;justify-content:center}#items a{color:inherit;text-decoration:none}.item{display:flex;align-items:center;justify-content:center;margin:0 3px;height:30px;box-sizing:border-box;border-width:1px;border-style:solid;outline-offset:0;font-size:0.875rem;font-weight:700;line-height:1;user-select:none;-webkit-user-select:none}div.item{cursor:default}.item[data-disabled]{opacity:0}#first-item, #last-item, #prev-item, #next-item{padding:0 4px}.nth-item{padding:0 10px}.ellipsis-item{background:none;border:none}.item:first-child{margin-left:0}.item:last-child{margin-right:0}.ellipsis-item{flex:0}.arrow{display:flex;width:16px;height:16px}.arrow path{fill:currentColor}
`;get value(){return this.hasAttribute("value")?Number.parseInt(this.getAttribute("value")):1}set value(t){t=Si(t,1,this.max),this.setAttribute("value",t)}get max(){return this.hasAttribute("max")?Number.parseFloat(this.getAttribute("max")):5}set max(t){this.setAttribute("max",t)}get controls(){return this.hasAttribute("controls")?this.getAttribute("controls").replace(/\s+/g," ").split(" "):["prev","next","nth"]}set controls(t){this.setAttribute("controls",t.join(" "))}get href(){return this.getAttribute("href")}set href(t){t?this.setAttribute("href",t):this.removeAttribute("href")}#$;#P;connectedCallback(){if(!this.#$){this.setAttribute("role","navigation"),this.setAttribute("aria-label","pagination"),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ba.#E],this.#$.append(document.importNode(Ba.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#Y(t))),this.#$.addEventListener("click",(t=>this.#T(t))),this.addEventListener("keydown",(t=>this.#q(t)))}Vn.addEventListener("themechange",this.#P=()=>this.#on()),Vn.whenThemeReady.then((()=>this.#Xt()))}disconnectedCallback(){Vn.removeEventListener("themechange",this.#P)}attributeChangedCallback(t,e,i){e!==i&&this.#$&&("value"===t||"max"===t||"controls"===t||"href"===t)&&this.#Xt()}#on(){this.#Xt()}#Y(t){if(t.buttons>1)return void t.preventDefault();let e=t.target.closest(".item");if(e&&(t.preventDefault(),!1===e.matches(":focus"))){let t,e=i(this,"*[tabindex]:not(a)");this.addEventListener("pointerup",t=()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),e?e.focus():(this.focus(),this.blur())}),this.addEventListener("pointercancel",t)}}#T(t){let e=t.target.closest(".item"),i=t.target.closest("a");e&&void 0!==e.dataset.value&&(i&&t.preventDefault(),!1===e.part.contains("toggled-item")&&(this.value=Number.parseInt(e.dataset.value),this.dispatchEvent(new CustomEvent("toggle"))))}#q(t){let e=this["#items"].querySelector(":focus");if(e)if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code)t.preventDefault(),t.stopPropagation(),e.click();else if("ArrowRight"===t.code||"ArrowLeft"===t.code){let i=[...this["#items"].children].filter((t=>t.hasAttribute("data-value")&&!t.hasAttribute("data-disabled"))),s=i.indexOf(e);if("ArrowRight"===t.code){let t=i[s+1];t&&t.focus()}else if("ArrowLeft"===t.code){let t=i[s-1];t&&t.focus()}}}#On(){let t="";if(this.controls.includes("first")&&this.max>1&&(t+=this.#Nn(1,"first")),this.controls.includes("prev")&&this.max>1&&(t+=this.#Nn(Math.max(1,this.value-1),"prev")),this.controls.includes("nth"))if(this.max<=10)for(let e=1;e<=this.max;e+=1)e===this.value?t+=this.#Hn(e,!0):t+=this.#Hn(e,!1);else if(this.value<=6){for(let e=1;e<=7;e+=1)e===this.value?t+=this.#Hn(e,!0):t+=this.#Hn(e,!1);t+=this.#In();for(let e of[this.max-1,this.max])t+=this.#Hn(e,!1)}else if(this.value>this.max-6){for(let e of[1,2])t+=this.#Hn(e,!1);t+=this.#In();for(let e=this.max-6;e<=this.max;e+=1)t+=this.#Hn(e,e===this.value)}else{for(let e of[1,2])t+=this.#Hn(e,!1);t+=this.#In();for(let e=this.value-1;e<this.value+4;e+=1)t+=this.#Hn(e,e===this.value);t+=this.#In();for(let e of[this.max-1,this.max])t+=this.#Hn(e,!1)}return this.controls.includes("next")&&this.max>1&&(t+=this.#Nn(Math.min(this.max,this.value+1),"next")),this.controls.includes("last")&&this.max>1&&(t+=this.#Nn(this.max,"last")),t}#Nn(t=1,e="prev"){let i='part="item"',s=`data-value="${t}"`,n=t===this.value?"data-disabled":"",a=t===this.value?'tabindex="-1"':'tabindex="0"';if(this.href){return`\n        <a id="${e}-item" class="item" ${i} ${s} ${n} ${`href="${this.#jn(t)}" rel="${e}"`} ${a}>\n          <svg id="${e}-arrow" class="arrow" viewBox="0 0 100 100">\n            <path id="${e}-path"></path>\n          </svg>\n        </a>\n      `}return`\n        <div id="${e}-item" class="item" ${i} ${s} ${n} ${a}>\n          <svg id="${e}-arrow" class="arrow" viewBox="0 0 100 100">\n            <path id="${e}-path"></path>\n          </svg>\n        </div>\n      `}#Hn(t=1,e=!1){let i=e||!this.href?null:this.#jn(t),s=`id="item-${t}"`,n=`part="item ${e?" toggled-item":""}"`,a=`data-value="${t}"`,r=e?'tabindex="-1"':'tabindex="0"';if(i){return`<a class="item nth-item" ${s} ${n} ${a} ${r} ${`href="${i}" rel="${t}"`}>${t}</a>`}return`<div class="item nth-item" ${s} ${n} ${a} ${r}>${t}</div>`}#In(){return'<div class="item ellipsis-item">…</div>'}#jn(t=1){let e=new URL(this.href);return 1===t?e.searchParams.delete("page"):e.searchParams.set("page",t),e.href}#Xt(){let t=this["#items"].querySelector(":focus");this["#items"].innerHTML=this.#On();for(let t of this["#items"].querySelectorAll("[id]"))this["#"+t.id]=t;if(t){let e=this["#items"].querySelector(`#${t.id}:not([data-disabled])`);e?e.focus():(e=this["#items"].querySelector('[part*="toggled-item"]'),e&&e.focus())}{let t=getComputedStyle(this);for(let e of["prev","next","first","last"]){let i=this["#items"].querySelector(`#${e}-path`);i&&i.setAttribute("d",t.getPropertyValue(`--${e}-path-data`))}}}}customElements.define("x-pager",Ba);class Oa extends HTMLElement{static observedAttributes=["modal"];static#z=Us`<template><svg id="arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path" part="arrow-path"></path></svg><slot id="slot"></slot></template>`;static#E=Ys`:host{position:fixed;display:none;top:0;left:0;min-height:30px;z-index:1001;box-sizing:border-box;background:white;-webkit-app-region:no-drag;--align: bottom;--arrow-size: 20px;--open-transition: 900 transform cubic-bezier(0.4, 0, 0.2, 1);--close-transition: 200 opacity cubic-bezier(0.4, 0, 0.2, 1);}:host(:focus){outline:none}:host([opened]), :host([animating]){display:block}#arrow{position:fixed;box-sizing:border-box;content:"";overflow:visible}#arrow[data-align="top"], #arrow[data-align="bottom"]{width:var(--arrow-size);height:calc(var(--arrow-size) * 0.6);transform:translate(-50%, 0)}#arrow[data-align="left"], #arrow[data-align="right"]{width:calc(var(--arrow-size) * 0.6);height:var(--arrow-size);transform:translate(0, -50%)}#arrow-path{stroke-width:1;vector-effect:non-scaling-stroke}#arrow[data-align="left"] #arrow-path{clip-path:polygon(0% -50%, 150% -50%, 150% 200%, 0% 150%)}#arrow[data-align="right"] #arrow-path{clip-path:polygon(-50% -50%, 100% -50%, 100% 150%, -50% 150%)}#arrow[data-align="top"] #arrow-path{clip-path:polygon(-50% 0%, 150% 0%, 150% 150%, -50% 150%)}#arrow[data-align="bottom"] #arrow-path{clip-path:polygon(-50% -50%, 150% -50%, 150% 100%, -50% 100%)}#slot{border-radius:inherit}
`;get opened(){return this.hasAttribute("opened")}get modal(){return this.hasAttribute("modal")}set modal(t){t?this.setAttribute("modal",""):this.removeAttribute("modal")}#$=null;#Gn=null;#Fn=new ResizeObserver((()=>this.#Ae()));#Xn=null;#_n;#Zn;#St;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Oa.#E],this.#$.append(document.importNode(Oa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#backdrop"]=t("x-backdrop"),this["#backdrop"].style.background="rgba(0, 0, 0, 0)",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>{t.preventDefault()})),this["#backdrop"].addEventListener("pointerdown",(t=>{this.hasAttribute("animating")?t.stopPropagation():this.parentNode&&"x-button"!==this.parentNode.localName&&"x-colorselect"!==this.parentNode.localName&&this.close()}))}connectedCallback(){this.tabIndex=-1}attributeChangedCallback(t,e,i){e!==i&&"modal"===t&&(this.modal&&this.opened?this["#backdrop"].show():this["#backdrop"].hide())}#Ae(){this.#Un(this.#Xn)}open(t,e=!0){return new Promise((async i=>{if(this.#Xn=t,!1===this.opened&&(this.modal&&this["#backdrop"].show(!1),this.setAttribute("opened",""),this.#Fn.observe(this),window.addEventListener("resize",this.#Zn=()=>this.#Ae()),Vn.addEventListener("themechange",this.#St=()=>this.#Yn()),this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this})),await new Promise((t=>{requestAnimationFrame(t)})),this.#Yn(),this.#Un(t),this.#Gn=s(this),this.#Gn&&this.#Gn.addEventListener("scroll",this.#_n=()=>{this.close()},{once:!0}),e)){let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Ea(t);"transform"===e&&await this.animate({transform:["scale(1, 0)","scale(1, 1)"],transformOrigin:["0 0","0 0"]},{duration:i,easing:s}).finished}i()}))}close(t=!0){return new Promise((async e=>{if(!0===this.opened&&(this.removeAttribute("opened"),this.#Fn.disconnect(),window.removeEventListener("resize",this.#Zn),Vn.removeEventListener("themechange",this.#St),this["#backdrop"].hide(),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this})),this.#Gn.removeEventListener("scroll",this.#_n),t)){let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=Ea(t);this.setAttribute("animating",""),"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished,this.removeAttribute("animating")}e()}))}#Un(t){let e=getComputedStyle(this).getPropertyValue("--align").trim(),i=Number.parseInt(getComputedStyle(this).borderWidth),s=0,n=0,a=null;this.style.maxWidth=null,this.style.maxHeight=null,this.style.left="0px",this.style.top="0px";{let e=this.getBoundingClientRect();0===e.top&&0===e.left||(s=-e.left,n=-e.top),a=t instanceof DOMPoint?new DOMRect(t.x,t.y,0,0):t instanceof DOMRect?t:t instanceof Element?t.getBoundingClientRect():new DOMRect}if("bottom"===e||"top"===e){let t=(t=!1)=>{this.style.maxHeight=null,this["#arrow"].setAttribute("data-align","bottom"),this["#arrow-path"].setAttribute("d","M 0 100, L 50 0, L 100 100");let e=this.getBoundingClientRect(),s=this["#arrow"].getBoundingClientRect(),r=0;if(this["#arrow"].style.top=n+a.bottom+2+i+"px",this.style.top=n+a.bottom+2+s.height+"px",e=this.getBoundingClientRect(),r=e.bottom+8-window.innerHeight,t&&r>0){let t=e.height-r;r=0,this.style.maxHeight=t+"px"}return r},r=(t=!1)=>{this.style.maxHeight=null,this["#arrow"].setAttribute("data-align","top"),this["#arrow-path"].setAttribute("d","M 0 0, L 50 100, L 100 0");let e=this.getBoundingClientRect(),s=this["#arrow"].getBoundingClientRect(),r=0;if(this["#arrow"].style.top=Math.floor(n+a.top-2-i-s.height)+"px",this.style.top=n+a.top-2-s.height-e.height+"px",e=this.getBoundingClientRect(),r=-(e.top-8),t&&r>0){let t=e.height-r;r=0,this.style.maxHeight=t+"px",this.style.top=n+a.top-2-s.height-t+"px"}return r},o=()=>{this.style.maxWidth=null;let t=this.getBoundingClientRect(),e=0,i=0;return this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+a.left+a.width/2-t.width/2+"px",t=this.getBoundingClientRect(),e=-(t.left-8),i=t.right+8-window.innerWidth,[e,i]},l=(t=!1)=>{this.style.maxWidth=null;let e=this.getBoundingClientRect(),i=0;if(this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+window.innerWidth-8-e.width+"px",e=this.getBoundingClientRect(),i=-(e.left-8),t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px",this.style.left=s+window.innerWidth-8-t+"px"}return i},h=(t=!1)=>{this.style.maxWidth=null;let e=this.getBoundingClientRect(),i=0;if(this["#arrow"].style.left=s+a.left+a.width/2+"px",this.style.left=s+8+"px",e=this.getBoundingClientRect(),i=e.right+8-window.innerWidth,t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px"}return i};if("bottom"===e){let e=t();if(e>0){let i=r();i>0&&(i>e?t(!0):r(!0))}}else if("top"===e){let e=r();if(e>0){let i=t();i>0&&(i>e?r(!0):t(!0))}}{let[t,e]=o();e>0?(t=l(),t>0&&l(!0)):t>0&&(e=h(),e>0&&h(!0))}}else if("right"===e||"left"===e){let t=(t=!1)=>{this.style.maxWidth=null,this["#arrow"].setAttribute("data-align","right"),this["#arrow-path"].setAttribute("d","M 100 0, L 0 50, L 100 100");let e=this.getBoundingClientRect(),n=this["#arrow"].getBoundingClientRect(),r=0;if(this["#arrow"].style.left=s+a.right+2+i+"px",this.style.left=s+a.right+2+n.width+"px",e=this.getBoundingClientRect(),r=e.right+8-window.innerWidth,t&&r>0){let t=e.width-r;r=0,this.style.maxWidth=t+"px"}return r},r=(t=!1)=>{this.style.maxWidth=null,this["#arrow"].setAttribute("data-align","left"),this["#arrow-path"].setAttribute("d","M 0 0, L 100 50, L 00 100");let e=this.getBoundingClientRect(),n=this["#arrow"].getBoundingClientRect(),r=0;if(this["#arrow"].style.left=s+a.left-2-i-n.width+"px",this.style.left=s+a.left-2-n.width-e.width+"px",e=this.getBoundingClientRect(),r=-(e.left-8),t&&r>0){let t=e.width-r;r=0,this.style.maxWidth=t+"px",this.style.left=s+a.left-2-n.width-t+"px"}return r},o=()=>{this.style.maxHeight=null;let t=this.getBoundingClientRect(),e=0,i=0;return this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+a.top+a.height/2-t.height/2+"px",t=this.getBoundingClientRect(),e=-(t.top-8),i=t.bottom+8-window.innerHeight,[e,i]},l=(t=!1)=>{this.style.maxHeight=null;let e=this.getBoundingClientRect(),i=0;if(this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+window.innerHeight-8-e.height+"px",e=this.getBoundingClientRect(),i=-(e.top-8),t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px",this.style.top=n+window.innerHeight-8-t+"px"}return i},h=(t=!1)=>{this.style.maxHeight=null;let e=this.getBoundingClientRect(),i=0;if(this["#arrow"].style.top=n+a.top+a.height/2+"px",this.style.top=n+8+"px",e=this.getBoundingClientRect(),i=e.bottom+8-window.innerHeight,t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px"}return i};if("right"===e){let e=t();if(e>0){let i=r();i>0&&(i>e?t(!0):r(!0))}}else if("left"===e){let e=r();if(e>0){let i=t();i>0&&(i>e?r(!0):t(!0))}}{let[t,e]=o();e>0?(t=l(),t>0&&l(!0)):t>0&&(e=h(),e>0&&h(!0))}}}#Yn(){{let{backgroundColor:t,borderColor:e,borderWidth:i}=getComputedStyle(this);this["#arrow-path"].style.fill=t,this["#arrow-path"].style.stroke=e,this["#arrow-path"].style.strokeWidth=i}}}customElements.define("x-popover",Oa);class Na extends HTMLElement{static observedAttributes=["value","max","disabled"];static#z=Us`<template><div id="determinate-bar" part="bar"></div><div id="indeterminate-bars"><div id="primary-indeterminate-bar" part="bar"></div><div id="secondary-indeterminate-bar" part="bar"></div></div></template>`;static#E=Ys`:host{display:block;box-sizing:border-box;height:8px;width:100%;position:relative;contain:strict;overflow:hidden;cursor:default}:host([hidden]){display:none}#indeterminate-bars{width:100%;height:100%}#determinate-bar{position:absolute;top:0;left:0;bottom:0;width:0%;height:100%;background:#3B99FB;transition:width 0.4s ease-in-out;will-change:left, right}:host([value="-1"]) #determinate-bar{visibility:hidden}#primary-indeterminate-bar{position:absolute;top:0;left:0;bottom:0;height:100%;background:#3B99FB;will-change:left, right}#secondary-indeterminate-bar{position:absolute;top:0;left:0;bottom:0;height:100%;background:#3B99FB;will-change:left, right}
`;get value(){return this.hasAttribute("value")?Number.parseFloat(this.getAttribute("value")):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get max(){return this.hasAttribute("max")?Number.parseFloat(this.getAttribute("max")):1}set max(t){this.setAttribute("max",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#Vn=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Na.#E],this.#$.append(document.importNode(Na.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){this.#Xt()}attributeChangedCallback(t,e,i){e!==i&&("value"===t||"disabled"===t)&&this.#Xt()}#Xt(){if(null===this.value||-1===this.value||this.disabled?this["#determinate-bar"].style.width="0%":this["#determinate-bar"].style.width=this.value/this.max*100+"%",null!==this.value||this.disabled){if(this.#Vn){for(let t of this.#Vn)t.cancel();this.#Vn=null}}else this.#Vn||(this.#Vn=[this["#primary-indeterminate-bar"].animate([{left:"-35%",right:"100%",offset:0},{left:"100%",right:"-90%",offset:.6},{left:"100%",right:"-90%",offset:1}],{duration:2e3,easing:"ease-in-out",iterations:Number.POSITIVE_INFINITY}),this["#secondary-indeterminate-bar"].animate([{left:"-100%",right:"100%",offset:0},{left:"110%",right:"-30%",offset:.8},{left:"110%",right:"-30%",offset:1}],{duration:2e3,delay:1e3,easing:"ease-in-out",iterations:Number.POSITIVE_INFINITY})])}}customElements.define("x-progressbar",Na);class Ha extends HTMLElement{static observedAttributes=["toggled","disabled"];static#z=Us`<template><div id="main"><div id="indicator" part="indicator"><div id="indicator-dot" part="indicator-dot"></div></div><div id="description"><slot></slot></div></div></template>`;static#E=Ys`:host{display:block;position:relative;width:fit-content}:host(:focus){outline:none}:host([disabled]){opacity:0.4;pointer-events:none}:host([hidden]){display:none}#main{display:flex;align-items:center}#indicator{position:relative;border:3px solid black;width:19px;height:19px;border-radius:99px;display:flex;align-items:center;justify-content:center}#indicator-dot{width:100%;height:100%;background:currentColor;border-radius:99px;transform:scale(0)}:host([mixed][toggled]) #indicator-dot{height:33%;border-radius:0}:host([toggled]) #indicator-dot{transform:scale(0.5)}#description{flex:1}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ha.#E],this.#$.append(document.importNode(Ha.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("keydown",(t=>this.#q(t)))}connectedCallback(){this.#J()}attributeChangedCallback(t,e,i){e!==i&&("toggled"===t?this.#xt():"disabled"===t&&this.#vt())}#J(){this.setAttribute("role","radio"),this.setAttribute("aria-checked",this.toggled),this.setAttribute("aria-disabled",this.disabled),this.closest("x-radios")||(this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0))}#xt(){this.setAttribute("aria-checked",this.toggled)}#vt(){this.#J()}#T(){this.closest("x-radios")||(this.toggled&&this.mixed?this.mixed=!1:(this.mixed=!1,this.toggled=!this.toggled),this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0})))}#Y(t){if(!1===this.matches(":focus")){t.preventDefault();let e=i(this.parentNode,"[tabindex]");e&&e.focus()}}#q(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-radio",Ha);class Ia extends HTMLElement{get value(){let t=this.querySelector("x-radio[toggled]");return t?t.value:null}set value(t){for(let e of this.querySelectorAll("x-radio"))e.toggled=e.value===t&&null!==t}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.innerHTML="<slot></slot>",this.addEventListener("click",(t=>this.#T(t)),!0),this.addEventListener("keydown",(t=>this.#q(t)))}connectedCallback(){this.setAttribute("role","radiogroup");let t=[...this.querySelectorAll("x-radio")].filter((t=>t.closest("x-radios")===this)),e=t.find((t=>t.toggled&&!t.disabled))||t.find((t=>!t.disabled));for(let i of t)i.setAttribute("tabindex",i===e?"0 ":"-1"),i.setAttribute("aria-checked",i===e)}#T(t){let e=t.target.closest("x-radio");if(e&&!e.disabled&&t.buttons<=1){let t=[...this.querySelectorAll("x-radio")].filter((t=>t.closest("x-radios")===this&&t!==e));if(!1===e.toggled||!0===e.mixed){e.toggled=!0,e.mixed=!1,e.tabIndex=0;for(let e of t)e.toggled=!1,e.mixed=!1,e.tabIndex=-1;this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:e}))}}}#q(t){if("ArrowDown"===t.code||"ArrowRight"===t.code){let e=[...this.querySelectorAll("x-radio")],i=e.filter((t=>!1===t.disabled&&t.closest("x-radios")===this)),s=e.find((t=>t.matches(":focus")));if(s){let e=i.indexOf(s),n=i.length>1?i[e+1]||i[0]:null;n&&(t.preventDefault(),n.focus(),n.tabIndex=0,s.tabIndex=-1)}}else if("ArrowUp"===t.code||"ArrowLeft"===t.code){let e=[...this.querySelectorAll("x-radio")],i=e.filter((t=>!1===t.disabled&&t.closest("x-radios")===this)),s=e.find((t=>t.matches(":focus")));if(s){let e=i.indexOf(s),n=i.at(-1),a=i.length>1?i[e-1]||n:null;a&&(t.preventDefault(),a.focus(),a.tabIndex=0,s.tabIndex=-1)}}}}customElements.define("x-radios",Ia);let ja=Symbol();class Ga extends HTMLElement{static observedAttributes=["disabled"];static#z=Us`<template><div id="button"><div id="arrow-container"><svg id="arrow" part="arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="arrow-path"></path></svg></div></div><slot></slot></template>`;static#E=Ys`:host{display:block;width:fit-content;height:32px;padding:0 0 0 8px;max-width:100%;box-sizing:border-box;position:relative;outline:none;font-size:0.875rem;user-select:none;-webkit-user-select:none}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}:host(:hover){cursor:default}:host([size="small"]){font-size:0.78125rem}#button{display:flex;flex-flow:row;align-items:center;justify-content:flex-start;flex:1;width:100%;height:100%}:host([mixed]) #button > *{opacity:0.7}#button > x-label{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#button > #arrow-container{display:flex;align-content:center;justify-content:center;margin:0 0 0 auto;z-index:1}#button > #arrow-container #arrow{display:flex;width:13px;height:13px;min-width:13px;margin:0 2px 0 11px;color:currentColor;--text-color: 50%;--path-data: M 25 41 L 50 16 L 75 41 L 83 34 L 50 1 L 17 34 Z M 17 66 L 50 100 L 83 66 L 75 59 L 50 84 L 25 59 Z;}#button > #arrow-container #arrow path{fill:currentColor}
`;get value(){let t=this.querySelector("x-menuitem[toggled]");return t?t.value:null}set value(t){for(let e of this.querySelectorAll("x-menuitem"))e.toggled=e.value===t&&null!==t}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;#X=!1;#Mt=null;#Lt=null;#P=null;#Wn=new MutationObserver((t=>this.#qn(t)));#Le=new ResizeObserver((()=>this.#Ae()));constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ga.#E],this.#$.append(document.importNode(Ga.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#backdrop"]=t("x-backdrop"),this["#backdrop"].style.opacity="0",this["#backdrop"].ownerElement=this,this["#backdrop"].addEventListener("click",(t=>this.#At(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("toggle",(t=>this.#Kn(t))),this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("keydown",(t=>this.#q(t)))}connectedCallback(){this.#Wn.observe(this,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this.#Le.observe(this),this.#Jn(),this.#J(),Vn.whenThemeReady.then((()=>{this.#O()})),Vn.addEventListener("themechange",this.#P=()=>this.#O())}disconnectedCallback(){this.#Wn.disconnect(),this.#Le.disconnect(),Vn.removeEventListener("themechange",this.#P)}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.#J()}#Vt(){if(!1===this.#Wt())return;this.#X=this.matches(":focus"),this["#backdrop"].show(!1),window.addEventListener("resize",this.#Mt=()=>{this.#qt()}),window.addEventListener("blur",this.#Lt=()=>{this.#qt()});let t=this.querySelector(":scope > x-menu");{let e=null;for(let i of t.querySelectorAll("x-menuitem"))i.togglable=!0,i.toggled&&(null===e?e=i:i.toggled=!1)}if(t.querySelector("x-menuitem[toggled]")){let e=this["#button"].querySelector("x-label")||this["#button"].firstElementChild,i=e[ja];t.openOverElement(e,i)}else{let e=t.querySelector("x-menuitem").firstElementChild;t.openOverElement(this["#button"],e)}{let e=t.getBoundingClientRect(),i=this["#button"].getBoundingClientRect(),s=Number.parseFloat(getComputedStyle(this).paddingRight);e.right-s<i.right&&(t.style.minWidth=i.right-e.left+s+"px")}{let t=this.getBoundingClientRect();t.right+7>window.innerWidth&&(this.style.maxWidth=window.innerWidth-t.left-7+"px")}}async#qt(t=null){if(!1===this.#Kt())return;let e=this.querySelector(":scope > x-menu");if(e.setAttribute("closing",""),await t,this["#backdrop"].hide(!1),this.#X)this.focus();else{let t=i(this.parentNode,"[tabindex]");t&&t.focus()}window.removeEventListener("resize",this.#Mt),window.removeEventListener("blur",this.#Lt),await e.close(),e.removeAttribute("closing")}#Wt(){if(this.disabled)return!1;{let t=this.querySelector(":scope > x-menu"),e=t.querySelector("x-menuitem");return null!==t&&!1===t.opened&&!1===t.hasAttribute("closing")&&null!==e}}#Kt(){if(this.disabled)return!1;{let t=this.querySelector(":scope > x-menu");return null!==t&&!0===t.opened&&!1===t.hasAttribute("closing")}}#Jn(){let t=this.querySelector(":scope > x-menu x-menuitem[toggled]");if(this["#button"].innerHTML="",t){for(let e of t.children){let t=e.cloneNode(!0);t[ja]=e,t.removeAttribute("id"),t.removeAttribute("style"),this["#button"].append(t)}this.#Qn()}this["#button"].append(this["#arrow-container"])}#ta=Yn(this.#Jn,300,this);#Qn(){for(let t of this["#button"].children)if(t!==this["#arrow-container"]){let{width:e,height:i,margin:s,padding:n,border:a,borderRadius:r}=getComputedStyle(t[ja]);["x-icon","x-swatch","img","svg"].includes(t[ja].localName)&&(t.style.width=e,t.style.height=i,t.style.minWidth=e,t.style.borderRadius=r),t.style.margin=s,t.style.padding=n,t.style.border=a}}#O(){let t=getComputedStyle(this["#arrow"]).getPropertyValue("--path-data");this["#arrow-path"].setAttribute("d",t)}#J(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0);{this.setAttribute("role","button");let t=this.querySelector(":scope > x-menu");if(t){t.setAttribute("role","listbox");for(let e of t.querySelectorAll("x-menuitem"))e.setAttribute("role","option")}}}async#qn(t){for(let e of t)if("attributes"===e.type&&"x-menuitem"===e.target.localName&&"toggled"===e.attributeName){await Zn(10),this.#ta();break}}#Ae(){this.#Qn()}#Y(t){t.target.closest("x-menu")||!1!==this.matches(":focus")||t.preventDefault()}async#T(t){if(!(t.buttons>1))if(this.#Wt())this.#Vt();else if(this.#Kt()){let e=t.target.closest("x-menuitem");if(e){let t=this.value,i=e.value;for(let t of this.querySelectorAll("x-menuitem"))t.toggled=t===e;await this.#qt(e.whenTriggerEnd),(t!==i||this.mixed)&&(this.mixed=!1,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{oldValue:t,newValue:i}})))}}}#Kn(t){t.preventDefault()}#At(){this.#qt()}#q(t){!1===t.defaultPrevented&&("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code||"ArrowUp"===t.code||"ArrowDown"===t.code?this.#Wt()&&(t.preventDefault(),this.#Vt()):"Escape"===t.code&&this.#Kt()&&(t.preventDefault(),this.#qt()))}}customElements.define("x-select",Ga);const Fa=navigator.platform.startsWith("Mac")||["iPhone","iPad"].includes(navigator.platform),Xa=["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock"];class _a extends HTMLElement{static observedAttributes=["value"];static#z=Us`<template><div id="main"></div></template>`;static#E=Ys`:host{display:inline-block;box-sizing:border-box;font-size:0.875rem;line-height:1}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}
`;get value(){let t=[];if(this.hasAttribute("value")){let e=this.getAttribute("value").replace("++","+PLUS").split("+");e=e.map((t=>t.trim().replace("PLUS","+"))).filter((t=>""!==t)),t=e}return t}set value(t){this.setAttribute("value",t.join("+"))}get modKeys(){return this.value.filter((t=>Xa.includes(t)))}get normalKey(){let t=this.value.find((t=>!1===Xa.includes(t)));return void 0===t?null:t}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[_a.#E],this.#$.append(document.importNode(_a.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}attributeChangedCallback(t,e,i){e!==i&&"value"===t&&this.#Xt()}#Xt(){let t="",e=this.modKeys,i=this.normalKey;if(Fa){e.includes("Meta")&&(t+="^"),e.includes("Alt")&&(t+="⌥"),e.includes("Shift")&&(t+="⇧"),e.includes("Control")&&(t+="⌘"),e.includes("Symbol")&&(t+="☺"),void 0!==i&&(t+={ArrowUp:"↑",ArrowDown:"↓",ArrowLeft:"←",ArrowRight:"→",Backspace:"⌦"}[i]||i)}else{let s=[];e.includes("Control")&&s.push("Ctrl"),e.includes("Alt")&&s.push("Alt"),e.includes("Meta")&&s.push("Meta"),e.includes("Shift")&&s.push("Shift"),e.includes("Symbol")&&s.push("Symbol");let n={ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};null!==i&&s.push(n[i]||i),t=s.join("+")}this["#main"].textContent=t}}customElements.define("x-shortcut",_a);class Za extends HTMLElement{static observedAttributes=["value","min","max","ticks","disabled"];static#z=Us`<template><div id="main"><div id="groove-track" part="track groove-track"></div><div id="range-track" part="track range-track"></div><div id="thumbs" part="thumbs"><div id="ticks"></div><div id="start-thumb" class="thumb" part="thumb start-thumb" data-value="start" tabindex="0"></div><div id="end-thumb" class="thumb" part="thumb end-thumb" data-value="end" tabindex="0"></div></div></div></template>`;static#E=Ys`:host{display:block;width:100%;height:20px;position:relative;box-sizing:border-box;touch-action:pan-y}:host(:focus){outline:none}:host(:hover){cursor:default}:host([disabled]){pointer-events:none;opacity:0.4}:host([size="small"]){height:17px}:host([size="large"]){height:23px}#main{display:flex;flex-flow:column;width:100%;height:100%;position:relative}#range-track{position:absolute;width:0%;height:4px;background:black;top:50%;transform:translateY(-50%)}#groove-track{position:absolute;width:100%;height:4px;background:gray;top:50%;transform:translateY(-50%)}#thumbs{position:relative;width:calc(100% - var(--computed-thumb-width));height:100%;margin:0 auto}#thumbs .thumb{position:absolute;top:0;left:0%;width:fit-content;height:100%;aspect-ratio:1;margin-left:calc(var(--computed-thumb-width) / -2);box-sizing:border-box;background:gray;border:1px solid rgba(0, 0, 0, 0.2)}#thumbs .thumb:focus{outline:none;z-index:2}#ticks{position:absolute;left:0px;bottom:0px;width:100%;height:100%}#ticks:empty{display:none}#ticks .tick{position:absolute;left:0%;bottom:-5px;width:1px;height:5px;background:rgba(0, 0, 0, 0.4)}
`;get min(){return this.hasAttribute("min")?Number.parseFloat(this.getAttribute("min")):0}set min(t){this.setAttribute("min",t)}get max(){return this.hasAttribute("max")?Number.parseFloat(this.getAttribute("max")):100}set max(t){this.setAttribute("max",t)}get value(){if(this.hasAttribute("value")){let t=this.getAttribute("value").split(/[ ,]+/);return t.length>=2?t.map((t=>Number.parseFloat(t))).slice(0,2):Number.parseFloat(t[0])}return this.max>=this.min?this.min+(this.max-this.min)/2:this.min}set value(t){Array.isArray(t)?((t=t.map((t=>Si(t,this.min,this.max)))).length=2,this.setAttribute("value",t.join(" "))):(t=Si(t,this.min,this.max),this.setAttribute("value",t))}get step(){return this.hasAttribute("step")?Number.parseFloat(this.getAttribute("step")):1}set step(t){this.setAttribute("step",t)}get ticks(){return this.hasAttribute("ticks")}set ticks(t){t?this.setAttribute("ticks",""):this.removeAttribute("ticks")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get range(){return this.hasAttribute("range")}get dragging(){return this.getAttribute("dragging")}#$=null;#U=0;#ea=null;#ia=new ResizeObserver((()=>this.#sa()));constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Za.#E],this.#$.append(document.importNode(Za.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#Zs(t))),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("keydown",(t=>this.#q(t)))}connectedCallback(){this.setAttribute("value",this.value),this.#ia.observe(this["#start-thumb"]),this.#Xt(),this.#J()}disconnectedCallback(){this.#ia.unobserve(this["#start-thumb"])}attributeChangedCallback(t,e,i){e!==i&&!1!==this.isConnected&&("value"===t?this.#Zt():"min"===t?this.#zn():"max"===t?this.#En():"ticks"===t?this.#na():"disabled"===t&&this.#vt())}#Zt(){this.#Xt()}#zn(){this.#Xt()}#En(){this.#Xt()}#na(){this.#Xt()}#vt(){this.#J()}#sa(){let t=this["#start-thumb"].getBoundingClientRect();t.width!==this.#ea&&(this.#ea=t.width,this["#main"].style.setProperty("--computed-thumb-width",t.width+"px"))}#Y(t){if(!1===this.matches(":focus")){t.preventDefault();let e=i(this.parentNode,"[tabindex]");e&&e.focus()}}#Zs(t){if(t.buttons>1||!1===t.isPrimary)return;let e,i,s=null,{width:n}=this["#start-thumb"].getBoundingClientRect(),a=this["#main"].getBoundingClientRect(),r=!1;if(t.target.matches(".thumb"))s=t.target;else if(!0===this["#end-thumb"].hidden)s=this["#start-thumb"];else{let e=this["#start-thumb"].getBoundingClientRect(),i=this["#end-thumb"].getBoundingClientRect(),n=new DOMPoint(e.x+e.width/2,e.y+e.height/2),a=new DOMPoint(i.x+i.width/2,i.y+i.height/2),r=new DOMPoint(t.clientX,t.clientY),o=Ai(r,n),l=Ai(r,a);s=o<=l?this["#start-thumb"]:this["#end-thumb"]}let o=t=>{let e=t-(a.x+n/2);e=Si(e,0,a.width-n);let i=e/(a.width-n)*(this.max-this.min)+this.min;var o,l;if(o=i,l=this.step,i=Ei(Ei(o/l)*l,Li(l)),Array.isArray(this.value)){let[t,e]=this.value;s===this["#start-thumb"]?(i>=e&&(i=e),i!==t&&(this.value=[i,e],!1===r&&(r=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))):s===this["#end-thumb"]&&(i<=t&&(i=t),i!==e&&(this.value=[t,i],!1===r&&(r=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))))}else this.value!==i&&(this.value=i,!1===r&&(r=!0,this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}))),this.dispatchEvent(new CustomEvent("change",{bubbles:!0})))};s.setPointerCapture(t.pointerId),this.setAttribute("dragging",s.dataset.value),o(t.clientX,t.clientY);for(let t of this["#thumbs"].children)t.style.zIndex=t===s?"1":"0";s.addEventListener("pointermove",e=t=>{t.isPrimary&&o(t.clientX,t.clientY)}),s.addEventListener("pointerup",i=()=>{s.removeEventListener("pointermove",e),s.removeEventListener("pointerup",i),s.removeEventListener("pointercancel",i),this.removeAttribute("dragging"),r&&this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}),s.addEventListener("pointercancel",i)}#q(t){if("ArrowLeft"===t.code||"ArrowDown"===t.code){t.preventDefault(),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=this.value;if(Array.isArray(this.value)){let[i,s]=this.value;this.#$.activeElement===this["#start-thumb"]?t.shiftKey?i-=10*this.step:i-=this.step:this.#$.activeElement===this["#end-thumb"]&&(t.shiftKey?s-=10*this.step:s-=this.step,s<=i&&(s=i)),this.value=[i,s],!1===bt(e,this.value)&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}else t.shiftKey?this.value-=10*this.step:this.value-=this.step,e!==this.value&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}));this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}else if("ArrowRight"===t.code||"ArrowUp"===t.code){t.preventDefault(),this.dispatchEvent(new CustomEvent("changestart",{bubbles:!0}));let e=this.value;if(Array.isArray(this.value)){let[i,s]=this.value;this.#$.activeElement===this["#start-thumb"]?(t.shiftKey?i+=10*this.step:i+=this.step,i>=s&&(i=s)):this.#$.activeElement===this["#end-thumb"]&&(t.shiftKey?s+=10*this.step:s+=this.step),this.value=[i,s],!1===bt(e,this.value)&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}else t.shiftKey?this.value+=10*this.step:this.value+=this.step,e!==this.value&&this.dispatchEvent(new CustomEvent("change",{bubbles:!0}));this.dispatchEvent(new CustomEvent("changeend",{bubbles:!0}))}}#Xt(){if(Array.isArray(this.value)){let[t,e]=this.value,i=(t-this.min)/(this.max-this.min)*100,s=(e-this.min)/(this.max-this.min)*100;this.setAttribute("range",""),this["#start-thumb"].style.left=`${i}%`,this["#start-thumb"].hidden=!1,this["#end-thumb"].style.left=`${s}%`,this["#end-thumb"].hidden=!1,this["#range-track"].style.left=`${i}%`,this["#range-track"].style.width=s-i+"%"}else{let t=(this.value-this.min)/(this.max-this.min)*100;this.removeAttribute("range"),this["#start-thumb"].style.left=`${t}%`,this["#start-thumb"].hidden=!1,this["#end-thumb"].hidden=!0;{let e=((this.min>0?this.min:0)-this.min)/(this.max-this.min)*100;t>=e?(this["#range-track"].style.left=`${e}%`,this["#range-track"].style.width=t-e+"%",this["#range-track"].style.removeProperty("border-top-left-radius"),this["#range-track"].style.removeProperty("border-bottom-left-radius"),this["#range-track"].style.setProperty("border-top-right-radius","0px","important"),this["#range-track"].style.setProperty("border-bottom-right-radius","0px","important")):(this["#range-track"].style.left=`${t}%`,this["#range-track"].style.width=e-t+"%",this["#range-track"].style.setProperty("border-top-left-radius","0px","important"),this["#range-track"].style.setProperty("border-bottom-left-radius","0px","important"),this["#range-track"].style.removeProperty("border-top-right-radius"),this["#range-track"].style.removeProperty("border-bottom-right-radius"))}}if(this["#ticks"].innerHTML="",this.ticks){let t=(this.max-this.min)/this.step;for(let e=this.min,i=0;e<=this.max;e+=this.step,i+=1){let s=(e-this.min)/(this.max-this.min)*100,n=["tick"];if(0===i?n.push("first-tick"):i===t&&n.push("last-tick"),Array.isArray(this.value)){let[t,i]=this.value;e>=t&&e<=i&&n.push("range-tick")}else e<=this.value&&n.push("range-tick");this["#ticks"].insertAdjacentHTML("beforeend",`<div class="tick" part="${n.join(" ")}" data-value="${e}" style="left: ${s}%"></div>`)}}}#J(){this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0),this["#start-thumb"].tabIndex=this.tabIndex,this["#end-thumb"].tabIndex=this.tabIndex}}customElements.define("x-slider",Za);class Ua extends HTMLElement{static observedAttributes=["disabled"];static#z=Us`<template><div id="decrement-button" part="decrement-button" class="button"><svg id="decrement-arrow" part="decrement-arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="decrement-arrow-path"></path></svg></div><div id="increment-button" part="increment-button" class="button"><svg id="increment-arrow" part="increment-arrow" viewBox="0 0 100 100" preserveAspectRatio="none"><path id="increment-arrow-path"></path></svg></div></template>`;static#E=Ys`:host{display:flex;flex-flow:column-reverse;align-items:center;justify-content:center;box-sizing:border-box;height:100%;width:fit-content;color:rgba(0, 0, 0, 0.6)}:host(:hover){cursor:default}:host([disabled=""]){opacity:0.5;pointer-events:none}.button{display:flex;align-items:center;justify-content:center;width:100%;height:100%;user-select:none;-webkit-user-select:none;box-sizing:border-box;color:inherit;border-left:none}.button[data-pressed]{color:white;background:rgba(0, 0, 0, 0.3)}:host([disabled="increment"]) #increment-button, :host([disabled="decrement"]) #decrement-button{opacity:0.3;pointer-events:none}#increment-arrow{width:11px;height:11px;pointer-events:none;--path-data: M 24 69 L 50 43 L 76 69 L 69 76 L 50 58 L 31 76 L 24 69 Z;}#decrement-arrow{width:11px;height:11px;pointer-events:none;--path-data: M 24 32 L 50 58 L 76 32 L 69 25 L 50 44 L 31 25 L 24 32 Z;}#increment-arrow-path, #decrement-arrow-path{fill:currentColor}
`;get disabled(){return!!this.hasAttribute("disabled")&&("increment"===this.getAttribute("disabled")?"increment":"decrement"!==this.getAttribute("disabled")||"decrement")}set disabled(t){!0===t?this.setAttribute("disabled",""):!1===t?this.removeAttribute("disabled"):this.setAttribute("disabled",t)}#$=null;#aa=null;#P=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ua.#E],this.#$.append(document.importNode(Ua.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.#$.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("contextmenu",(t=>t.preventDefault()))}connectedCallback(){Vn.whenThemeReady.then((()=>{this.#ra()})),Vn.addEventListener("themechange",this.#P=()=>this.#ra()),"x-numberinput"===this.parentElement?.localName&&(this.#aa=this.parentElement,this.#aa.setAttribute("hasstepper",""))}disconnectedCallback(){Vn.removeEventListener("themechange",this.#P),this.#aa&&(null===this.#aa.querySelector(":scope > x-stepper")&&this.#aa.removeAttribute("hasstepper",""),this.#aa=null)}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.#vt()}#ra(){let t=getComputedStyle(this["#increment-arrow"]).getPropertyValue("--path-data"),e=getComputedStyle(this["#decrement-arrow"]).getPropertyValue("--path-data");this["#increment-arrow-path"].setAttribute("d",t),this["#decrement-arrow-path"].setAttribute("d",e)}#vt(){this.hasAttribute("disabled")&&(this.removeAttribute("pressed"),this["#increment-button"].removeAttribute("data-pressed"),this["#decrement-button"].removeAttribute("data-pressed"))}#Y(t){let e=t.target.closest(".button"),i=null;if(e===this["#increment-button"]?i="increment":e===this["#decrement-button"]&&(i="decrement"),!(t.buttons>1||null===i)){this.setPointerCapture(t.pointerId);{let t,s=Date.now();e.setAttribute("data-pressed",""),this.setAttribute("pressed",i),this.addEventListener("pointerup",t=async()=>{this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t);let i=Date.now()-s;i<100&&await Zn(100-i),e.removeAttribute("data-pressed"),this.removeAttribute("pressed")},{once:!0}),this.addEventListener("pointercancel",t)}{let e,s=null,n=Date.now(),{shiftKey:a}=t;this.dispatchEvent(new CustomEvent(i+"start",{bubbles:!0})),this.dispatchEvent(new CustomEvent(i,{bubbles:!0,detail:{shiftKey:a}})),this.addEventListener("pointerup",e=()=>{this.removeEventListener("pointerup",e),this.removeEventListener("pointercancel",e),clearInterval(s),this.dispatchEvent(new CustomEvent(i+"end",{bubbles:!0}))}),this.addEventListener("pointercancel",e),s=setInterval((()=>{Date.now()-n>500&&this.dispatchEvent(new CustomEvent(i,{bubbles:!0,detail:{shiftKey:a}}))}),100)}}}}customElements.define("x-stepper",Ua);class Ya extends HTMLElement{static observedAttributes=["value"];static#z=Us`<template><div id="preview"></div></template>`;static#E=Ys`:host{display:block;width:18px;height:18px;cursor:default;box-sizing:border-box;overflow:hidden;border-width:1px;border-style:solid;background:var(--checkboard-background);background-size:8px 8px;background-position:0 0, 0 4px, 4px -4px, -4px 0px}#preview{width:100%;height:100%;position:relative}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):"white"}set value(t){this.setAttribute("value",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ya.#E],this.#$.append(document.importNode(Ya.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}connectedCallback(){this.#qi()}attributeChangedCallback(t,e,i){e!==i&&"value"===t&&this.#qi()}#qi(){this["#preview"].style.background=this.value}}customElements.define("x-swatch",Ya);class Va extends HTMLElement{static observedAttributes=["toggled","disabled"];static#z=Us`<template><div id="main"><div id="indicator" part="indicator"><div id="indicator-track" part="indicator-track"><div id="indicator-thumb" part="indicator-thumb" style="transition: none;"></div></div></div><div id="description"><slot></slot></div></div></template>`;static#E=Ys`:host{display:block;width:fit-content;margin:2px 0}:host(:focus){outline:none}:host([disabled]){opacity:0.4;pointer-events:none}#main{display:flex;align-items:center}#indicator{position:relative;width:34px;height:15px;display:flex;align-items:center}#indicator-track{display:flex;align-items:center;width:100%;height:65%;background:currentColor;border-radius:999px}#indicator-thumb{position:absolute;left:0px;width:16px;height:16px;background:currentColor;border-radius:999px;transition:left 0.2s cubic-bezier(0.4, 0, 0.2, 1)}:host([toggled]) #indicator-thumb{left:calc(100% - 16px)}:host([mixed]) #indicator-thumb{left:calc(50% - 16px / 2)}#description{flex:1}
`;get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Va.#E],this.#$.append(document.importNode(Va.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("keydown",(t=>this.#q(t)))}connectedCallback(){Zn(100).then((()=>this["#indicator-thumb"].style.transition=null)),this.#J()}disconnectedCallback(){this["#indicator-thumb"].style.transition="none"}attributeChangedCallback(t,e,i){e!==i&&("toggled"===t?this.#xt():"disabled"===t&&this.#vt())}#J(){this.setAttribute("role","switch"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#xt(){this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled)}#vt(){this.#J()}#Y(t){if(t.buttons>1)t.preventDefault();else if(!1===this.matches(":focus")){t.preventDefault();let e=i(this.parentNode,"[tabindex]");e&&e.focus()}}#T(){this.mixed?this.mixed=!1:this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle"))}#q(t){"Enter"!==t.code&&"NumpadEnter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.click())}}customElements.define("x-switch",Va);class Wa extends HTMLElement{static observedAttributes=["toggled","disabled"];static#z=Us`<template><div id="selection-indicator" part="selection-indicator"></div><div id="content"><slot></slot></div></template>`;static#E=Ys`:host{position:relative;display:flex;align-items:center;justify-content:center;min-height:30px;padding:2px 12px;box-sizing:border-box;cursor:default;user-select:none;-webkit-user-select:none;box-sizing:border-box;font-size:0.875rem}:host(:focus){z-index:10;outline:none}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}#content{display:inherit;flex-flow:inherit;align-items:inherit;z-index:100}#selection-indicator{display:none;width:100%;height:0px;background:var(--accent-color);position:absolute;bottom:0;left:0}:host([toggled]) #selection-indicator{display:block}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):""}set value(t){this.setAttribute("value",t)}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Wa.#E],this.#$.append(document.importNode(Wa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t)))}connectedCallback(){this.#J()}attributeChangedCallback(t,e,i){e!==i&&("toggled"===t||"disabled"===t)&&this.#J()}animateSelectionIndicator(t){return new Promise((async e=>{if("0px"!==getComputedStyle(this["#selection-indicator"]).height){let e=this.getBoundingClientRect(),i=t.getBoundingClientRect(),s=getComputedStyle(this["#selection-indicator"]),n=1e3*Number.parseFloat(s.getPropertyValue("transition-duration")||"0s"),a=s.getPropertyValue("transition-timing-function")||"linear",r=this["#selection-indicator"].animate([{left:"0px",width:e.width+"px"},{left:i.left-e.left+"px",width:i.width+"px"}],{duration:n,easing:a,iterations:1,delay:0});await r.finished}e()}))}#J(){this.setAttribute("role","tab"),this.setAttribute("aria-selected",this.toggled),this.setAttribute("aria-disabled",this.disabled),this.setAttribute("tabindex",this.toggled?"0":"-1")}#Y(t){if(!1===this.matches(":focus")){t.preventDefault();let e=i(this.parentNode,"[tabindex]");e&&e.focus()}if(!(t.buttons>1)){this.setPointerCapture(t.pointerId);{let t,e=Date.now();this.setAttribute("pressed",""),this.addEventListener("pointerup",t=async()=>{if(this.removeEventListener("pointerup",t),this.removeEventListener("pointercancel",t),!0===this.toggled){let t=Date.now()-e,i=100;t<i&&await Zn(i-t)}this.removeAttribute("pressed")}),this.addEventListener("pointercancel",t)}}}}customElements.define("x-tab",Wa);class qa extends HTMLElement{static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{position:relative;display:flex;margin:0 auto;width:fit-content;max-width:100%;box-sizing:border-box;justify-content:center}::slotted(x-tab){flex:0}
`;get value(){let t=this.querySelector("x-tab[toggled]");return t?t.value:null}set value(t){let e=[...this.querySelectorAll("x-tab")],i=null===t?null:e.find((e=>e.value===t));for(let t of e)t.toggled=t===i}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[qa.#E],this.#$.append(document.importNode(qa.#z.content,!0)),this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("keydown",(t=>this.#q(t)))}connectedCallback(){this.setAttribute("role","tablist")}async#T(t){if(!(t.buttons>1)&&t.target.closest("x-tab")){let e=this.querySelectorAll("x-tab"),i=t.target.closest("x-tab"),s=this.querySelector("x-tab[toggled]");if(i!==s){s&&await s.animateSelectionIndicator(i);for(let t of e)t.toggled=t===i;this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}}}#q(t){if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=t.target;t.preventDefault(),e.click()}else if("ArrowLeft"===t.code){let e=[...this.querySelectorAll("x-tab:not([disabled])")],i=this.querySelector('x-tab[tabindex="0"]');if(t.preventDefault(),i&&e.length>0){let t=e.indexOf(i),s=e[t-1]||e.at(-1);i.tabIndex=-1,s.tabIndex=0,s.focus()}}else if("ArrowRight"===t.code){let e=[...this.querySelectorAll("x-tab:not([disabled])")],i=this.querySelector('x-tab[tabindex="0"]');if(t.preventDefault(),i&&e.length>0){let t=e.indexOf(i),s=e[t+1]||e[0];i.tabIndex=-1,s.tabIndex=0,s.focus()}}}}customElements.define("x-tabs",qa);class Ka extends HTMLElement{static#z=Us`<template><div id="container"><div id="scope" part="scope"><slot id="scope-slot" name="scope"></slot></div><div id="main" part="main"><slot></slot><svg id="remove-button" part="remove-button" width="12" height="12" viewBox="0 0 100 100"><path id="remove-button-path"></path></svg></div></div></template>`;static#E=Ys`:host{display:inline-block;height:24px;box-sizing:border-box;overflow:hidden;color:var(--text-color);border-width:1px;border-style:solid;cursor:default}:host([toggled]){background:gray;color:white;outline:none}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}:host(:focus){outline:none;z-index:1}#container{width:100%;height:100%;display:flex;align-items:center;justify-content:center}#scope{height:100%;padding:0 6px;display:none;align-items:center;justify-content:center;border-right-width:1px;border-right-style:solid}:host([scoped]) #scope{display:flex}#main{height:100%;padding:0 6px;display:flex;align-items:center;justify-content:center}#remove-button{display:none;opacity:0.8;width:12px;height:12px;vertical-align:middle;margin-left:4px;fill:currentColor;color:inherit;--path-data: M 25 16 L 50 41 L 75 16 L 84 25 L 59 50 L 84 75 L 75 84 L 50 59 L 25 84 L 16 75 L 41 50 L 16 25 Z;}:host([removable]) #remove-button{display:block}#remove-button:hover{opacity:1}#remove-button path{fill:inherit;pointer-events:none}
`;get value(){return this.hasAttribute("value")?this.getAttribute("value"):null}set value(t){null===t?this.removeAttribute("value"):this.setAttribute("value",t)}get removable(){return this.hasAttribute("removable")}set removable(t){t?this.setAttribute("removable",""):this.removeAttribute("removable")}get toggled(){return this.hasAttribute("toggled")}set toggled(t){t?this.setAttribute("toggled",""):this.removeAttribute("toggled")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#P=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ka.#E],this.#$.append(document.importNode(Ka.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#scope-slot"].addEventListener("slotchange",(()=>this.#oa())),this["#remove-button"].addEventListener("click",(t=>this.#la(t)))}connectedCallback(){Vn.whenThemeReady.then((()=>{this.#ha()})),this.#oa(),Vn.addEventListener("themechange",this.#P=()=>this.#ha()),this.closest("x-tags")?(this.tabIndex=0,this.removable=!1):this.closest("x-tagsinput")?(this.toggled=!1,this.tabIndex=0,this.removable=!0):this.removable=!1}disconnectedCallback(){Vn.removeEventListener("themechange",this.#P)}#la(t){t.buttons<=1&&this.dispatchEvent(new CustomEvent("remove",{bubbles:!0}))}#ha(){let t=getComputedStyle(this["#remove-button"]).getPropertyValue("--path-data");this["#remove-button-path"].setAttribute("d",t)}#oa(){0===this["#scope-slot"].assignedElements().length?this.removeAttribute("scoped"):this.setAttribute("scoped","")}}customElements.define("x-tag",Ka);class Ja extends HTMLElement{static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:flex;box-sizing:border-box;align-items:center;justify-content:flex-start}:host([hidden]){display:none}
`;get value(){return[...this.children].filter((t=>"x-tag"===t.localName)).filter((t=>t.toggled)).map((t=>t.value)).filter((t=>null!==t))}set value(t){let e=[...this.children].filter((t=>"x-tag"===t.localName));for(let i of e)i.toggled=t.includes(i.value)}#$=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Ja.#E],this.#$.append(document.importNode(Ja.#z.content,!0)),this.addEventListener("pointerdown",(t=>this.#Y(t))),this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("keydown",(t=>this.#q(t)))}#Y(t){if(t.buttons>1)t.preventDefault();else if(t.preventDefault(),!1===this.matches(":focus")){let t=i(this.parentNode,"*[tabindex]:not(a)");this.addEventListener("pointerup",(()=>{t?t.focus():this.blur()}),{once:!0})}}#T(t){let e=t.target.closest("x-tag");e&&!1===t.defaultPrevented&&(e.toggled=!e.toggled,this.dispatchEvent(new CustomEvent("toggle",{detail:e})))}#q(t){if(!1===t.defaultPrevented)if("Enter"===t.code||"NumpadEnter"===t.code||"Space"===t.code){let e=this.querySelector("x-tag:focus");e&&(t.preventDefault(),e.click())}else if("ArrowRight"===t.code){let t=this.querySelector("x-tag:focus");t&&(t.nextElementSibling?t.nextElementSibling.focus():t!==t.parentElement.firstElementChild&&t.parentElement.firstElementChild.focus())}else if("ArrowLeft"===t.code){let t=this.querySelector("x-tag:focus");t&&(t.previousElementSibling?t.previousElementSibling.focus():t!==t.parentElement.lastElementChild&&t.parentElement.lastElementChild.focus())}}}customElements.define("x-tags",Ja);class Qa extends HTMLElement{static observedAttributes=["spellcheck","disabled"];static#z=Us`<template><div id="main"><slot></slot><input id="input" type="text" part="input" spellcheck="false" tabindex="0"></div><x-popover id="suggestions-popover" part="suggestions"><div id="suggested-tags"></div></x-popover></template>`;static#E=Ys`:host{display:block flex;position:relative;box-sizing:border-box;align-items:center;padding:3px;gap:3px;font-size:0.78125rem}:host(:focus){z-index:10}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}#main{width:100%;height:100%;cursor:text;display:flex;align-items:center;flex-wrap:wrap;gap:inherit}:host([mixed]) #main{opacity:0.7}#input{width:10px;height:20px;margin:2px;padding:0px 3px 0 5px;box-sizing:border-box;line-height:22px;color:inherit;background:none;border:none;outline:none;font-size:inherit;font-family:inherit}#suggestions-popover{width:200px;max-height:200px;padding:4px;box-sizing:border-box}#suggestions-popover #suggested-tags{flex:1;overflow:auto}#suggestions-popover x-tag{display:block;margin:4px 0 0 0}#suggestions-popover x-tag:first-child{margin-top:0}
`;get value(){return[...this.children].filter((t=>"x-tag"===t.localName)).map((t=>t.value)).filter((t=>null!==t))}get delimiter(){return this.hasAttribute("delimiter")?this.getAttribute("delimiter"):","}set delimiter(t){this.setAttribute("delimiter",t)}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get suggestions(){return this.hasAttribute("suggestions")}set suggestions(t){t?this.setAttribute("suggestions",""):this.removeAttribute("suggestions")}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#U=0;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,Qa.#E],this.#$.append(document.importNode(Qa.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("pointerdown",(t=>this.#Y(t))),this.#$.addEventListener("pointerdown",(t=>this.#Zs(t))),this.#$.addEventListener("remove",(t=>this.#la(t))),this.#$.addEventListener("keydown",(t=>this.#q(t))),this["#input"].addEventListener("focusin",(t=>this.#da(t))),this["#input"].addEventListener("focusout",(t=>this.#ca(t))),this["#input"].addEventListener("input",(t=>this.#Rt(t)))}connectedCallback(){this.#ua(),this.#J()}attributeChangedCallback(t,e,i){e!==i&&("spellcheck"===t?this.#cs():"disabled"===t&&this.#vt())}clear(){let t=[...this.children].filter((t=>"x-tag"===t.localName));if(t.length>0){for(let e of t)e.remove(),this.dispatchEvent(new CustomEvent("remove",{detail:e}));this.#pa(),this.#ua(),this.dispatchEvent(new CustomEvent("change"))}}getSuggestions(){return[]}#ma(){let t=this["#input"].value;if(this["#input"].value="",this.#ba(),t.endsWith(this.delimiter)&&(t=t.substring(0,t.length-1)),t=t.trim(),t.length>0&&!1===this.value.includes(t)){let e;if(t.includes(":")){let[i,s]=t.split(":").map((t=>t.trim()));e=Us`<x-tag class="tag" value="${t}" removable><x-label slot="scope">${i}</x-label><x-label>${s}</x-label></x-tag>`}else e=Us`<x-tag class="tag" value="${t}" removable><x-label>${t}</x-label></x-tag>`;this.append(e),this.dispatchEvent(new CustomEvent("add",{detail:e})),this.dispatchEvent(new CustomEvent("change"))}this["#input"].style.minWidth="0px",this["#input"].style.minWidth=this["#input"].scrollWidth+"px"}#ga(){this["#suggested-tags"].innerHTML="",!0===this["#suggestions-popover"].opened&&this["#suggestions-popover"].close()}#fa=0;#Y(t){t.target===this&&!1===t.defaultPrevented&&(t.preventDefault(),this["#input"].focus())}#Zs(t){if(this.#fa=Un(),t.target===this["#input"])this["#input"].value.length>0&&this.#ga();else if(t.target===this["#main"])t.preventDefault(),this["#input"].focus(),this.#pa(!1);else if(t.target.closest("x-popover")){t.preventDefault();let e=t.target.closest("x-tag");e&&(this.append(e),this["#input"].value="",this.#ba(),this.#pa(!1),this.dispatchEvent(new CustomEvent("add",{detail:e})),this.dispatchEvent(new CustomEvent("change")))}else t.target.closest("x-tag")&&""!==this["#input"].value&&(this.#ma(),this.#pa(),this.#ua())}#la(t){t.stopPropagation();let e=t.target;e.remove(),this.#ua(),this.dispatchEvent(new CustomEvent("remove",{detail:e})),this.dispatchEvent(new CustomEvent("change"))}#cs(){this["#input"].spellcheck=this.spellcheck}#vt(){this.#J()}#da(){this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#ca(){this.#ma(),this.#ua(),this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),this["#suggestions-popover"].close()}#Rt(t){this["#input"].value.includes(this.delimiter)?(this.#ma(),this.#ua(),this.#ba(),this.#pa(!1)):(this.dispatchEvent(new CustomEvent("input")),this.#ua(),this.#ba(),this.#pa("deleteContentBackward"!==t.inputType))}#q(t){if("Enter"===t.code||"NumpadEnter"===t.code)t.target===this["#input"]&&(t.preventDefault(),this.#ma(),this.#pa(!1),this.#ua(),this.#ba());else if("Backspace"===t.code){if(t.target===this["#input"]){if(0===this["#input"].value.length){let t=[...this.children].filter((t=>"x-tag"===t.localName)).at(-1)||null;t&&(t.remove(),this.#pa(),this.#ua(),this.dispatchEvent(new CustomEvent("remove",{detail:t})),this.dispatchEvent(new CustomEvent("change")))}}else if("x-tag"===t.target.localName){t.stopImmediatePropagation(),t.preventDefault();let e=[...this.children].filter((t=>"x-tag"===t.localName)),i=t.target,s=e.indexOf(i),n=e[s+1]||null,a=e[s-1]||null;n?n.focus():a?a.focus():this["#input"].focus(),i.remove(),this.#ua(),this.dispatchEvent(new CustomEvent("remove",{detail:i})),this.dispatchEvent(new CustomEvent("change"))}}else if("ArrowDown"===t.code){if(this["#suggestions-popover"].opened){let e=[...this["#suggested-tags"].children];if(e.length>1){t.preventDefault();let i=null;{let t=e.find((t=>t.toggled));if(t){t.toggled=!1;let s=e.indexOf(t);i=e[s+1]||e[0]}else i=e[0]}i.toggled=!0,i.scrollIntoViewIfNeeded();{let t=i.querySelector("x-label").textContent,e=this["#input"].selectionStart;this["#input"].value=t,this.#ba(),this.#xa(e,t.length)}}}}else if("ArrowUp"===t.code){if(this["#suggestions-popover"].opened){let e=[...this["#suggested-tags"].children];if(e.length>1){t.preventDefault();let i=null;{let t=e.find((t=>t.toggled));if(t){t.toggled=!1;let s=e.indexOf(t);i=e[s-1]||e.at(-1)}else i=e.at(-1)}i.toggled=!0,i.scrollIntoViewIfNeeded();{let t=i.querySelector("x-label").textContent,e=this["#input"].selectionStart;this["#input"].value=t,this.#ba(),this.#xa(e,t.length)}}}}else"ArrowLeft"!==t.code&&"ArrowRight"!==t.code||this.#ga()}#Xt(){this.#ua()}#ua(){let t=this.querySelector(":scope > x-label");t&&(t.hidden=this.value.length>0||this["#input"].value.length>0)}#J(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#ba(){this["#input"].style.minWidth="0px",this["#input"].style.minWidth=this["#input"].scrollWidth+"px"}#xa(t=0,e=this["#input"].value.length){this["#input"].selectionStart=t,this["#input"].selectionEnd=e}#pa(t=!0){if(this.suggestions){let e=this["#input"].value;this["#input"].selectionStart!==this["#input"].selectionEnd&&(e=e.substring(0,this["#input"].selectionStart));let i=this.getSuggestions(e);if(i.length>0&&!0===t){let t=this["#input"].value,e=i[0].querySelector("x-label").textContent;this["#input"].value=e,this.#ba(),this.#xa(t.length,e.length)}if(0===i.length)this["#suggested-tags"].innerHTML="",!0===this["#suggestions-popover"].opened&&this["#suggestions-popover"].close();else{let s=this["#input"].getBoundingClientRect();this["#suggested-tags"].innerHTML="",this["#suggested-tags"].append(...i),!0===t&&e.length>0&&(i[0].toggled=!0),!1===this["#suggestions-popover"].opened||this["#suggestions-popover"].close(!1),this["#suggestions-popover"].open(s),this["#suggested-tags"].scrollTop=0}}}}customElements.define("x-tagsinput",Qa);class tr extends HTMLElement{static observedAttributes=["value","spellcheck","disabled","validation"];static#z=Us`<template><div id="main"><slot></slot><div id="editor" contenteditable="plaintext-only" spellcheck="false"></div></div></template>`;static#E=Ys`:host{display:block flex;position:relative;width:100%;min-height:100px;box-sizing:border-box;font-size:0.78125rem;overflow:auto}:host(:hover){cursor:text}:host([mixed]){color:rgba(0, 0, 0, 0.7)}:host([disabled]){pointer-events:none;opacity:0.5}:host([hidden]){display:none}::selection{color:var(--selection-color);background-color:var(--selection-background-color)}:host(:not(:focus)) ::selection{color:inherit;background:none}::-webkit-scrollbar{max-width:6px;max-height:6px;background:none}::-webkit-scrollbar-track{border-radius:25px}::-webkit-scrollbar-thumb{background-color:rgba(0, 0, 0, 0.2);border-radius:25px}::-webkit-scrollbar-corner{display:none}#main{display:flex;flex-flow:column;width:100%;min-height:100%}#editor{flex:1;padding:2px 6px;box-sizing:border-box;color:inherit;background:none;border:none;outline:none;font-family:inherit;font-size:inherit}
`;get value(){return this["#editor"].textContent}set value(t){if(this["#editor"].textContent=t,this.matches(":focus")){document.execCommand("selectAll"),("chromium"===_n()?this.#$.getSelection():window.getSelection()).collapseToEnd()}"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#ls)&&this.reportValidity(),this.#zt()}get spellcheck(){return this.hasAttribute("spellcheck")}set spellcheck(t){t?this.setAttribute("spellcheck",""):this.removeAttribute("spellcheck")}get minLength(){return this.hasAttribute("minlength")?Number.parseInt(this.getAttribute("minlength")):0}set minLength(t){this.setAttribute("minlength",t)}get maxLength(){return this.hasAttribute("maxlength")?Number.parseInt(this.getAttribute("maxlength")):Number.POSITIVE_INFINITY}set maxLength(t){this.setAttribute("maxlength",t)}get required(){return this.hasAttribute("required")}set required(t){t?this.setAttribute("required",""):this.removeAttribute("required")}get mixed(){return this.hasAttribute("mixed")}set mixed(t){t?this.setAttribute("mixed",""):this.removeAttribute("mixed")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get validation(){return this.hasAttribute("validation")?this.getAttribute("validation"):"auto"}set validation(t){this.setAttribute("validation",t)}get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}get empty(){return this.hasAttribute("empty")}get error(){return this.hasAttribute("error")}#$=null;#wa="";#U=0;#Et=null;#ls=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed",delegatesFocus:!0}),this.#$.adoptedStyleSheets=[tr.#E],this.#$.append(document.importNode(tr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this.addEventListener("click",(t=>this.#T(t))),this.addEventListener("focusin",(t=>this.#Pt(t))),this.addEventListener("focusout",(t=>this.#Tt(t))),this["#editor"].addEventListener("click",(t=>this.#va(t))),this["#editor"].addEventListener("input",(t=>this.#wn(t))),"gecko"===_n()&&(this["#editor"].setAttribute("contenteditable",""),this["#editor"].addEventListener("beforeinput",(t=>{if("insertFromPaste"===t.inputType&&t.dataTransfer.types.includes("text/plain")){t.preventDefault();let e=window.getSelection(),i=e.getRangeAt(0);i.deleteContents(),i.insertNode(document.createTextNode(t.dataTransfer.getData("text/plain"))),e.collapseToEnd()}})))}connectedCallback(){this.#J(),this.#zt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#ls)&&this.reportValidity()}attributeChangedCallback(t,e,i){e!==i&&("value"===t?this.#Zt():"spellcheck"===t?this.#cs():"disabled"===t?this.#vt():"validation"===t&&this.#bs())}reportValidity(){let t=new CustomEvent("beforevalidate",{bubbles:!1,cancelable:!0});return this.dispatchEvent(t),!1===t.defaultPrevented&&(this.value.length<this.minLength?this.#Et={href:"#entered-text-is-too-short"}:this.value.length>this.maxLength?this.#Et={href:"#entered-text-is-too-long"}:this.required&&0===this.value.length?this.#Et={href:"#required-field"}:this.#Et=null,this.#Yt()),null===this.#Et&&null===this.#ls}setCustomValidity(t){this.#ls=""===t?null:t,this.#Yt()}#Yt(){let e=this.#ls||this.#Et;e?this.setAttribute("error",""):this.removeAttribute("error");{let i=this.querySelector(':scope > x-tooltip[type="error"]');if(e&&this.matches(":focus")){if(i||(i=t("x-tooltip"),i.setAttribute("type","error"),this.append(i)),e.href){let t=e.args?Object.entries(e.args).map((([t,e])=>`${t}:${e}`)).join(","):"";i.innerHTML=`<x-message href="${e.href}" args="${t}"></x-message>`}else i.innerHTML=e;Zn(10).then((()=>{i.open(this)}))}else i&&i.close().then((()=>i.remove()))}}#zt(){0===this.value.length?this.setAttribute("empty",""):this.removeAttribute("empty")}#J(){this.setAttribute("role","input"),this.setAttribute("aria-disabled",this.disabled),this.disabled?(this.#U=this.tabIndex>0?this.tabIndex:0,this.tabIndex=-1):(this.tabIndex<0&&(this.tabIndex=this.#U>0?this.#U:0),this.#U=0)}#Zt(){this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.matches(":focus")&&document.execCommand("selectAll")}#cs(){this["#editor"].spellcheck=this.spellcheck}#vt(){this["#editor"].contentEditable=this.disabled?"false":"plaintext-only",this.#J()}#bs(){"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#ls)&&this.reportValidity()}#T(){this.#Yt()}#Pt(){this.#wa=this.value,this.#Yt(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}))}#Tt(){this.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),"auto"===this.validation||"instant"===this.validation?this.reportValidity():"manual"===this.validation&&this.#Yt(),null!==(this.#Et||this.#ls)||this.value===this.#wa&&!this.mixed||(this.mixed=!1,this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))),("chromium"===_n()?this.#$:window).getSelection().collapse(this["#main"])}#va(t){t.detail>=4&&document.execCommand("selectAll")}#wn(){this.dispatchEvent(new CustomEvent("input",{bubbles:!0})),this.#zt(),"instant"===this.validation?this.reportValidity():"auto"!==this.validation&&"manual"!==this.validation||(this.#Et||this.#ls)&&this.reportValidity()}}customElements.define("x-texteditor",tr);class er extends HTMLElement{static#z=Us`<template><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="40"><animate attributeName="stroke-dasharray" values="0,1000; 200,1000; 245,1000" begin="0s" dur="2s" calcMode="spline" keyTimes="0; 0.5; 1" keySplines="0.8 0.25 0.25 0.9; 0.8 0.25 0.25 0.9" repeatCount="indefinite"></animate><animate attributeName="stroke-dashoffset" values="0px;0px;-260px" begin="0s" dur="2s" keyTimes="0; 0.5; 1" repeatCount="indefinite"></animate><animateTransform type="rotate" additive="sum" attributeName="transform" values="0;360" begin="0s" dur="2s" fill="freeze" repeatCount="indefinite" keyTimes="0; 1"></animateTransform></circle></svg></template>`;static#E=Ys`:host{display:block;width:30px;height:30px;box-sizing:border-box}:host([hidden]){display:none}svg{color:inherit;width:100%;height:100%}svg circle{fill:none;stroke:currentColor;stroke-linecap:round;stroke-width:10px;stroke-dasharray:10, 1000;transform-box:fill-box;transform-origin:50% 50%}
`;get size(){let t=this.getAttribute("size");return"small"===t||"large"===t?t:null}set size(t){"small"===t||"large"===t?this.setAttribute("size",t):this.removeAttribute("size")}#$=null;#ya=null;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[er.#E],this.#ya=new IntersectionObserver((()=>this.#Xt()))}connectedCallback(){this.#Xt(),this.#ya.observe(this)}disconnectedCallback(){this.#ya.unobserve(this)}#Xt(){if(this.hidden||this.checkVisibility&&!1===this.checkVisibility())this.#$.innerHTML="";else{null===this.#$.firstElementChild&&this.#$.append(document.importNode(er.#z.content,!0))}}}customElements.define("x-throbber",er);class ir extends HTMLElement{static observedAttributes=["title"];static#z=Us`<template><slot></slot><x-buttons part="buttons" id="buttons"><x-button id="minimize-button" value="minimize" skin="flat" part="button minimize-button" condensed><svg part="icon" viewBox="0 0 100 100"><path></path></svg></x-button><x-button id="maximize-button" value="maximize" skin="flat" part="button maximize-button" condensed><svg part="icon" viewBox="0 0 100 100"><path></path></svg></x-button><x-button id="restore-button" value="restore" skin="flat" part="button restore-button" condensed><svg part="icon" viewBox="0 0 100 100"><path></path></svg></x-button><x-button id="close-button" value="close" skin="flat" part="button close-button" condensed><svg part="icon" viewBox="0 0 100 100"><path></path></svg></x-button></x-buttons></template>`;static#E=Ys`:host{display:block flex;align-items:center;justify-content:space-evenly;width:100%;height:32px;gap:16px;position:relative;box-sizing:border-box;app-region:drag}::slotted(*){user-select:none}#buttons{position:absolute}:host([maximized])::part(maximize-button){display:none}:host(:not([maximized]))::part(restore-button){display:none}#buttons > x-button{margin:0;app-region:no-drag}#buttons > x-button > svg{fill:currentColor}
`;get maximized(){return this.hasAttribute("maximized")}set maximized(t){t?this.setAttribute("maximized",""):this.removeAttribute("maximized")}#$;#P;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[Vn.themeStyleSheet,ir.#E],this.#$.append(document.importNode(ir.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t;this["#buttons"].addEventListener("click",(t=>this.#ka(t)))}connectedCallback(){Vn.addEventListener("themechange",this.#P=()=>this.#Ca()),Vn.whenThemeReady.then((()=>{this.#Ca()}))}disconnectedCallback(){Vn.removeEventListener("themechange",this.#P)}#ka(t){let e=t.target.closest("x-button");e&&this.dispatchEvent(new CustomEvent("buttonclick",{detail:e.value}))}#Ca(){for(let t of this["#buttons"].children){let e=getComputedStyle(t).getPropertyValue("--path-data");t.querySelector("path").setAttribute("d",e)}}}customElements.define("x-titlebar",ir);class sr extends HTMLElement{static observedAttributes=["disabled"];static#z=Us`<template><slot></slot></template>`;static#E=Ys`:host{display:none;bottom:-30px;position:fixed;padding:3px 10px;width:fit-content;height:fit-content;max-width:300px;box-sizing:border-box;pointer-events:none;border-width:1px;border-style:solid;font-size:0.75rem;z-index:99999;--align: bottom;--whitespace: 8px;--open-transition: 0 opacity cubic-bezier(0.4, 0, 0.2, 1);--close-transition: 0 opacity cubic-bezier(0.4, 0, 0.2, 1);}:host([opened]), :host([animating]){display:block}
`;get type(){return this.hasAttribute("type")?this.getAttribute("type"):"hint"}set type(t){this.setAttribute("type",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get opened(){return this.hasAttribute("opened")}#$=null;#Gn=null;#_n;#Le;constructor(){super(),this.#$=this.attachShadow({mode:"closed"}),this.#$.adoptedStyleSheets=[sr.#E],this.#$.append(document.importNode(sr.#z.content,!0));for(let t of this.#$.querySelectorAll("[id]"))this["#"+t.id]=t}attributeChangedCallback(t,e,i){e!==i&&"disabled"===t&&this.disabled&&this.opened&&this.close()}disconnectedCallback(){this.close(!1)}open(t,e=!0){return new Promise((async i=>{if(!1===this.opened&&this.isConnected){if(this.setAttribute("opened",""),this.#Un(t),this.#Gn=s(this),t instanceof Element&&(this.#Le=new ResizeObserver((()=>this.#Un(t))),this.#Le.observe(this)),this.#Gn&&this.#Gn.addEventListener("scroll",this.#_n=()=>{this.close()},{once:!0}),e){let t=getComputedStyle(this).getPropertyValue("--open-transition"),[e,i,s]=Ea(t);"opacity"===e&&await this.animate({opacity:["0","1"]},{duration:i,easing:s}).finished}this.dispatchEvent(new CustomEvent("open",{bubbles:!0,detail:this}))}i()}))}close(t=!0){return new Promise((async e=>{if(!0===this.opened){if(this.removeAttribute("opened"),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,detail:this})),this.#Gn&&this.#Gn.removeEventListener("scroll",this.#_n),this.#Le&&(this.#Le.unobserve(this),this.#Le=null),t){let t=getComputedStyle(this).getPropertyValue("--close-transition"),[e,i,s]=Ea(t);this.setAttribute("animating",""),"opacity"===e&&await this.animate({opacity:["1","0"]},{duration:i,easing:s}).finished}this.removeAttribute("animating")}e()}))}#Un(t){let e=getComputedStyle(this).getPropertyValue("--align").trim(),i=Number.parseInt(getComputedStyle(this).getPropertyValue("--whitespace")),s=0,n=0,a=null;this.style.maxWidth=null,this.style.maxHeight=null,this.style.left="0px",this.style.top="0px";{let e=$i(this.getBoundingClientRect());0===e.top&&0===e.left||(s=-e.left,n=-e.top),a=t instanceof DOMPoint?new DOMRect(t.x,t.y,0,0):t instanceof DOMRect?t:t instanceof Element?t.getBoundingClientRect():new DOMRect}if("bottom"===e||"top"===e){let t=(t=!1)=>{this.style.maxHeight=null;let e=$i(this.getBoundingClientRect()),s=0;if(this.style.top=n+a.bottom+i+"px",e=$i(this.getBoundingClientRect()),s=e.bottom+8-window.innerHeight,t&&s>0){let t=e.height-s;s=0,this.style.maxHeight=t+"px"}return s},r=(t=!1)=>{this.style.maxHeight=null;let e=$i(this.getBoundingClientRect()),s=0;if(this.style.top=n+a.top-i-e.height+"px",e=$i(this.getBoundingClientRect()),s=-(e.top-8),t&&s>0){let t=e.height-s;s=0,this.style.maxHeight=t+"px",this.style.top=n+a.top-i-t+"px"}return s},o=()=>{this.style.maxWidth=null;let t=$i(this.getBoundingClientRect()),e=0,i=0;return this.style.left=s+a.left+a.width/2-t.width/2+"px",t=$i(this.getBoundingClientRect()),e=-(t.left-8),i=t.right+8-window.innerWidth,[e,i]},l=(t=!1)=>{this.style.maxWidth=null;let e=$i(this.getBoundingClientRect()),i=0;if(this.style.left=s+window.innerWidth-8-e.width+"px",e=$i(this.getBoundingClientRect()),i=-(e.left-8),t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px",this.style.left=s+window.innerWidth-8-t+"px"}return i},h=(t=!1)=>{this.style.maxWidth=null;let e=$i(this.getBoundingClientRect()),i=0;if(this.style.left=s+8+"px",e=$i(this.getBoundingClientRect()),i=e.right+8-window.innerWidth,t&&i>0){let t=e.width-i;i=0,this.style.maxWidth=t+"px"}return i};if("bottom"===e){let e=t();if(e>0){let i=r();i>0&&(i>e?t(!0):r(!0))}}else if("top"===e){let e=r();if(e>0){let i=t();i>0&&(i>e?r(!0):t(!0))}}{let[t,e]=o();e>0?(t=l(),t>0&&l(!0)):t>0&&(e=h(),e>0&&h(!0))}}else if("right"===e||"left"===e){let t=(t=!1)=>{this.style.maxWidth=null;let e=$i(this.getBoundingClientRect()),n=0;if(this.style.left=s+a.right+i+"px",e=$i(this.getBoundingClientRect()),n=e.right+8-window.innerWidth,t&&n>0){let t=e.width-n;n=0,this.style.maxWidth=t+"px"}return n},r=(t=!1)=>{this.style.maxWidth=null;let e=$i(this.getBoundingClientRect()),n=0;if(this.style.left=s+a.left-i-e.width+"px",e=$i(this.getBoundingClientRect()),n=-(e.left-8),t&&n>0){let t=e.width-n;n=0,this.style.maxWidth=t+"px",this.style.left=s+a.left-i-t+"px"}return n},o=()=>{this.style.maxHeight=null;let t=$i(this.getBoundingClientRect()),e=0,i=0;return this.style.top=n+a.top+a.height/2-t.height/2+"px",t=$i(this.getBoundingClientRect()),e=-(t.top-8),i=t.bottom+8-window.innerHeight,[e,i]},l=(t=!1)=>{this.style.maxHeight=null;let e=$i(this.getBoundingClientRect()),i=0;if(this.style.top=n+window.innerHeight-8-e.height+"px",e=$i(this.getBoundingClientRect()),i=-(e.top-8),t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px",this.style.top=n+window.innerHeight-8-t+"px"}return i},h=(t=!1)=>{this.style.maxHeight=null;let e=$i(this.getBoundingClientRect()),i=0;if(this.style.top=n+8+"px",e=$i(this.getBoundingClientRect()),i=e.bottom+8-window.innerHeight,t&&i>0){let t=e.height-i;i=0,this.style.maxHeight=t+"px"}return i};if("right"===e){let e=t();if(e>0){let i=r();i>0&&(i>e?t(!0):r(!0))}}else if("left"===e){let e=r();if(e>0){let i=t();i>0&&(i>e?r(!0):t(!0))}}{let[t,e]=o();e>0?(t=l(),t>0&&l(!0)):t>0&&(e=h(),e>0&&h(!0))}}}}customElements.define("x-tooltip",sr);export{Wn as XAccordionElement,qn as XAvatarElement,Kn as XBackdropElement,Jn as XBoxElement,Qn as XButtonElement,ta as XButtonsElement,ea as XCardElement,ia as XCheckboxElement,sa as XColorInputElement,fa as XColorPickerElement,xa as XColorSelectElement,wa as XContextMenuElement,va as XDrawerElement,ya as XIconElement,ka as XInputElement,Ca as XLabelElement,$a as XMenuElement,La as XMenuItemElement,Ma as XMenubarElement,za as XMessageElement,Aa as XNavElement,Pa as XNavItemElement,Ta as XNotificationElement,Da as XNumberInputElement,Ba as XPagerElement,Oa as XPopoverElement,Na as XProgressbarElement,Ha as XRadioElement,Ia as XRadiosElement,Ga as XSelectElement,_a as XShortcutElement,Za as XSliderElement,Ua as XStepperElement,Ya as XSwatchElement,Va as XSwitchElement,Wa as XTabElement,qa as XTabsElement,Ka as XTagElement,Ja as XTagsElement,Qa as XTagsInputElement,tr as XTextEditorElement,er as XThrobberElement,ir as XTitlebarElement,sr as XTooltipElement,Vn as default};